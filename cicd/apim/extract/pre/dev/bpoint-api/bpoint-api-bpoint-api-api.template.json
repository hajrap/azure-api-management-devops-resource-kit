{
  "$schema": "https://schema.management.azure.com/schemas/2019-04-01/deploymentTemplate.json#",
  "contentVersion": "1.0.0.0",
  "parameters": {
    "ApimServiceName": {
      "type": "string"
    },
    "serviceUrl": {
      "type": "object"
    }
  },
  "resources": [
    {
      "properties": {
        "description": "Provides APIs to BPoint services.\n\nReference <a href=\"https://www.bpoint.com.au/developers/v5/\">https://www.bpoint.com.au/developers/v5/</a>\n<br />\nThe above api is to get the transaction details after making a payment to show the receipt number.\n\nWhen showing the iframe you use the bpoint domain - https://bpoint.uat.linkly.com.au/rest/iframe/field/card.number\nAnd \nWhen submitting a payment from browser, you have to use the bpoint domain - https://bpoint.uat.linkly.com.au/rest/v5/txns/authkeys/{authkey-value}/client/payment-method \n\nYou can see the flow working on preprod site - https://preprod.sydneywater.com.au/accounts-billing/paying-your-bill/bill-payment.html accessible via SW Citrix.\n\nYou can use test card numbers - https://www.bpoint.com.au/developers/v5/reference/test-mode",
        "authenticationSettings": {
          "subscriptionKeyRequired": false
        },
        "subscriptionKeyParameterNames": {
          "header": "Ocp-Apim-Subscription-Key",
          "query": "subscription-key"
        },
        "apiRevision": "10",
        "apiVersion": "v1",
        "isCurrent": true,
        "apiRevisionDescription": "overriding dvtokens operation's b/e url ",
        "apiVersionSetId": "[concat(resourceId('Microsoft.ApiManagement/service', parameters('ApimServiceName')), '/apiVersionSets/60b830e1839b233270e90fe6')]",
        "subscriptionRequired": true,
        "displayName": "BPoint API",
        "serviceUrl": "[parameters('serviceUrl').bpointapi]",
        "path": "bpoint",
        "protocols": [
          "https"
        ]
      },
      "name": "[concat(parameters('ApimServiceName'), '/bpoint-api')]",
      "type": "Microsoft.ApiManagement/service/apis",
      "apiVersion": "2021-01-01-preview",
      "dependsOn": []
    },
    {
      "properties": {
        "contentType": "application/vnd.ms-azure-apim.swagger.definitions+json",
        "document": {
          "value": "{\"PaymentRules\":{\"type\":\"object\",\"properties\":{\"amountLimits\":{\"$ref\":\"#/definitions/AmountLimits\"},\"acceptedCards\":{\"type\":\"array\",\"items\":{\"enum\":[\"Unspecified\",\"Amex\",\"Mastercard\",\"Visa\",\"Diners\",\"ChinaUnionPay\",\"Jcb\"],\"type\":\"string\"}},\"surchargeRules\":{\"description\":\"List of surcharge settings by card scheme, location and type.\\r\\nSurcharge is calculated as Clamp(fixedAmount + (percent * amount), limits.minimum, limits.maximum)\",\"type\":\"array\",\"items\":{\"$ref\":\"#/definitions/SurchargeRule\"}},\"acceptedPaymentMethodProviders\":{\"type\":\"array\",\"items\":{\"enum\":[\"Unspecified\",\"Klarna\"],\"type\":\"string\"}}}},\"AmountLimits\":{\"type\":\"object\",\"properties\":{\"minimum\":{\"format\":\"int32\",\"type\":\"integer\"},\"maximum\":{\"format\":\"int32\",\"type\":\"integer\"}}},\"SurchargeRule\":{\"type\":\"object\",\"properties\":{\"scheme\":{\"enum\":[\"Unspecified\",\"Amex\",\"Mastercard\",\"Visa\",\"Diners\",\"ChinaUnionPay\",\"Jcb\"],\"type\":\"string\",\"example\":\"Amex\"},\"type\":{\"enum\":[\"Unspecified\",\"Debit\",\"Credit\",\"ChargeCard\"],\"type\":\"string\",\"example\":\"Debit\"},\"localisation\":{\"enum\":[\"Unspecified\",\"Local\",\"International\"],\"type\":\"string\",\"example\":\"Local\"},\"fixedAmount\":{\"format\":\"int32\",\"type\":\"integer\"},\"percent\":{\"format\":\"double\",\"type\":\"number\"},\"limits\":{\"$ref\":\"#/definitions/AmountLimits\"}}},\"Token\":{\"type\":\"object\",\"properties\":{\"token\":{\"type\":\"string\"},\"merchantNumber\":{\"type\":\"string\"},\"crn1\":{\"type\":\"string\"},\"crn2\":{\"type\":\"string\"},\"crn3\":{\"type\":\"string\"},\"paymentMethod\":{\"$ref\":\"#/definitions/TokenPaymentMethod\"},\"emailAddress\":{\"description\":\"Customer's email address\",\"type\":\"string\"},\"createdDateTime\":{\"format\":\"date-time\",\"type\":\"string\"},\"updatedDateTime\":{\"format\":\"date-time\",\"type\":\"string\"}}},\"TokenPaymentMethod\":{\"type\":\"object\",\"properties\":{\"card\":{\"$ref\":\"#/definitions/MaskedCardDetails\"},\"bank\":{\"$ref\":\"#/definitions/BankAccountDetails\"}}},\"MaskedCardDetails\":{\"type\":\"object\",\"properties\":{\"number\":{\"description\":\"The masked card number, in the format 123456...789\",\"type\":\"string\"},\"expiry\":{\"$ref\":\"#/definitions/ExpiryDate\"},\"name\":{\"type\":\"string\"},\"scheme\":{\"enum\":[\"Unspecified\",\"Amex\",\"Mastercard\",\"Visa\",\"Diners\",\"ChinaUnionPay\",\"Jcb\"],\"type\":\"string\",\"example\":\"Amex\"},\"localisation\":{\"enum\":[\"Unspecified\",\"Local\",\"International\"],\"type\":\"string\",\"example\":\"Local\"},\"type\":{\"enum\":[\"Unspecified\",\"Debit\",\"Credit\",\"ChargeCard\"],\"type\":\"string\",\"example\":\"Debit\"}}},\"BankAccountDetails\":{\"type\":\"object\",\"properties\":{\"bsb\":{\"type\":\"string\"},\"account\":{\"type\":\"string\"},\"name\":{\"type\":\"string\"}}},\"ExpiryDate\":{\"type\":\"object\",\"properties\":{\"month\":{\"type\":\"string\"},\"year\":{\"type\":\"string\"}}},\"AttachTokenPaymentMethodRequest\":{\"type\":\"object\",\"properties\":{\"card\":{\"$ref\":\"#/definitions/TokenCardDetails\"},\"bank\":{\"$ref\":\"#/definitions/BankAccountDetails\"}}},\"TokenCardDetails\":{\"type\":\"object\",\"properties\":{\"number\":{\"type\":\"string\"},\"expiry\":{\"$ref\":\"#/definitions/ExpiryDate\"},\"name\":{\"type\":\"string\"}}},\"TokenDetailsRequest\":{\"type\":\"object\",\"properties\":{\"crn1\":{\"type\":\"string\"},\"crn2\":{\"type\":\"string\"},\"crn3\":{\"type\":\"string\"},\"emailAddress\":{\"description\":\"Customer's email address\",\"type\":\"string\"}}},\"CreateAuthkeyResponse\":{\"type\":\"object\",\"properties\":{\"authkey\":{\"description\":\"The authkey identifier, used in subsequent requests\",\"type\":\"string\"}}},\"ProcessTokenRequest\":{\"type\":\"object\",\"properties\":{\"webhook\":{\"$ref\":\"#/definitions/TxnWebhook\"}}},\"TxnWebhook\":{\"type\":\"object\",\"properties\":{\"url\":{\"type\":\"string\"},\"version\":{\"description\":\"The API version of the webhook response. Defaults to API version of the request.\",\"type\":\"string\"}}},\"ProcessTokenResponse\":{\"type\":\"object\",\"properties\":{\"token\":{\"$ref\":\"#/definitions/Token\"}}},\"ClientPaymentMethodResponse\":{\"type\":\"object\",\"properties\":{\"isToken\":{\"description\":\"Whether the payment method is a token\",\"type\":\"boolean\"},\"card\":{\"$ref\":\"#/definitions/MaskedCardDetails\"},\"bank\":{\"$ref\":\"#/definitions/MaskedBankAccountDetails\"},\"accepted\":{\"description\":\"Whether the payment method is accepted by biller rules\",\"type\":\"boolean\"},\"surcharge\":{\"format\":\"int64\",\"description\":\"Calculated surcharge amount according to the biller rules\",\"type\":\"integer\"},\"provider\":{\"enum\":[\"Unspecified\",\"Klarna\"],\"type\":\"string\",\"example\":\"Klarna\"}}},\"MaskedBankAccountDetails\":{\"type\":\"object\",\"properties\":{\"bsb\":{\"type\":\"string\"},\"account\":{\"description\":\"The masked account number, in the format 5...8\",\"type\":\"string\"},\"name\":{\"type\":\"string\"}}},\"ClientTokenPaymentMethod\":{\"type\":\"object\",\"properties\":{\"card\":{\"$ref\":\"#/definitions/MaskedCardDetails\"},\"bank\":{\"$ref\":\"#/definitions/MaskedBankAccountDetails\"}}},\"Txn\":{\"type\":\"object\",\"properties\":{\"action\":{\"enum\":[\"Unspecified\",\"Payment\",\"Refund\",\"UnmatchedRefund\",\"PreAuth\",\"Capture\",\"Reversal\",\"VerifyOnly\"],\"type\":\"string\",\"example\":\"Payment\"},\"type\":{\"enum\":[\"Unspecified\",\"Internet\",\"CallCentre\",\"CardPresent\",\"ECommerce\",\"Ivr\",\"MailOrder\",\"TelephoneOrder\"],\"type\":\"string\",\"example\":\"Internet\"},\"subType\":{\"enum\":[\"Unspecified\",\"Single\",\"Recurring\"],\"type\":\"string\",\"example\":\"Single\"},\"source\":{\"type\":\"string\"},\"billerCode\":{\"type\":\"string\"},\"merchantNumber\":{\"type\":\"string\"},\"crn1\":{\"type\":\"string\"},\"crn2\":{\"type\":\"string\"},\"crn3\":{\"type\":\"string\"},\"merchantReference\":{\"description\":\"Reference that is for internal use only.\",\"type\":\"string\"},\"currency\":{\"type\":\"string\",\"example\":\"AUD\"},\"amount\":{\"format\":\"int64\",\"description\":\"Total transaction amount in the lowest denomination for the currency\",\"type\":\"integer\",\"example\":110},\"amountOriginal\":{\"format\":\"int64\",\"description\":\"Base transaction amount in the lowest denomination for the currency (without surcharge)\",\"type\":\"integer\",\"example\":100},\"amountSurcharge\":{\"format\":\"int64\",\"description\":\"Surcharge amount in the lowest denomination for the currency\",\"type\":\"integer\",\"example\":10},\"paymentMethod\":{\"$ref\":\"#/definitions/PaymentMethod\"},\"processedDateTime\":{\"format\":\"date-time\",\"description\":\"Date and time when transaction was processed\",\"type\":\"string\"},\"settlementDate\":{\"description\":\"Date of settlement. In YYYYMMDD format.\",\"type\":\"string\"},\"emailAddress\":{\"description\":\"Customer's email address\",\"type\":\"string\",\"example\":\"example@email.com\"},\"originalTxnNumber\":{\"description\":\"Used for refunds, reversals and captures. Transaction number of the original transaction\",\"type\":\"string\"},\"responseCode\":{\"description\":\"Summary response code. 0 means the transaction was approved. Any other value indicates a decline or error\",\"type\":\"string\"},\"bankResponseCode\":{\"description\":\"Response code returned from the issuing bank\",\"type\":\"string\"},\"responseText\":{\"description\":\"Description of the ResponseCode.\",\"type\":\"string\"},\"txnNumber\":{\"type\":\"string\"},\"receiptNumber\":{\"type\":\"string\"},\"authoriseId\":{\"description\":\"AuthoriseId issued by the Acquirer for approved transactions. Not all Acquirers return the AuthoriseId even if the transaction is approved.\",\"type\":\"string\"},\"rrn\":{\"description\":\"Retrieval reference number.\",\"type\":\"string\"},\"storeCard\":{\"description\":\"Whether the cardholder agreed to save their card details.\",\"type\":\"boolean\"},\"cvnResult\":{\"$ref\":\"#/definitions/CvnResult\"},\"isThreeDs\":{\"description\":\"Whether transaction was subject to 3D Secure verification\",\"type\":\"boolean\"},\"isCvnPresent\":{\"description\":\"Whether CVN was present\",\"type\":\"boolean\"},\"isTestTxn\":{\"description\":\"Whether the transaction was processed as a test transaction.\",\"type\":\"boolean\"},\"fraudScreeningResult\":{\"$ref\":\"#/definitions/FraudScreeningResult\"},\"statementDescriptor\":{\"$ref\":\"#/definitions/StatementDescriptor\"},\"threeDsResult\":{\"$ref\":\"#/definitions/ThreeDsResult\"}}},\"PaymentMethod\":{\"type\":\"object\",\"properties\":{\"token\":{\"type\":\"string\"},\"card\":{\"$ref\":\"#/definitions/MaskedCardDetails\"},\"bank\":{\"$ref\":\"#/definitions/BankAccountDetails\"},\"provider\":{\"enum\":[\"Unspecified\",\"Klarna\"],\"type\":\"string\",\"example\":\"Klarna\"}}},\"CvnResult\":{\"type\":\"object\",\"properties\":{\"code\":{\"type\":\"string\"}}},\"FraudScreeningResult\":{\"type\":\"object\",\"properties\":{\"rejected\":{\"type\":\"boolean\"},\"responseCode\":{\"type\":\"string\"},\"responseMessage\":{\"type\":\"string\"},\"provider\":{\"$ref\":\"#/definitions/ProviderResult\"}}},\"StatementDescriptor\":{\"type\":\"object\",\"properties\":{\"city\":{\"type\":\"string\"},\"companyName\":{\"type\":\"string\"},\"countryCode\":{\"type\":\"string\"},\"postcode\":{\"type\":\"string\"},\"state\":{\"type\":\"string\"},\"addressLine1\":{\"type\":\"string\"},\"addressLine2\":{\"type\":\"string\"},\"merchantName\":{\"type\":\"string\"},\"phoneNumber\":{\"type\":\"string\"}}},\"ThreeDsResult\":{\"type\":\"object\",\"properties\":{\"fields\":{\"type\":\"array\",\"items\":{\"$ref\":\"#/definitions/ThreeDsField\"}}}},\"ProviderResult\":{\"type\":\"object\",\"properties\":{\"id\":{\"type\":\"string\"},\"response\":{\"type\":\"array\",\"items\":{\"$ref\":\"#/definitions/ProviderResponseKeyValue\"}},\"errors\":{\"type\":\"array\",\"items\":{\"$ref\":\"#/definitions/ProviderResponseError\"}}}},\"ThreeDsField\":{\"type\":\"object\",\"properties\":{\"key\":{\"type\":\"string\"},\"value\":{\"type\":\"string\"}}},\"ProviderResponseKeyValue\":{\"type\":\"object\",\"properties\":{\"key\":{\"type\":\"string\"},\"value\":{\"type\":\"string\"}}},\"ProviderResponseError\":{\"type\":\"object\",\"properties\":{\"field\":{\"type\":\"string\"},\"message\":{\"type\":\"string\"}}},\"Authentication\":{\"type\":\"object\",\"properties\":{\"status\":{\"enum\":[\"InProgress\",\"Complete\"],\"type\":\"string\",\"example\":\"InProgress\"}}},\"PaymentMethodResponse\":{\"type\":\"object\",\"properties\":{\"accepted\":{\"description\":\"Whether the payment method is accepted, affected by biller rules when a BillerCode is supplied\",\"type\":\"boolean\"},\"surcharge\":{\"format\":\"int64\",\"description\":\"Calculated surcharge amount, affected by biller rules when a BillerCode is supplied\",\"type\":\"integer\"},\"token\":{\"type\":\"string\"},\"card\":{\"$ref\":\"#/definitions/MaskedCardDetails\"},\"bank\":{\"$ref\":\"#/definitions/BankAccountDetails\"},\"provider\":{\"enum\":[\"Unspecified\",\"Klarna\"],\"type\":\"string\",\"example\":\"Klarna\"}}},\"AttachPaymentMethodRequest\":{\"type\":\"object\",\"properties\":{\"token\":{\"type\":\"string\"},\"card\":{\"$ref\":\"#/definitions/CardDetails\",\"description\":\"Card details, or if a token is supplied, this will be used to override card expiry and/or supply CVN\"},\"provider\":{\"enum\":[\"Unspecified\",\"Klarna\"],\"type\":\"string\",\"example\":\"Klarna\"}}},\"CardDetails\":{\"type\":\"object\",\"properties\":{\"cvn\":{\"type\":\"string\"},\"number\":{\"type\":\"string\"},\"expiry\":{\"$ref\":\"#/definitions/ExpiryDate\"},\"name\":{\"type\":\"string\"}}},\"TxnDetailsRequest\":{\"type\":\"object\",\"properties\":{\"action\":{\"enum\":[\"Unspecified\",\"Payment\",\"Refund\",\"UnmatchedRefund\",\"PreAuth\",\"Capture\",\"Reversal\",\"VerifyOnly\"],\"type\":\"string\",\"example\":\"Payment\"},\"type\":{\"enum\":[\"Unspecified\",\"Internet\",\"CallCentre\",\"CardPresent\",\"ECommerce\",\"Ivr\",\"MailOrder\",\"TelephoneOrder\"],\"type\":\"string\",\"example\":\"Internet\"},\"subType\":{\"enum\":[\"Unspecified\",\"Single\",\"Recurring\"],\"type\":\"string\",\"example\":\"Single\"},\"amount\":{\"format\":\"int64\",\"description\":\"Base transaction amount in the lowest denomination for the currency (excluding any surcharge)\",\"type\":\"integer\",\"example\":100},\"billerCode\":{\"type\":\"string\"},\"crn1\":{\"type\":\"string\"},\"crn2\":{\"type\":\"string\"},\"crn3\":{\"type\":\"string\"},\"merchantReference\":{\"description\":\"Reference that is for internal use only.\",\"type\":\"string\"},\"currency\":{\"type\":\"string\",\"example\":\"AUD\"},\"bypass3ds\":{\"description\":\"Whether to bypass 3DS authentication\",\"type\":\"boolean\",\"example\":false},\"tokenisationMode\":{\"enum\":[\"Default\",\"None\",\"OptIn\",\"All\"],\"type\":\"string\",\"example\":\"Default\"},\"emailAddress\":{\"description\":\"Customer's email address\",\"type\":\"string\",\"example\":\"example@email.com\"},\"storeCard\":{\"description\":\"Whether the cardholder agrees to save their card details\",\"type\":\"boolean\"},\"testMode\":{\"description\":\"Flag to indicate whether transactions should be processed in test mode\",\"type\":\"boolean\"}}},\"OrderDetails\":{\"type\":\"object\",\"properties\":{\"shippingAddress\":{\"$ref\":\"#/definitions/OrderAddress\"},\"billingAddress\":{\"$ref\":\"#/definitions/OrderAddress\"},\"items\":{\"type\":\"array\",\"items\":{\"$ref\":\"#/definitions/OrderItem\"}},\"shippingMethod\":{\"enum\":[\"Unspecified\",\"NextDayService\",\"TwoDayService\",\"ThreeDayService\",\"LowCostCarrier\",\"CustomerChoice\",\"International\",\"Military\",\"CollectAtStore\",\"Other\",\"Standard\",\"Priority\",\"ETicket\",\"DigitalGoods\"],\"type\":\"string\",\"example\":\"NextDayService\"},\"recipients\":{\"type\":\"array\",\"items\":{\"$ref\":\"#/definitions/OrderRecipient\"}}}},\"OrderAddress\":{\"type\":\"object\",\"properties\":{\"personalDetails\":{\"$ref\":\"#/definitions/PersonalDetails\"},\"contactDetails\":{\"$ref\":\"#/definitions/ContactDetails\"},\"address\":{\"$ref\":\"#/definitions/Address\"},\"comments\":{\"type\":\"string\"}}},\"OrderItem\":{\"type\":\"object\",\"properties\":{\"quantity\":{\"format\":\"double\",\"type\":\"number\"},\"sku\":{\"type\":\"string\"},\"productCode\":{\"type\":\"string\"},\"partNumber\":{\"type\":\"string\"},\"description\":{\"type\":\"string\"},\"unitPrice\":{\"format\":\"int64\",\"type\":\"integer\"},\"shippingNumber\":{\"type\":\"string\"},\"shippingMethod\":{\"enum\":[\"Unspecified\",\"NextDayService\",\"TwoDayService\",\"ThreeDayService\",\"LowCostCarrier\",\"CustomerChoice\",\"International\",\"Military\",\"CollectAtStore\",\"Other\",\"Standard\",\"Priority\",\"ETicket\",\"DigitalGoods\"],\"type\":\"string\",\"example\":\"NextDayService\"},\"comments\":{\"type\":\"string\"},\"giftMessage\":{\"type\":\"string\"},\"totalAmount\":{\"format\":\"int32\",\"type\":\"integer\"}}},\"OrderRecipient\":{\"type\":\"object\",\"properties\":{\"personalDetails\":{\"$ref\":\"#/definitions/PersonalDetails\"},\"contactDetails\":{\"$ref\":\"#/definitions/ContactDetails\"},\"address\":{\"$ref\":\"#/definitions/Address\"}}},\"PersonalDetails\":{\"type\":\"object\",\"properties\":{\"salutation\":{\"type\":\"string\"},\"firstName\":{\"type\":\"string\"},\"middleName\":{\"type\":\"string\"},\"lastName\":{\"type\":\"string\"},\"dateOfBirth\":{\"type\":\"string\"}}},\"ContactDetails\":{\"type\":\"object\",\"properties\":{\"homePhoneNumber\":{\"type\":\"string\"},\"mobilePhoneNumber\":{\"type\":\"string\"},\"workPhoneNumber\":{\"type\":\"string\"},\"faxNumber\":{\"type\":\"string\"},\"emailAddress\":{\"type\":\"string\"}}},\"Address\":{\"type\":\"object\",\"properties\":{\"addressLine1\":{\"type\":\"string\"},\"addressLine2\":{\"type\":\"string\"},\"addressLine3\":{\"type\":\"string\"},\"city\":{\"type\":\"string\"},\"state\":{\"type\":\"string\"},\"postcode\":{\"type\":\"string\"},\"countryCode\":{\"type\":\"string\"}}},\"FraudScreeningRequest\":{\"type\":\"object\",\"properties\":{\"performFraudScreening\":{\"type\":\"boolean\"},\"deviceFingerprint\":{\"type\":\"string\"},\"customerIpAddress\":{\"type\":\"string\"},\"txnSourceWebsiteUrl\":{\"type\":\"string\"},\"customFields\":{\"type\":\"array\",\"items\":{\"$ref\":\"#/definitions/CustomField\"}},\"browserHeaders\":{\"type\":\"array\",\"items\":{\"$ref\":\"#/definitions/BrowserHeader\"}},\"deviceInformation\":{\"$ref\":\"#/definitions/DeviceInformation\"},\"customer\":{\"$ref\":\"#/definitions/CustomerDetails\",\"description\":\"Customer details (equivalent to PUT /customer-details endpoint)\"},\"order\":{\"$ref\":\"#/definitions/OrderDetails\",\"description\":\"Order details (equivalent to PUT /order-details endpoint)\"}}},\"CustomField\":{\"type\":\"object\",\"properties\":{\"value\":{\"type\":\"string\"}}},\"BrowserHeader\":{\"type\":\"object\",\"properties\":{\"name\":{\"type\":\"string\"},\"value\":{\"type\":\"string\"}}},\"DeviceInformation\":{\"type\":\"object\",\"properties\":{\"locationLatitude\":{\"type\":\"string\"},\"locationLongitude\":{\"type\":\"string\"},\"mobileCountryCode\":{\"type\":\"string\"},\"mobileNetworkCode\":{\"type\":\"string\"},\"carrierName\":{\"type\":\"string\"},\"imei\":{\"type\":\"string\"},\"mobileOs\":{\"type\":\"string\"}}},\"CustomerDetails\":{\"type\":\"object\",\"properties\":{\"customerNumber\":{\"type\":\"string\"},\"daysOnFile\":{\"format\":\"int32\",\"type\":\"integer\"},\"isExistingCustomer\":{\"description\":\"Flag to indicate if this is an existing customer\",\"type\":\"boolean\"},\"personalDetails\":{\"$ref\":\"#/definitions/PersonalDetails\"},\"contactDetails\":{\"$ref\":\"#/definitions/ContactDetails\"},\"address\":{\"$ref\":\"#/definitions/Address\"}}},\"TxnProcessRequest\":{\"type\":\"object\",\"properties\":{\"webhook\":{\"$ref\":\"#/definitions/TxnWebhook\"},\"surcharge\":{\"$ref\":\"#/definitions/TxnSurcharge\"},\"updateToken\":{\"description\":\"When processing with a token, whether the token's expiry date should be updated\",\"type\":\"boolean\"}}},\"TxnSurcharge\":{\"type\":\"object\",\"properties\":{\"calculate\":{\"description\":\"Whether to calculate the surcharge from Biller rules\",\"type\":\"boolean\"},\"amount\":{\"format\":\"int64\",\"description\":\"The surcharge amount, will be added to the Transaction Amount.\",\"type\":\"integer\"}}},\"ProcessTxnResponse\":{\"type\":\"object\",\"properties\":{\"txn\":{\"$ref\":\"#/definitions/Txn\"}}},\"TxnInitiateProviderRequest\":{\"type\":\"object\",\"properties\":{\"surcharge\":{\"$ref\":\"#/definitions/TxnSurcharge\"}}},\"SetupAuthenticationIframeResponse\":{\"type\":\"object\",\"properties\":{\"iframe\":{\"$ref\":\"#/definitions/AuthenticationIframe\",\"description\":\"Details on the iframe, will be null if the authentication is immediately complete\"},\"authentication\":{\"$ref\":\"#/definitions/Authentication\"}}},\"AuthenticationIframe\":{\"type\":\"object\",\"properties\":{\"url\":{\"type\":\"string\"},\"origin\":{\"type\":\"string\"}}},\"KlarnaSession\":{\"type\":\"object\",\"properties\":{\"clientToken\":{\"type\":\"string\"},\"paymentMethodCategories\":{\"type\":\"array\",\"items\":{\"$ref\":\"#/definitions/KlarnaPaymentMethodCategory\"}}}},\"KlarnaPaymentMethodCategory\":{\"type\":\"object\",\"properties\":{\"identifier\":{\"type\":\"string\"},\"name\":{\"type\":\"string\"},\"logoUrl\":{\"type\":\"string\"}}},\"AttachClientPaymentMethodRequest\":{\"type\":\"object\",\"properties\":{\"card\":{\"$ref\":\"#/definitions/CardDetails\"}}},\"ApplePayPaymentToken\":{\"type\":\"object\",\"properties\":{\"paymentData\":{\"$ref\":\"#/definitions/ApplePayPaymentData\"},\"paymentMethod\":{\"$ref\":\"#/definitions/ApplePayPaymentMethod\"},\"transactionIdentifier\":{\"type\":\"string\"}}},\"ApplePayPaymentData\":{\"type\":\"object\",\"properties\":{\"data\":{\"type\":\"string\"},\"signature\":{\"type\":\"string\"},\"header\":{\"$ref\":\"#/definitions/ApplePayPaymentDataHeader\"},\"version\":{\"type\":\"string\"}}},\"ApplePayPaymentMethod\":{\"type\":\"object\",\"properties\":{\"displayName\":{\"type\":\"string\"},\"network\":{\"type\":\"string\"},\"type\":{\"type\":\"string\"}}},\"ApplePayPaymentDataHeader\":{\"type\":\"object\",\"properties\":{\"transactionId\":{\"type\":\"string\"},\"publicKeyHash\":{\"type\":\"string\"},\"applicationData\":{\"type\":\"string\"},\"ephemeralPublicKey\":{\"type\":\"string\"}}},\"Error\":{\"type\":\"object\",\"properties\":{\"code\":{\"enum\":[\"Unspecified\",\"Fatal\",\"SystemDown\",\"InvalidFields\",\"InvalidCredentials\",\"NotAuthenticated\",\"InvalidPermissions\",\"InvalidPayload\",\"InvalidFlow\"],\"type\":\"string\",\"example\":\"Fatal\"},\"message\":{\"type\":\"string\"},\"details\":{\"type\":\"array\",\"items\":{\"$ref\":\"#/definitions/SubError\"}}}},\"SubError\":{\"type\":\"object\",\"properties\":{\"code\":{\"enum\":[\"Unspecified\",\"Mandatory\",\"Invalid\",\"OutOfRange\",\"NotFound\",\"MaxLength\",\"MinLength\",\"BannedCharacters\"],\"type\":\"string\",\"example\":\"Mandatory\"},\"message\":{\"type\":\"string\"},\"field\":{\"type\":\"string\"}}},\"default_authKey\":{\"type\":\"object\",\"properties\":{}},\"default_Authkey\":{\"type\":\"object\",\"properties\":{}}}"
        }
      },
      "name": "[concat(parameters('ApimServiceName'), '/bpoint-api/61b2e1d0ec635c1020b10294')]",
      "type": "Microsoft.ApiManagement/service/apis/schemas",
      "apiVersion": "2021-01-01-preview",
      "dependsOn": [
        "[resourceId('Microsoft.ApiManagement/service/apis', parameters('ApimServiceName'), 'bpoint-api')]"
      ]
    },
    {
      "properties": {
        "templateParameters": [
          {
            "name": "authkey",
            "type": "string",
            "required": true,
            "values": []
          }
        ],
        "description": "Attach an Apple Pay payment token as a payment method",
        "request": {
          "queryParameters": [],
          "headers": [],
          "representations": [
            {
              "contentType": "application/json",
              "sample": "{\r\n  \"paymentData\": {\r\n    \"data\": \"string\",\r\n    \"signature\": \"string\",\r\n    \"header\": {\r\n      \"transactionId\": \"string\",\r\n      \"publicKeyHash\": \"string\",\r\n      \"applicationData\": \"string\",\r\n      \"ephemeralPublicKey\": \"string\"\r\n    },\r\n    \"version\": \"string\"\r\n  },\r\n  \"paymentMethod\": {\r\n    \"displayName\": \"string\",\r\n    \"network\": \"string\",\r\n    \"type\": \"string\"\r\n  },\r\n  \"transactionIdentifier\": \"string\"\r\n}",
              "schemaId": "61b2e1d0ec635c1020b10294",
              "typeName": "ApplePayPaymentToken"
            },
            {
              "contentType": "text/json",
              "sample": "{\r\n  \"paymentData\": {\r\n    \"data\": \"string\",\r\n    \"signature\": \"string\",\r\n    \"header\": {\r\n      \"transactionId\": \"string\",\r\n      \"publicKeyHash\": \"string\",\r\n      \"applicationData\": \"string\",\r\n      \"ephemeralPublicKey\": \"string\"\r\n    },\r\n    \"version\": \"string\"\r\n  },\r\n  \"paymentMethod\": {\r\n    \"displayName\": \"string\",\r\n    \"network\": \"string\",\r\n    \"type\": \"string\"\r\n  },\r\n  \"transactionIdentifier\": \"string\"\r\n}",
              "schemaId": "61b2e1d0ec635c1020b10294",
              "typeName": "ApplePayPaymentToken"
            },
            {
              "contentType": "application/x-www-form-urlencoded"
            }
          ]
        },
        "responses": [
          {
            "statusCode": 200,
            "description": "OK",
            "headers": [],
            "representations": [
              {
                "contentType": "application/json",
                "sample": "{\r\n  \"isToken\": true,\r\n  \"card\": {\r\n    \"number\": \"string\",\r\n    \"expiry\": {\r\n      \"month\": \"string\",\r\n      \"year\": \"string\"\r\n    },\r\n    \"name\": \"string\",\r\n    \"scheme\": \"Amex\",\r\n    \"localisation\": \"Local\",\r\n    \"type\": \"Debit\"\r\n  },\r\n  \"bank\": {\r\n    \"bsb\": \"string\",\r\n    \"account\": \"string\",\r\n    \"name\": \"string\"\r\n  },\r\n  \"accepted\": true,\r\n  \"surcharge\": 0,\r\n  \"provider\": \"Klarna\"\r\n}",
                "schemaId": "61b2e1d0ec635c1020b10294",
                "typeName": "ClientPaymentMethodResponse"
              },
              {
                "contentType": "text/json",
                "sample": "{\r\n  \"isToken\": true,\r\n  \"card\": {\r\n    \"number\": \"string\",\r\n    \"expiry\": {\r\n      \"month\": \"string\",\r\n      \"year\": \"string\"\r\n    },\r\n    \"name\": \"string\",\r\n    \"scheme\": \"Amex\",\r\n    \"localisation\": \"Local\",\r\n    \"type\": \"Debit\"\r\n  },\r\n  \"bank\": {\r\n    \"bsb\": \"string\",\r\n    \"account\": \"string\",\r\n    \"name\": \"string\"\r\n  },\r\n  \"accepted\": true,\r\n  \"surcharge\": 0,\r\n  \"provider\": \"Klarna\"\r\n}",
                "schemaId": "61b2e1d0ec635c1020b10294",
                "typeName": "ClientPaymentMethodResponse"
              }
            ]
          },
          {
            "statusCode": 400,
            "description": "Request was invalid",
            "headers": [],
            "representations": [
              {
                "contentType": "application/json",
                "sample": "{\r\n  \"code\": \"Fatal\",\r\n  \"message\": \"string\",\r\n  \"details\": [\r\n    {\r\n      \"code\": \"Mandatory\",\r\n      \"message\": \"string\",\r\n      \"field\": \"string\"\r\n    }\r\n  ]\r\n}",
                "schemaId": "61b2e1d0ec635c1020b10294",
                "typeName": "Error"
              },
              {
                "contentType": "text/json",
                "sample": "{\r\n  \"code\": \"Fatal\",\r\n  \"message\": \"string\",\r\n  \"details\": [\r\n    {\r\n      \"code\": \"Mandatory\",\r\n      \"message\": \"string\",\r\n      \"field\": \"string\"\r\n    }\r\n  ]\r\n}",
                "schemaId": "61b2e1d0ec635c1020b10294",
                "typeName": "Error"
              }
            ]
          },
          {
            "statusCode": 500,
            "description": "Unknown error occurred",
            "headers": [],
            "representations": [
              {
                "contentType": "application/json",
                "sample": "{\r\n  \"code\": \"Fatal\",\r\n  \"message\": \"string\",\r\n  \"details\": [\r\n    {\r\n      \"code\": \"Mandatory\",\r\n      \"message\": \"string\",\r\n      \"field\": \"string\"\r\n    }\r\n  ]\r\n}",
                "schemaId": "61b2e1d0ec635c1020b10294",
                "typeName": "Error"
              },
              {
                "contentType": "text/json",
                "sample": "{\r\n  \"code\": \"Fatal\",\r\n  \"message\": \"string\",\r\n  \"details\": [\r\n    {\r\n      \"code\": \"Mandatory\",\r\n      \"message\": \"string\",\r\n      \"field\": \"string\"\r\n    }\r\n  ]\r\n}",
                "schemaId": "61b2e1d0ec635c1020b10294",
                "typeName": "Error"
              }
            ]
          }
        ],
        "displayName": "Attach an Apple Pay payment token as a payment method",
        "method": "PUT",
        "urlTemplate": "/txns/authkeys/{authkey}/client/payment-method/apple-pay-payment-token"
      },
      "name": "[concat(parameters('ApimServiceName'), '/bpoint-api/TxnAuthkeyClient_AttachApplePayPaymentToken')]",
      "type": "Microsoft.ApiManagement/service/apis/operations",
      "apiVersion": "2021-01-01-preview",
      "dependsOn": [
        "[resourceId('Microsoft.ApiManagement/service/apis', parameters('ApimServiceName'), 'bpoint-api')]",
        "[resourceId('Microsoft.ApiManagement/service/apis/schemas', parameters('ApimServiceName'), 'bpoint-api', '61b2e1d0ec635c1020b10294')]"
      ]
    },
    {
      "properties": {
        "displayName": "TxnAuthkeyClient"
      },
      "name": "[concat(parameters('ApimServiceName'), '/bpoint-api/TxnAuthkeyClient_AttachApplePayPaymentToken/TxnAuthkeyClient')]",
      "type": "Microsoft.ApiManagement/service/apis/operations/tags",
      "apiVersion": "2021-01-01-preview",
      "dependsOn": [
        "[resourceId('Microsoft.ApiManagement/service/apis/operations', parameters('ApimServiceName'), 'bpoint-api', 'TxnAuthkeyClient_AttachApplePayPaymentToken')]"
      ]
    },
    {
      "properties": {
        "templateParameters": [
          {
            "name": "authkey",
            "type": "string",
            "required": true,
            "values": []
          }
        ],
        "description": "Attach customer details",
        "request": {
          "queryParameters": [],
          "headers": [],
          "representations": [
            {
              "contentType": "application/json",
              "sample": "{\r\n  \"customerNumber\": \"string\",\r\n  \"daysOnFile\": 0,\r\n  \"isExistingCustomer\": true,\r\n  \"personalDetails\": {\r\n    \"salutation\": \"string\",\r\n    \"firstName\": \"string\",\r\n    \"middleName\": \"string\",\r\n    \"lastName\": \"string\",\r\n    \"dateOfBirth\": \"string\"\r\n  },\r\n  \"contactDetails\": {\r\n    \"homePhoneNumber\": \"string\",\r\n    \"mobilePhoneNumber\": \"string\",\r\n    \"workPhoneNumber\": \"string\",\r\n    \"faxNumber\": \"string\",\r\n    \"emailAddress\": \"string\"\r\n  },\r\n  \"address\": {\r\n    \"addressLine1\": \"string\",\r\n    \"addressLine2\": \"string\",\r\n    \"addressLine3\": \"string\",\r\n    \"city\": \"string\",\r\n    \"state\": \"string\",\r\n    \"postcode\": \"string\",\r\n    \"countryCode\": \"string\"\r\n  }\r\n}",
              "schemaId": "61b2e1d0ec635c1020b10294",
              "typeName": "CustomerDetails"
            },
            {
              "contentType": "text/json",
              "sample": "{\r\n  \"customerNumber\": \"string\",\r\n  \"daysOnFile\": 0,\r\n  \"isExistingCustomer\": true,\r\n  \"personalDetails\": {\r\n    \"salutation\": \"string\",\r\n    \"firstName\": \"string\",\r\n    \"middleName\": \"string\",\r\n    \"lastName\": \"string\",\r\n    \"dateOfBirth\": \"string\"\r\n  },\r\n  \"contactDetails\": {\r\n    \"homePhoneNumber\": \"string\",\r\n    \"mobilePhoneNumber\": \"string\",\r\n    \"workPhoneNumber\": \"string\",\r\n    \"faxNumber\": \"string\",\r\n    \"emailAddress\": \"string\"\r\n  },\r\n  \"address\": {\r\n    \"addressLine1\": \"string\",\r\n    \"addressLine2\": \"string\",\r\n    \"addressLine3\": \"string\",\r\n    \"city\": \"string\",\r\n    \"state\": \"string\",\r\n    \"postcode\": \"string\",\r\n    \"countryCode\": \"string\"\r\n  }\r\n}",
              "schemaId": "61b2e1d0ec635c1020b10294",
              "typeName": "CustomerDetails"
            },
            {
              "contentType": "application/x-www-form-urlencoded"
            }
          ]
        },
        "responses": [
          {
            "statusCode": 201,
            "description": "Successful",
            "headers": [],
            "representations": []
          },
          {
            "statusCode": 400,
            "description": "Request was invalid",
            "headers": [],
            "representations": []
          },
          {
            "statusCode": 401,
            "description": "Invalid credentials, or user does not have required permissions",
            "headers": [],
            "representations": []
          },
          {
            "statusCode": 500,
            "description": "Unknown error occurred",
            "headers": [],
            "representations": []
          }
        ],
        "displayName": "Attach customer details",
        "method": "PUT",
        "urlTemplate": "/txns/authkeys/{authkey}/customer-details"
      },
      "name": "[concat(parameters('ApimServiceName'), '/bpoint-api/TxnAuthkey_AttachCustomerDetails')]",
      "type": "Microsoft.ApiManagement/service/apis/operations",
      "apiVersion": "2021-01-01-preview",
      "dependsOn": [
        "[resourceId('Microsoft.ApiManagement/service/apis', parameters('ApimServiceName'), 'bpoint-api')]",
        "[resourceId('Microsoft.ApiManagement/service/apis/schemas', parameters('ApimServiceName'), 'bpoint-api', '61b2e1d0ec635c1020b10294')]"
      ]
    },
    {
      "properties": {
        "displayName": "TxnAuthkey"
      },
      "name": "[concat(parameters('ApimServiceName'), '/bpoint-api/TxnAuthkey_AttachCustomerDetails/TxnAuthkey')]",
      "type": "Microsoft.ApiManagement/service/apis/operations/tags",
      "apiVersion": "2021-01-01-preview",
      "dependsOn": [
        "[resourceId('Microsoft.ApiManagement/service/apis/operations', parameters('ApimServiceName'), 'bpoint-api', 'TxnAuthkey_AttachCustomerDetails')]"
      ]
    },
    {
      "properties": {
        "templateParameters": [
          {
            "name": "authkey",
            "type": "string",
            "required": true,
            "values": []
          }
        ],
        "description": "Attach fraud screening details",
        "request": {
          "queryParameters": [],
          "headers": [],
          "representations": [
            {
              "contentType": "application/json",
              "sample": "{\r\n  \"performFraudScreening\": true,\r\n  \"deviceFingerprint\": \"string\",\r\n  \"customerIpAddress\": \"string\",\r\n  \"txnSourceWebsiteUrl\": \"string\",\r\n  \"customFields\": [\r\n    {\r\n      \"value\": \"string\"\r\n    }\r\n  ],\r\n  \"browserHeaders\": [\r\n    {\r\n      \"name\": \"string\",\r\n      \"value\": \"string\"\r\n    }\r\n  ],\r\n  \"deviceInformation\": {\r\n    \"locationLatitude\": \"string\",\r\n    \"locationLongitude\": \"string\",\r\n    \"mobileCountryCode\": \"string\",\r\n    \"mobileNetworkCode\": \"string\",\r\n    \"carrierName\": \"string\",\r\n    \"imei\": \"string\",\r\n    \"mobileOs\": \"string\"\r\n  },\r\n  \"customer\": {\r\n    \"customerNumber\": \"string\",\r\n    \"daysOnFile\": 0,\r\n    \"isExistingCustomer\": true,\r\n    \"personalDetails\": {\r\n      \"salutation\": \"string\",\r\n      \"firstName\": \"string\",\r\n      \"middleName\": \"string\",\r\n      \"lastName\": \"string\",\r\n      \"dateOfBirth\": \"string\"\r\n    },\r\n    \"contactDetails\": {\r\n      \"homePhoneNumber\": \"string\",\r\n      \"mobilePhoneNumber\": \"string\",\r\n      \"workPhoneNumber\": \"string\",\r\n      \"faxNumber\": \"string\",\r\n      \"emailAddress\": \"string\"\r\n    },\r\n    \"address\": {\r\n      \"addressLine1\": \"string\",\r\n      \"addressLine2\": \"string\",\r\n      \"addressLine3\": \"string\",\r\n      \"city\": \"string\",\r\n      \"state\": \"string\",\r\n      \"postcode\": \"string\",\r\n      \"countryCode\": \"string\"\r\n    }\r\n  },\r\n  \"order\": {\r\n    \"shippingAddress\": {\r\n      \"personalDetails\": {\r\n        \"salutation\": \"string\",\r\n        \"firstName\": \"string\",\r\n        \"middleName\": \"string\",\r\n        \"lastName\": \"string\",\r\n        \"dateOfBirth\": \"string\"\r\n      },\r\n      \"contactDetails\": {\r\n        \"homePhoneNumber\": \"string\",\r\n        \"mobilePhoneNumber\": \"string\",\r\n        \"workPhoneNumber\": \"string\",\r\n        \"faxNumber\": \"string\",\r\n        \"emailAddress\": \"string\"\r\n      },\r\n      \"address\": {\r\n        \"addressLine1\": \"string\",\r\n        \"addressLine2\": \"string\",\r\n        \"addressLine3\": \"string\",\r\n        \"city\": \"string\",\r\n        \"state\": \"string\",\r\n        \"postcode\": \"string\",\r\n        \"countryCode\": \"string\"\r\n      },\r\n      \"comments\": \"string\"\r\n    },\r\n    \"billingAddress\": {\r\n      \"personalDetails\": {\r\n        \"salutation\": \"string\",\r\n        \"firstName\": \"string\",\r\n        \"middleName\": \"string\",\r\n        \"lastName\": \"string\",\r\n        \"dateOfBirth\": \"string\"\r\n      },\r\n      \"contactDetails\": {\r\n        \"homePhoneNumber\": \"string\",\r\n        \"mobilePhoneNumber\": \"string\",\r\n        \"workPhoneNumber\": \"string\",\r\n        \"faxNumber\": \"string\",\r\n        \"emailAddress\": \"string\"\r\n      },\r\n      \"address\": {\r\n        \"addressLine1\": \"string\",\r\n        \"addressLine2\": \"string\",\r\n        \"addressLine3\": \"string\",\r\n        \"city\": \"string\",\r\n        \"state\": \"string\",\r\n        \"postcode\": \"string\",\r\n        \"countryCode\": \"string\"\r\n      },\r\n      \"comments\": \"string\"\r\n    },\r\n    \"items\": [\r\n      {\r\n        \"quantity\": 0.0,\r\n        \"sku\": \"string\",\r\n        \"productCode\": \"string\",\r\n        \"partNumber\": \"string\",\r\n        \"description\": \"string\",\r\n        \"unitPrice\": 0,\r\n        \"shippingNumber\": \"string\",\r\n        \"shippingMethod\": \"NextDayService\",\r\n        \"comments\": \"string\",\r\n        \"giftMessage\": \"string\",\r\n        \"totalAmount\": 0\r\n      }\r\n    ],\r\n    \"shippingMethod\": \"NextDayService\",\r\n    \"recipients\": [\r\n      {\r\n        \"personalDetails\": {\r\n          \"salutation\": \"string\",\r\n          \"firstName\": \"string\",\r\n          \"middleName\": \"string\",\r\n          \"lastName\": \"string\",\r\n          \"dateOfBirth\": \"string\"\r\n        },\r\n        \"contactDetails\": {\r\n          \"homePhoneNumber\": \"string\",\r\n          \"mobilePhoneNumber\": \"string\",\r\n          \"workPhoneNumber\": \"string\",\r\n          \"faxNumber\": \"string\",\r\n          \"emailAddress\": \"string\"\r\n        },\r\n        \"address\": {\r\n          \"addressLine1\": \"string\",\r\n          \"addressLine2\": \"string\",\r\n          \"addressLine3\": \"string\",\r\n          \"city\": \"string\",\r\n          \"state\": \"string\",\r\n          \"postcode\": \"string\",\r\n          \"countryCode\": \"string\"\r\n        }\r\n      }\r\n    ]\r\n  }\r\n}",
              "schemaId": "61b2e1d0ec635c1020b10294",
              "typeName": "FraudScreeningRequest"
            },
            {
              "contentType": "text/json",
              "sample": "{\r\n  \"performFraudScreening\": true,\r\n  \"deviceFingerprint\": \"string\",\r\n  \"customerIpAddress\": \"string\",\r\n  \"txnSourceWebsiteUrl\": \"string\",\r\n  \"customFields\": [\r\n    {\r\n      \"value\": \"string\"\r\n    }\r\n  ],\r\n  \"browserHeaders\": [\r\n    {\r\n      \"name\": \"string\",\r\n      \"value\": \"string\"\r\n    }\r\n  ],\r\n  \"deviceInformation\": {\r\n    \"locationLatitude\": \"string\",\r\n    \"locationLongitude\": \"string\",\r\n    \"mobileCountryCode\": \"string\",\r\n    \"mobileNetworkCode\": \"string\",\r\n    \"carrierName\": \"string\",\r\n    \"imei\": \"string\",\r\n    \"mobileOs\": \"string\"\r\n  },\r\n  \"customer\": {\r\n    \"customerNumber\": \"string\",\r\n    \"daysOnFile\": 0,\r\n    \"isExistingCustomer\": true,\r\n    \"personalDetails\": {\r\n      \"salutation\": \"string\",\r\n      \"firstName\": \"string\",\r\n      \"middleName\": \"string\",\r\n      \"lastName\": \"string\",\r\n      \"dateOfBirth\": \"string\"\r\n    },\r\n    \"contactDetails\": {\r\n      \"homePhoneNumber\": \"string\",\r\n      \"mobilePhoneNumber\": \"string\",\r\n      \"workPhoneNumber\": \"string\",\r\n      \"faxNumber\": \"string\",\r\n      \"emailAddress\": \"string\"\r\n    },\r\n    \"address\": {\r\n      \"addressLine1\": \"string\",\r\n      \"addressLine2\": \"string\",\r\n      \"addressLine3\": \"string\",\r\n      \"city\": \"string\",\r\n      \"state\": \"string\",\r\n      \"postcode\": \"string\",\r\n      \"countryCode\": \"string\"\r\n    }\r\n  },\r\n  \"order\": {\r\n    \"shippingAddress\": {\r\n      \"personalDetails\": {\r\n        \"salutation\": \"string\",\r\n        \"firstName\": \"string\",\r\n        \"middleName\": \"string\",\r\n        \"lastName\": \"string\",\r\n        \"dateOfBirth\": \"string\"\r\n      },\r\n      \"contactDetails\": {\r\n        \"homePhoneNumber\": \"string\",\r\n        \"mobilePhoneNumber\": \"string\",\r\n        \"workPhoneNumber\": \"string\",\r\n        \"faxNumber\": \"string\",\r\n        \"emailAddress\": \"string\"\r\n      },\r\n      \"address\": {\r\n        \"addressLine1\": \"string\",\r\n        \"addressLine2\": \"string\",\r\n        \"addressLine3\": \"string\",\r\n        \"city\": \"string\",\r\n        \"state\": \"string\",\r\n        \"postcode\": \"string\",\r\n        \"countryCode\": \"string\"\r\n      },\r\n      \"comments\": \"string\"\r\n    },\r\n    \"billingAddress\": {\r\n      \"personalDetails\": {\r\n        \"salutation\": \"string\",\r\n        \"firstName\": \"string\",\r\n        \"middleName\": \"string\",\r\n        \"lastName\": \"string\",\r\n        \"dateOfBirth\": \"string\"\r\n      },\r\n      \"contactDetails\": {\r\n        \"homePhoneNumber\": \"string\",\r\n        \"mobilePhoneNumber\": \"string\",\r\n        \"workPhoneNumber\": \"string\",\r\n        \"faxNumber\": \"string\",\r\n        \"emailAddress\": \"string\"\r\n      },\r\n      \"address\": {\r\n        \"addressLine1\": \"string\",\r\n        \"addressLine2\": \"string\",\r\n        \"addressLine3\": \"string\",\r\n        \"city\": \"string\",\r\n        \"state\": \"string\",\r\n        \"postcode\": \"string\",\r\n        \"countryCode\": \"string\"\r\n      },\r\n      \"comments\": \"string\"\r\n    },\r\n    \"items\": [\r\n      {\r\n        \"quantity\": 0.0,\r\n        \"sku\": \"string\",\r\n        \"productCode\": \"string\",\r\n        \"partNumber\": \"string\",\r\n        \"description\": \"string\",\r\n        \"unitPrice\": 0,\r\n        \"shippingNumber\": \"string\",\r\n        \"shippingMethod\": \"NextDayService\",\r\n        \"comments\": \"string\",\r\n        \"giftMessage\": \"string\",\r\n        \"totalAmount\": 0\r\n      }\r\n    ],\r\n    \"shippingMethod\": \"NextDayService\",\r\n    \"recipients\": [\r\n      {\r\n        \"personalDetails\": {\r\n          \"salutation\": \"string\",\r\n          \"firstName\": \"string\",\r\n          \"middleName\": \"string\",\r\n          \"lastName\": \"string\",\r\n          \"dateOfBirth\": \"string\"\r\n        },\r\n        \"contactDetails\": {\r\n          \"homePhoneNumber\": \"string\",\r\n          \"mobilePhoneNumber\": \"string\",\r\n          \"workPhoneNumber\": \"string\",\r\n          \"faxNumber\": \"string\",\r\n          \"emailAddress\": \"string\"\r\n        },\r\n        \"address\": {\r\n          \"addressLine1\": \"string\",\r\n          \"addressLine2\": \"string\",\r\n          \"addressLine3\": \"string\",\r\n          \"city\": \"string\",\r\n          \"state\": \"string\",\r\n          \"postcode\": \"string\",\r\n          \"countryCode\": \"string\"\r\n        }\r\n      }\r\n    ]\r\n  }\r\n}",
              "schemaId": "61b2e1d0ec635c1020b10294",
              "typeName": "FraudScreeningRequest"
            },
            {
              "contentType": "application/x-www-form-urlencoded"
            }
          ]
        },
        "responses": [
          {
            "statusCode": 201,
            "description": "Successful",
            "headers": [],
            "representations": []
          },
          {
            "statusCode": 400,
            "description": "Request was invalid",
            "headers": [],
            "representations": []
          },
          {
            "statusCode": 401,
            "description": "Invalid credentials, or user does not have required permissions",
            "headers": [],
            "representations": []
          },
          {
            "statusCode": 500,
            "description": "Unknown error occurred",
            "headers": [],
            "representations": []
          }
        ],
        "displayName": "Attach fraud screening details",
        "method": "PUT",
        "urlTemplate": "/txns/authkeys/{authkey}/fraud-screening"
      },
      "name": "[concat(parameters('ApimServiceName'), '/bpoint-api/TxnAuthkey_AttachFraudScreening')]",
      "type": "Microsoft.ApiManagement/service/apis/operations",
      "apiVersion": "2021-01-01-preview",
      "dependsOn": [
        "[resourceId('Microsoft.ApiManagement/service/apis', parameters('ApimServiceName'), 'bpoint-api')]",
        "[resourceId('Microsoft.ApiManagement/service/apis/schemas', parameters('ApimServiceName'), 'bpoint-api', '61b2e1d0ec635c1020b10294')]"
      ]
    },
    {
      "properties": {
        "displayName": "TxnAuthkey"
      },
      "name": "[concat(parameters('ApimServiceName'), '/bpoint-api/TxnAuthkey_AttachFraudScreening/TxnAuthkey')]",
      "type": "Microsoft.ApiManagement/service/apis/operations/tags",
      "apiVersion": "2021-01-01-preview",
      "dependsOn": [
        "[resourceId('Microsoft.ApiManagement/service/apis/operations', parameters('ApimServiceName'), 'bpoint-api', 'TxnAuthkey_AttachFraudScreening')]"
      ]
    },
    {
      "properties": {
        "templateParameters": [
          {
            "name": "authkey",
            "type": "string",
            "required": true,
            "values": []
          }
        ],
        "description": "Attach order details",
        "request": {
          "queryParameters": [],
          "headers": [],
          "representations": [
            {
              "contentType": "application/json",
              "sample": "{\r\n  \"shippingAddress\": {\r\n    \"personalDetails\": {\r\n      \"salutation\": \"string\",\r\n      \"firstName\": \"string\",\r\n      \"middleName\": \"string\",\r\n      \"lastName\": \"string\",\r\n      \"dateOfBirth\": \"string\"\r\n    },\r\n    \"contactDetails\": {\r\n      \"homePhoneNumber\": \"string\",\r\n      \"mobilePhoneNumber\": \"string\",\r\n      \"workPhoneNumber\": \"string\",\r\n      \"faxNumber\": \"string\",\r\n      \"emailAddress\": \"string\"\r\n    },\r\n    \"address\": {\r\n      \"addressLine1\": \"string\",\r\n      \"addressLine2\": \"string\",\r\n      \"addressLine3\": \"string\",\r\n      \"city\": \"string\",\r\n      \"state\": \"string\",\r\n      \"postcode\": \"string\",\r\n      \"countryCode\": \"string\"\r\n    },\r\n    \"comments\": \"string\"\r\n  },\r\n  \"billingAddress\": {\r\n    \"personalDetails\": {\r\n      \"salutation\": \"string\",\r\n      \"firstName\": \"string\",\r\n      \"middleName\": \"string\",\r\n      \"lastName\": \"string\",\r\n      \"dateOfBirth\": \"string\"\r\n    },\r\n    \"contactDetails\": {\r\n      \"homePhoneNumber\": \"string\",\r\n      \"mobilePhoneNumber\": \"string\",\r\n      \"workPhoneNumber\": \"string\",\r\n      \"faxNumber\": \"string\",\r\n      \"emailAddress\": \"string\"\r\n    },\r\n    \"address\": {\r\n      \"addressLine1\": \"string\",\r\n      \"addressLine2\": \"string\",\r\n      \"addressLine3\": \"string\",\r\n      \"city\": \"string\",\r\n      \"state\": \"string\",\r\n      \"postcode\": \"string\",\r\n      \"countryCode\": \"string\"\r\n    },\r\n    \"comments\": \"string\"\r\n  },\r\n  \"items\": [\r\n    {\r\n      \"quantity\": 0.0,\r\n      \"sku\": \"string\",\r\n      \"productCode\": \"string\",\r\n      \"partNumber\": \"string\",\r\n      \"description\": \"string\",\r\n      \"unitPrice\": 0,\r\n      \"shippingNumber\": \"string\",\r\n      \"shippingMethod\": \"NextDayService\",\r\n      \"comments\": \"string\",\r\n      \"giftMessage\": \"string\",\r\n      \"totalAmount\": 0\r\n    }\r\n  ],\r\n  \"shippingMethod\": \"NextDayService\",\r\n  \"recipients\": [\r\n    {\r\n      \"personalDetails\": {\r\n        \"salutation\": \"string\",\r\n        \"firstName\": \"string\",\r\n        \"middleName\": \"string\",\r\n        \"lastName\": \"string\",\r\n        \"dateOfBirth\": \"string\"\r\n      },\r\n      \"contactDetails\": {\r\n        \"homePhoneNumber\": \"string\",\r\n        \"mobilePhoneNumber\": \"string\",\r\n        \"workPhoneNumber\": \"string\",\r\n        \"faxNumber\": \"string\",\r\n        \"emailAddress\": \"string\"\r\n      },\r\n      \"address\": {\r\n        \"addressLine1\": \"string\",\r\n        \"addressLine2\": \"string\",\r\n        \"addressLine3\": \"string\",\r\n        \"city\": \"string\",\r\n        \"state\": \"string\",\r\n        \"postcode\": \"string\",\r\n        \"countryCode\": \"string\"\r\n      }\r\n    }\r\n  ]\r\n}",
              "schemaId": "61b2e1d0ec635c1020b10294",
              "typeName": "OrderDetails"
            },
            {
              "contentType": "text/json",
              "sample": "{\r\n  \"shippingAddress\": {\r\n    \"personalDetails\": {\r\n      \"salutation\": \"string\",\r\n      \"firstName\": \"string\",\r\n      \"middleName\": \"string\",\r\n      \"lastName\": \"string\",\r\n      \"dateOfBirth\": \"string\"\r\n    },\r\n    \"contactDetails\": {\r\n      \"homePhoneNumber\": \"string\",\r\n      \"mobilePhoneNumber\": \"string\",\r\n      \"workPhoneNumber\": \"string\",\r\n      \"faxNumber\": \"string\",\r\n      \"emailAddress\": \"string\"\r\n    },\r\n    \"address\": {\r\n      \"addressLine1\": \"string\",\r\n      \"addressLine2\": \"string\",\r\n      \"addressLine3\": \"string\",\r\n      \"city\": \"string\",\r\n      \"state\": \"string\",\r\n      \"postcode\": \"string\",\r\n      \"countryCode\": \"string\"\r\n    },\r\n    \"comments\": \"string\"\r\n  },\r\n  \"billingAddress\": {\r\n    \"personalDetails\": {\r\n      \"salutation\": \"string\",\r\n      \"firstName\": \"string\",\r\n      \"middleName\": \"string\",\r\n      \"lastName\": \"string\",\r\n      \"dateOfBirth\": \"string\"\r\n    },\r\n    \"contactDetails\": {\r\n      \"homePhoneNumber\": \"string\",\r\n      \"mobilePhoneNumber\": \"string\",\r\n      \"workPhoneNumber\": \"string\",\r\n      \"faxNumber\": \"string\",\r\n      \"emailAddress\": \"string\"\r\n    },\r\n    \"address\": {\r\n      \"addressLine1\": \"string\",\r\n      \"addressLine2\": \"string\",\r\n      \"addressLine3\": \"string\",\r\n      \"city\": \"string\",\r\n      \"state\": \"string\",\r\n      \"postcode\": \"string\",\r\n      \"countryCode\": \"string\"\r\n    },\r\n    \"comments\": \"string\"\r\n  },\r\n  \"items\": [\r\n    {\r\n      \"quantity\": 0.0,\r\n      \"sku\": \"string\",\r\n      \"productCode\": \"string\",\r\n      \"partNumber\": \"string\",\r\n      \"description\": \"string\",\r\n      \"unitPrice\": 0,\r\n      \"shippingNumber\": \"string\",\r\n      \"shippingMethod\": \"NextDayService\",\r\n      \"comments\": \"string\",\r\n      \"giftMessage\": \"string\",\r\n      \"totalAmount\": 0\r\n    }\r\n  ],\r\n  \"shippingMethod\": \"NextDayService\",\r\n  \"recipients\": [\r\n    {\r\n      \"personalDetails\": {\r\n        \"salutation\": \"string\",\r\n        \"firstName\": \"string\",\r\n        \"middleName\": \"string\",\r\n        \"lastName\": \"string\",\r\n        \"dateOfBirth\": \"string\"\r\n      },\r\n      \"contactDetails\": {\r\n        \"homePhoneNumber\": \"string\",\r\n        \"mobilePhoneNumber\": \"string\",\r\n        \"workPhoneNumber\": \"string\",\r\n        \"faxNumber\": \"string\",\r\n        \"emailAddress\": \"string\"\r\n      },\r\n      \"address\": {\r\n        \"addressLine1\": \"string\",\r\n        \"addressLine2\": \"string\",\r\n        \"addressLine3\": \"string\",\r\n        \"city\": \"string\",\r\n        \"state\": \"string\",\r\n        \"postcode\": \"string\",\r\n        \"countryCode\": \"string\"\r\n      }\r\n    }\r\n  ]\r\n}",
              "schemaId": "61b2e1d0ec635c1020b10294",
              "typeName": "OrderDetails"
            },
            {
              "contentType": "application/x-www-form-urlencoded"
            }
          ]
        },
        "responses": [
          {
            "statusCode": 201,
            "description": "Successful",
            "headers": [],
            "representations": []
          },
          {
            "statusCode": 400,
            "description": "Request was invalid",
            "headers": [],
            "representations": []
          },
          {
            "statusCode": 401,
            "description": "Invalid credentials, or user does not have required permissions",
            "headers": [],
            "representations": []
          },
          {
            "statusCode": 500,
            "description": "Unknown error occurred",
            "headers": [],
            "representations": []
          }
        ],
        "displayName": "Attach order details",
        "method": "PUT",
        "urlTemplate": "/txns/authkeys/{authkey}/order-details"
      },
      "name": "[concat(parameters('ApimServiceName'), '/bpoint-api/TxnAuthkey_AttachOrderDetails')]",
      "type": "Microsoft.ApiManagement/service/apis/operations",
      "apiVersion": "2021-01-01-preview",
      "dependsOn": [
        "[resourceId('Microsoft.ApiManagement/service/apis', parameters('ApimServiceName'), 'bpoint-api')]",
        "[resourceId('Microsoft.ApiManagement/service/apis/schemas', parameters('ApimServiceName'), 'bpoint-api', '61b2e1d0ec635c1020b10294')]"
      ]
    },
    {
      "properties": {
        "displayName": "TxnAuthkey"
      },
      "name": "[concat(parameters('ApimServiceName'), '/bpoint-api/TxnAuthkey_AttachOrderDetails/TxnAuthkey')]",
      "type": "Microsoft.ApiManagement/service/apis/operations/tags",
      "apiVersion": "2021-01-01-preview",
      "dependsOn": [
        "[resourceId('Microsoft.ApiManagement/service/apis/operations', parameters('ApimServiceName'), 'bpoint-api', 'TxnAuthkey_AttachOrderDetails')]"
      ]
    },
    {
      "properties": {
        "templateParameters": [
          {
            "name": "authkey",
            "type": "string",
            "required": true,
            "values": []
          }
        ],
        "description": "Note that if your system is passing credit card details, it will be directly in scope for PCI compliance.",
        "request": {
          "queryParameters": [],
          "headers": [],
          "representations": [
            {
              "contentType": "application/json",
              "sample": "{\r\n  \"card\": {\r\n    \"number\": \"string\",\r\n    \"expiry\": {\r\n      \"month\": \"string\",\r\n      \"year\": \"string\"\r\n    },\r\n    \"name\": \"string\"\r\n  },\r\n  \"bank\": {\r\n    \"bsb\": \"string\",\r\n    \"account\": \"string\",\r\n    \"name\": \"string\"\r\n  }\r\n}",
              "schemaId": "61b2e1d0ec635c1020b10294",
              "typeName": "AttachTokenPaymentMethodRequest"
            },
            {
              "contentType": "text/json",
              "sample": "{\r\n  \"card\": {\r\n    \"number\": \"string\",\r\n    \"expiry\": {\r\n      \"month\": \"string\",\r\n      \"year\": \"string\"\r\n    },\r\n    \"name\": \"string\"\r\n  },\r\n  \"bank\": {\r\n    \"bsb\": \"string\",\r\n    \"account\": \"string\",\r\n    \"name\": \"string\"\r\n  }\r\n}",
              "schemaId": "61b2e1d0ec635c1020b10294",
              "typeName": "AttachTokenPaymentMethodRequest"
            },
            {
              "contentType": "application/x-www-form-urlencoded"
            }
          ]
        },
        "responses": [
          {
            "statusCode": 200,
            "description": "OK",
            "headers": [],
            "representations": [
              {
                "contentType": "application/json",
                "sample": "{\r\n  \"card\": {\r\n    \"number\": \"string\",\r\n    \"expiry\": {\r\n      \"month\": \"string\",\r\n      \"year\": \"string\"\r\n    },\r\n    \"name\": \"string\",\r\n    \"scheme\": \"Amex\",\r\n    \"localisation\": \"Local\",\r\n    \"type\": \"Debit\"\r\n  },\r\n  \"bank\": {\r\n    \"bsb\": \"string\",\r\n    \"account\": \"string\",\r\n    \"name\": \"string\"\r\n  }\r\n}",
                "schemaId": "61b2e1d0ec635c1020b10294",
                "typeName": "TokenPaymentMethod"
              },
              {
                "contentType": "text/json",
                "sample": "{\r\n  \"card\": {\r\n    \"number\": \"string\",\r\n    \"expiry\": {\r\n      \"month\": \"string\",\r\n      \"year\": \"string\"\r\n    },\r\n    \"name\": \"string\",\r\n    \"scheme\": \"Amex\",\r\n    \"localisation\": \"Local\",\r\n    \"type\": \"Debit\"\r\n  },\r\n  \"bank\": {\r\n    \"bsb\": \"string\",\r\n    \"account\": \"string\",\r\n    \"name\": \"string\"\r\n  }\r\n}",
                "schemaId": "61b2e1d0ec635c1020b10294",
                "typeName": "TokenPaymentMethod"
              }
            ]
          },
          {
            "statusCode": 400,
            "description": "Request was invalid",
            "headers": [],
            "representations": [
              {
                "contentType": "application/json",
                "sample": "{\r\n  \"code\": \"Fatal\",\r\n  \"message\": \"string\",\r\n  \"details\": [\r\n    {\r\n      \"code\": \"Mandatory\",\r\n      \"message\": \"string\",\r\n      \"field\": \"string\"\r\n    }\r\n  ]\r\n}",
                "schemaId": "61b2e1d0ec635c1020b10294",
                "typeName": "Error"
              },
              {
                "contentType": "text/json",
                "sample": "{\r\n  \"code\": \"Fatal\",\r\n  \"message\": \"string\",\r\n  \"details\": [\r\n    {\r\n      \"code\": \"Mandatory\",\r\n      \"message\": \"string\",\r\n      \"field\": \"string\"\r\n    }\r\n  ]\r\n}",
                "schemaId": "61b2e1d0ec635c1020b10294",
                "typeName": "Error"
              }
            ]
          },
          {
            "statusCode": 401,
            "description": "Invalid credentials, or user does not have required permissions",
            "headers": [],
            "representations": [
              {
                "contentType": "application/json",
                "sample": "{\r\n  \"code\": \"Fatal\",\r\n  \"message\": \"string\",\r\n  \"details\": [\r\n    {\r\n      \"code\": \"Mandatory\",\r\n      \"message\": \"string\",\r\n      \"field\": \"string\"\r\n    }\r\n  ]\r\n}",
                "schemaId": "61b2e1d0ec635c1020b10294",
                "typeName": "Error"
              },
              {
                "contentType": "text/json",
                "sample": "{\r\n  \"code\": \"Fatal\",\r\n  \"message\": \"string\",\r\n  \"details\": [\r\n    {\r\n      \"code\": \"Mandatory\",\r\n      \"message\": \"string\",\r\n      \"field\": \"string\"\r\n    }\r\n  ]\r\n}",
                "schemaId": "61b2e1d0ec635c1020b10294",
                "typeName": "Error"
              }
            ]
          },
          {
            "statusCode": 500,
            "description": "Unknown error occurred",
            "headers": [],
            "representations": [
              {
                "contentType": "application/json",
                "sample": "{\r\n  \"code\": \"Fatal\",\r\n  \"message\": \"string\",\r\n  \"details\": [\r\n    {\r\n      \"code\": \"Mandatory\",\r\n      \"message\": \"string\",\r\n      \"field\": \"string\"\r\n    }\r\n  ]\r\n}",
                "schemaId": "61b2e1d0ec635c1020b10294",
                "typeName": "Error"
              },
              {
                "contentType": "text/json",
                "sample": "{\r\n  \"code\": \"Fatal\",\r\n  \"message\": \"string\",\r\n  \"details\": [\r\n    {\r\n      \"code\": \"Mandatory\",\r\n      \"message\": \"string\",\r\n      \"field\": \"string\"\r\n    }\r\n  ]\r\n}",
                "schemaId": "61b2e1d0ec635c1020b10294",
                "typeName": "Error"
              }
            ]
          }
        ],
        "displayName": "Attach payment method",
        "method": "PUT",
        "urlTemplate": "/tokens/authkeys/{authkey}/payment-method"
      },
      "name": "[concat(parameters('ApimServiceName'), '/bpoint-api/TokenAuthkey_AttachPaymentMethod')]",
      "type": "Microsoft.ApiManagement/service/apis/operations",
      "apiVersion": "2021-01-01-preview",
      "dependsOn": [
        "[resourceId('Microsoft.ApiManagement/service/apis', parameters('ApimServiceName'), 'bpoint-api')]",
        "[resourceId('Microsoft.ApiManagement/service/apis/schemas', parameters('ApimServiceName'), 'bpoint-api', '61b2e1d0ec635c1020b10294')]"
      ]
    },
    {
      "properties": {
        "value": "<!--\n    IMPORTANT:\n    - Policy elements can appear only within the <inbound>, <outbound>, <backend> section elements.\n    - To apply a policy to the incoming request (before it is forwarded to the backend service), place a corresponding policy element within the <inbound> section element.\n    - To apply a policy to the outgoing response (before it is sent back to the caller), place a corresponding policy element within the <outbound> section element.\n    - To add a policy, place the cursor at the desired insertion point and select a policy from the sidebar.\n    - To remove a policy, delete the corresponding policy statement from the policy document.\n    - Position the <base> element within a section element to inherit all policies from the corresponding section element in the enclosing scope.\n    - Remove the <base> element to prevent inheriting policies from the corresponding section element in the enclosing scope.\n    - Policies are applied in the order of their appearance, from the top down.\n    - Comments within policy elements are not supported and may disappear. Place your comments between policy elements or at a higher level scope.\n-->\r\n<policies>\r\n\t<inbound>\r\n\t\t<base />\r\n\t</inbound>\r\n\t<backend>\r\n\t\t<base />\r\n\t</backend>\r\n\t<outbound>\r\n\t\t<base />\r\n\t</outbound>\r\n\t<on-error>\r\n\t\t<base />\r\n\t</on-error>\r\n</policies>",
        "format": "rawxml"
      },
      "name": "[concat(parameters('ApimServiceName'), '/bpoint-api/TokenAuthkey_AttachPaymentMethod/policy')]",
      "type": "Microsoft.ApiManagement/service/apis/operations/policies",
      "apiVersion": "2021-01-01-preview",
      "dependsOn": [
        "[resourceId('Microsoft.ApiManagement/service/apis/operations', parameters('ApimServiceName'), 'bpoint-api', 'TokenAuthkey_AttachPaymentMethod')]"
      ]
    },
    {
      "properties": {
        "displayName": "TokenAuthkey"
      },
      "name": "[concat(parameters('ApimServiceName'), '/bpoint-api/TokenAuthkey_AttachPaymentMethod/TokenAuthkey')]",
      "type": "Microsoft.ApiManagement/service/apis/operations/tags",
      "apiVersion": "2021-01-01-preview",
      "dependsOn": [
        "[resourceId('Microsoft.ApiManagement/service/apis/operations', parameters('ApimServiceName'), 'bpoint-api', 'TokenAuthkey_AttachPaymentMethod')]"
      ]
    },
    {
      "properties": {
        "templateParameters": [
          {
            "name": "authkey",
            "type": "string",
            "required": true,
            "values": []
          }
        ],
        "description": "Attach payment method",
        "request": {
          "queryParameters": [],
          "headers": [],
          "representations": [
            {
              "contentType": "application/json",
              "sample": "{\r\n  \"card\": {\r\n    \"number\": \"string\",\r\n    \"expiry\": {\r\n      \"month\": \"string\",\r\n      \"year\": \"string\"\r\n    },\r\n    \"name\": \"string\"\r\n  },\r\n  \"bank\": {\r\n    \"bsb\": \"string\",\r\n    \"account\": \"string\",\r\n    \"name\": \"string\"\r\n  }\r\n}",
              "schemaId": "61b2e1d0ec635c1020b10294",
              "typeName": "AttachTokenPaymentMethodRequest"
            },
            {
              "contentType": "text/json",
              "sample": "{\r\n  \"card\": {\r\n    \"number\": \"string\",\r\n    \"expiry\": {\r\n      \"month\": \"string\",\r\n      \"year\": \"string\"\r\n    },\r\n    \"name\": \"string\"\r\n  },\r\n  \"bank\": {\r\n    \"bsb\": \"string\",\r\n    \"account\": \"string\",\r\n    \"name\": \"string\"\r\n  }\r\n}",
              "schemaId": "61b2e1d0ec635c1020b10294",
              "typeName": "AttachTokenPaymentMethodRequest"
            },
            {
              "contentType": "application/x-www-form-urlencoded"
            }
          ]
        },
        "responses": [
          {
            "statusCode": 200,
            "description": "OK",
            "headers": [],
            "representations": [
              {
                "contentType": "application/json",
                "sample": "{\r\n  \"card\": {\r\n    \"number\": \"string\",\r\n    \"expiry\": {\r\n      \"month\": \"string\",\r\n      \"year\": \"string\"\r\n    },\r\n    \"name\": \"string\",\r\n    \"scheme\": \"Amex\",\r\n    \"localisation\": \"Local\",\r\n    \"type\": \"Debit\"\r\n  },\r\n  \"bank\": {\r\n    \"bsb\": \"string\",\r\n    \"account\": \"string\",\r\n    \"name\": \"string\"\r\n  }\r\n}",
                "schemaId": "61b2e1d0ec635c1020b10294",
                "typeName": "ClientTokenPaymentMethod"
              },
              {
                "contentType": "text/json",
                "sample": "{\r\n  \"card\": {\r\n    \"number\": \"string\",\r\n    \"expiry\": {\r\n      \"month\": \"string\",\r\n      \"year\": \"string\"\r\n    },\r\n    \"name\": \"string\",\r\n    \"scheme\": \"Amex\",\r\n    \"localisation\": \"Local\",\r\n    \"type\": \"Debit\"\r\n  },\r\n  \"bank\": {\r\n    \"bsb\": \"string\",\r\n    \"account\": \"string\",\r\n    \"name\": \"string\"\r\n  }\r\n}",
                "schemaId": "61b2e1d0ec635c1020b10294",
                "typeName": "ClientTokenPaymentMethod"
              }
            ]
          },
          {
            "statusCode": 400,
            "description": "Request was invalid",
            "headers": [],
            "representations": [
              {
                "contentType": "application/json",
                "sample": "{\r\n  \"code\": \"Fatal\",\r\n  \"message\": \"string\",\r\n  \"details\": [\r\n    {\r\n      \"code\": \"Mandatory\",\r\n      \"message\": \"string\",\r\n      \"field\": \"string\"\r\n    }\r\n  ]\r\n}",
                "schemaId": "61b2e1d0ec635c1020b10294",
                "typeName": "Error"
              },
              {
                "contentType": "text/json",
                "sample": "{\r\n  \"code\": \"Fatal\",\r\n  \"message\": \"string\",\r\n  \"details\": [\r\n    {\r\n      \"code\": \"Mandatory\",\r\n      \"message\": \"string\",\r\n      \"field\": \"string\"\r\n    }\r\n  ]\r\n}",
                "schemaId": "61b2e1d0ec635c1020b10294",
                "typeName": "Error"
              }
            ]
          },
          {
            "statusCode": 500,
            "description": "Unknown error occurred",
            "headers": [],
            "representations": [
              {
                "contentType": "application/json",
                "sample": "{\r\n  \"code\": \"Fatal\",\r\n  \"message\": \"string\",\r\n  \"details\": [\r\n    {\r\n      \"code\": \"Mandatory\",\r\n      \"message\": \"string\",\r\n      \"field\": \"string\"\r\n    }\r\n  ]\r\n}",
                "schemaId": "61b2e1d0ec635c1020b10294",
                "typeName": "Error"
              },
              {
                "contentType": "text/json",
                "sample": "{\r\n  \"code\": \"Fatal\",\r\n  \"message\": \"string\",\r\n  \"details\": [\r\n    {\r\n      \"code\": \"Mandatory\",\r\n      \"message\": \"string\",\r\n      \"field\": \"string\"\r\n    }\r\n  ]\r\n}",
                "schemaId": "61b2e1d0ec635c1020b10294",
                "typeName": "Error"
              }
            ]
          }
        ],
        "displayName": "Attach payment method",
        "method": "PUT",
        "urlTemplate": "/tokens/authkeys/{authkey}/client/payment-method"
      },
      "name": "[concat(parameters('ApimServiceName'), '/bpoint-api/TokenAuthkeyClient_AttachPaymentMethod')]",
      "type": "Microsoft.ApiManagement/service/apis/operations",
      "apiVersion": "2021-01-01-preview",
      "dependsOn": [
        "[resourceId('Microsoft.ApiManagement/service/apis', parameters('ApimServiceName'), 'bpoint-api')]",
        "[resourceId('Microsoft.ApiManagement/service/apis/schemas', parameters('ApimServiceName'), 'bpoint-api', '61b2e1d0ec635c1020b10294')]"
      ]
    },
    {
      "properties": {
        "value": "<!--\n    IMPORTANT:\n    - Policy elements can appear only within the <inbound>, <outbound>, <backend> section elements.\n    - To apply a policy to the incoming request (before it is forwarded to the backend service), place a corresponding policy element within the <inbound> section element.\n    - To apply a policy to the outgoing response (before it is sent back to the caller), place a corresponding policy element within the <outbound> section element.\n    - To add a policy, place the cursor at the desired insertion point and select a policy from the sidebar.\n    - To remove a policy, delete the corresponding policy statement from the policy document.\n    - Position the <base> element within a section element to inherit all policies from the corresponding section element in the enclosing scope.\n    - Remove the <base> element to prevent inheriting policies from the corresponding section element in the enclosing scope.\n    - Policies are applied in the order of their appearance, from the top down.\n    - Comments within policy elements are not supported and may disappear. Place your comments between policy elements or at a higher level scope.\n-->\r\n<policies>\r\n\t<inbound>\r\n\t\t<base />\r\n\t</inbound>\r\n\t<backend>\r\n\t\t<base />\r\n\t</backend>\r\n\t<outbound>\r\n\t\t<base />\r\n\t</outbound>\r\n\t<on-error>\r\n\t\t<base />\r\n\t</on-error>\r\n</policies>",
        "format": "rawxml"
      },
      "name": "[concat(parameters('ApimServiceName'), '/bpoint-api/TokenAuthkeyClient_AttachPaymentMethod/policy')]",
      "type": "Microsoft.ApiManagement/service/apis/operations/policies",
      "apiVersion": "2021-01-01-preview",
      "dependsOn": [
        "[resourceId('Microsoft.ApiManagement/service/apis/operations', parameters('ApimServiceName'), 'bpoint-api', 'TokenAuthkeyClient_AttachPaymentMethod')]"
      ]
    },
    {
      "properties": {
        "displayName": "TokenAuthkeyClient"
      },
      "name": "[concat(parameters('ApimServiceName'), '/bpoint-api/TokenAuthkeyClient_AttachPaymentMethod/TokenAuthkeyClient')]",
      "type": "Microsoft.ApiManagement/service/apis/operations/tags",
      "apiVersion": "2021-01-01-preview",
      "dependsOn": [
        "[resourceId('Microsoft.ApiManagement/service/apis/operations', parameters('ApimServiceName'), 'bpoint-api', 'TokenAuthkeyClient_AttachPaymentMethod')]"
      ]
    },
    {
      "properties": {
        "templateParameters": [
          {
            "name": "authkey",
            "type": "string",
            "required": true,
            "values": []
          }
        ],
        "description": "Attach payment method",
        "request": {
          "queryParameters": [],
          "headers": [],
          "representations": [
            {
              "contentType": "application/json",
              "sample": "{\r\n  \"card\": {\r\n    \"cvn\": \"string\",\r\n    \"number\": \"string\",\r\n    \"expiry\": {\r\n      \"month\": \"string\",\r\n      \"year\": \"string\"\r\n    },\r\n    \"name\": \"string\"\r\n  }\r\n}",
              "schemaId": "61b2e1d0ec635c1020b10294",
              "typeName": "AttachClientPaymentMethodRequest"
            },
            {
              "contentType": "text/json",
              "sample": "{\r\n  \"card\": {\r\n    \"cvn\": \"string\",\r\n    \"number\": \"string\",\r\n    \"expiry\": {\r\n      \"month\": \"string\",\r\n      \"year\": \"string\"\r\n    },\r\n    \"name\": \"string\"\r\n  }\r\n}",
              "schemaId": "61b2e1d0ec635c1020b10294",
              "typeName": "AttachClientPaymentMethodRequest"
            },
            {
              "contentType": "application/x-www-form-urlencoded"
            }
          ]
        },
        "responses": [
          {
            "statusCode": 200,
            "description": "OK",
            "headers": [],
            "representations": [
              {
                "contentType": "application/json",
                "sample": "{\r\n  \"isToken\": true,\r\n  \"card\": {\r\n    \"number\": \"string\",\r\n    \"expiry\": {\r\n      \"month\": \"string\",\r\n      \"year\": \"string\"\r\n    },\r\n    \"name\": \"string\",\r\n    \"scheme\": \"Amex\",\r\n    \"localisation\": \"Local\",\r\n    \"type\": \"Debit\"\r\n  },\r\n  \"bank\": {\r\n    \"bsb\": \"string\",\r\n    \"account\": \"string\",\r\n    \"name\": \"string\"\r\n  },\r\n  \"accepted\": true,\r\n  \"surcharge\": 0,\r\n  \"provider\": \"Klarna\"\r\n}",
                "schemaId": "61b2e1d0ec635c1020b10294",
                "typeName": "ClientPaymentMethodResponse"
              },
              {
                "contentType": "text/json",
                "sample": "{\r\n  \"isToken\": true,\r\n  \"card\": {\r\n    \"number\": \"string\",\r\n    \"expiry\": {\r\n      \"month\": \"string\",\r\n      \"year\": \"string\"\r\n    },\r\n    \"name\": \"string\",\r\n    \"scheme\": \"Amex\",\r\n    \"localisation\": \"Local\",\r\n    \"type\": \"Debit\"\r\n  },\r\n  \"bank\": {\r\n    \"bsb\": \"string\",\r\n    \"account\": \"string\",\r\n    \"name\": \"string\"\r\n  },\r\n  \"accepted\": true,\r\n  \"surcharge\": 0,\r\n  \"provider\": \"Klarna\"\r\n}",
                "schemaId": "61b2e1d0ec635c1020b10294",
                "typeName": "ClientPaymentMethodResponse"
              }
            ]
          },
          {
            "statusCode": 400,
            "description": "Request was invalid",
            "headers": [],
            "representations": [
              {
                "contentType": "application/json",
                "sample": "{\r\n  \"code\": \"Fatal\",\r\n  \"message\": \"string\",\r\n  \"details\": [\r\n    {\r\n      \"code\": \"Mandatory\",\r\n      \"message\": \"string\",\r\n      \"field\": \"string\"\r\n    }\r\n  ]\r\n}",
                "schemaId": "61b2e1d0ec635c1020b10294",
                "typeName": "Error"
              },
              {
                "contentType": "text/json",
                "sample": "{\r\n  \"code\": \"Fatal\",\r\n  \"message\": \"string\",\r\n  \"details\": [\r\n    {\r\n      \"code\": \"Mandatory\",\r\n      \"message\": \"string\",\r\n      \"field\": \"string\"\r\n    }\r\n  ]\r\n}",
                "schemaId": "61b2e1d0ec635c1020b10294",
                "typeName": "Error"
              }
            ]
          },
          {
            "statusCode": 500,
            "description": "Unknown error occurred",
            "headers": [],
            "representations": [
              {
                "contentType": "application/json",
                "sample": "{\r\n  \"code\": \"Fatal\",\r\n  \"message\": \"string\",\r\n  \"details\": [\r\n    {\r\n      \"code\": \"Mandatory\",\r\n      \"message\": \"string\",\r\n      \"field\": \"string\"\r\n    }\r\n  ]\r\n}",
                "schemaId": "61b2e1d0ec635c1020b10294",
                "typeName": "Error"
              },
              {
                "contentType": "text/json",
                "sample": "{\r\n  \"code\": \"Fatal\",\r\n  \"message\": \"string\",\r\n  \"details\": [\r\n    {\r\n      \"code\": \"Mandatory\",\r\n      \"message\": \"string\",\r\n      \"field\": \"string\"\r\n    }\r\n  ]\r\n}",
                "schemaId": "61b2e1d0ec635c1020b10294",
                "typeName": "Error"
              }
            ]
          }
        ],
        "displayName": "Attach payment method",
        "method": "PUT",
        "urlTemplate": "/txns/authkeys/{authkey}/client/payment-method"
      },
      "name": "[concat(parameters('ApimServiceName'), '/bpoint-api/TxnAuthkeyClient_AttachPaymentMethod')]",
      "type": "Microsoft.ApiManagement/service/apis/operations",
      "apiVersion": "2021-01-01-preview",
      "dependsOn": [
        "[resourceId('Microsoft.ApiManagement/service/apis', parameters('ApimServiceName'), 'bpoint-api')]",
        "[resourceId('Microsoft.ApiManagement/service/apis/schemas', parameters('ApimServiceName'), 'bpoint-api', '61b2e1d0ec635c1020b10294')]"
      ]
    },
    {
      "properties": {
        "displayName": "TxnAuthkeyClient"
      },
      "name": "[concat(parameters('ApimServiceName'), '/bpoint-api/TxnAuthkeyClient_AttachPaymentMethod/TxnAuthkeyClient')]",
      "type": "Microsoft.ApiManagement/service/apis/operations/tags",
      "apiVersion": "2021-01-01-preview",
      "dependsOn": [
        "[resourceId('Microsoft.ApiManagement/service/apis/operations', parameters('ApimServiceName'), 'bpoint-api', 'TxnAuthkeyClient_AttachPaymentMethod')]"
      ]
    },
    {
      "properties": {
        "templateParameters": [
          {
            "name": "authkey",
            "type": "string",
            "required": true,
            "values": []
          }
        ],
        "description": "Note that if your system is passing credit card details, it will be directly in scope for PCI compliance.",
        "request": {
          "queryParameters": [],
          "headers": [],
          "representations": [
            {
              "contentType": "application/json",
              "sample": "{\r\n  \"token\": \"string\",\r\n  \"card\": {\r\n    \"cvn\": \"string\",\r\n    \"number\": \"string\",\r\n    \"expiry\": {\r\n      \"month\": \"string\",\r\n      \"year\": \"string\"\r\n    },\r\n    \"name\": \"string\"\r\n  },\r\n  \"provider\": \"Klarna\"\r\n}",
              "schemaId": "61b2e1d0ec635c1020b10294",
              "typeName": "AttachPaymentMethodRequest"
            },
            {
              "contentType": "text/json",
              "sample": "{\r\n  \"token\": \"string\",\r\n  \"card\": {\r\n    \"cvn\": \"string\",\r\n    \"number\": \"string\",\r\n    \"expiry\": {\r\n      \"month\": \"string\",\r\n      \"year\": \"string\"\r\n    },\r\n    \"name\": \"string\"\r\n  },\r\n  \"provider\": \"Klarna\"\r\n}",
              "schemaId": "61b2e1d0ec635c1020b10294",
              "typeName": "AttachPaymentMethodRequest"
            },
            {
              "contentType": "application/x-www-form-urlencoded"
            }
          ]
        },
        "responses": [
          {
            "statusCode": 200,
            "description": "OK",
            "headers": [],
            "representations": [
              {
                "contentType": "application/json",
                "sample": "{\r\n  \"accepted\": true,\r\n  \"surcharge\": 0,\r\n  \"token\": \"string\",\r\n  \"card\": {\r\n    \"number\": \"string\",\r\n    \"expiry\": {\r\n      \"month\": \"string\",\r\n      \"year\": \"string\"\r\n    },\r\n    \"name\": \"string\",\r\n    \"scheme\": \"Amex\",\r\n    \"localisation\": \"Local\",\r\n    \"type\": \"Debit\"\r\n  },\r\n  \"bank\": {\r\n    \"bsb\": \"string\",\r\n    \"account\": \"string\",\r\n    \"name\": \"string\"\r\n  },\r\n  \"provider\": \"Klarna\"\r\n}",
                "schemaId": "61b2e1d0ec635c1020b10294",
                "typeName": "PaymentMethodResponse"
              },
              {
                "contentType": "text/json",
                "sample": "{\r\n  \"accepted\": true,\r\n  \"surcharge\": 0,\r\n  \"token\": \"string\",\r\n  \"card\": {\r\n    \"number\": \"string\",\r\n    \"expiry\": {\r\n      \"month\": \"string\",\r\n      \"year\": \"string\"\r\n    },\r\n    \"name\": \"string\",\r\n    \"scheme\": \"Amex\",\r\n    \"localisation\": \"Local\",\r\n    \"type\": \"Debit\"\r\n  },\r\n  \"bank\": {\r\n    \"bsb\": \"string\",\r\n    \"account\": \"string\",\r\n    \"name\": \"string\"\r\n  },\r\n  \"provider\": \"Klarna\"\r\n}",
                "schemaId": "61b2e1d0ec635c1020b10294",
                "typeName": "PaymentMethodResponse"
              }
            ]
          },
          {
            "statusCode": 400,
            "description": "Request was invalid",
            "headers": [],
            "representations": [
              {
                "contentType": "application/json",
                "sample": "{\r\n  \"code\": \"Fatal\",\r\n  \"message\": \"string\",\r\n  \"details\": [\r\n    {\r\n      \"code\": \"Mandatory\",\r\n      \"message\": \"string\",\r\n      \"field\": \"string\"\r\n    }\r\n  ]\r\n}",
                "schemaId": "61b2e1d0ec635c1020b10294",
                "typeName": "Error"
              },
              {
                "contentType": "text/json",
                "sample": "{\r\n  \"code\": \"Fatal\",\r\n  \"message\": \"string\",\r\n  \"details\": [\r\n    {\r\n      \"code\": \"Mandatory\",\r\n      \"message\": \"string\",\r\n      \"field\": \"string\"\r\n    }\r\n  ]\r\n}",
                "schemaId": "61b2e1d0ec635c1020b10294",
                "typeName": "Error"
              }
            ]
          },
          {
            "statusCode": 401,
            "description": "Invalid credentials, or user does not have required permissions",
            "headers": [],
            "representations": [
              {
                "contentType": "application/json",
                "sample": "{\r\n  \"code\": \"Fatal\",\r\n  \"message\": \"string\",\r\n  \"details\": [\r\n    {\r\n      \"code\": \"Mandatory\",\r\n      \"message\": \"string\",\r\n      \"field\": \"string\"\r\n    }\r\n  ]\r\n}",
                "schemaId": "61b2e1d0ec635c1020b10294",
                "typeName": "Error"
              },
              {
                "contentType": "text/json",
                "sample": "{\r\n  \"code\": \"Fatal\",\r\n  \"message\": \"string\",\r\n  \"details\": [\r\n    {\r\n      \"code\": \"Mandatory\",\r\n      \"message\": \"string\",\r\n      \"field\": \"string\"\r\n    }\r\n  ]\r\n}",
                "schemaId": "61b2e1d0ec635c1020b10294",
                "typeName": "Error"
              }
            ]
          },
          {
            "statusCode": 500,
            "description": "Unknown error occurred",
            "headers": [],
            "representations": [
              {
                "contentType": "application/json",
                "sample": "{\r\n  \"code\": \"Fatal\",\r\n  \"message\": \"string\",\r\n  \"details\": [\r\n    {\r\n      \"code\": \"Mandatory\",\r\n      \"message\": \"string\",\r\n      \"field\": \"string\"\r\n    }\r\n  ]\r\n}",
                "schemaId": "61b2e1d0ec635c1020b10294",
                "typeName": "Error"
              },
              {
                "contentType": "text/json",
                "sample": "{\r\n  \"code\": \"Fatal\",\r\n  \"message\": \"string\",\r\n  \"details\": [\r\n    {\r\n      \"code\": \"Mandatory\",\r\n      \"message\": \"string\",\r\n      \"field\": \"string\"\r\n    }\r\n  ]\r\n}",
                "schemaId": "61b2e1d0ec635c1020b10294",
                "typeName": "Error"
              }
            ]
          }
        ],
        "displayName": "Attach payment method",
        "method": "PUT",
        "urlTemplate": "/txns/authkeys/{authkey}/payment-method"
      },
      "name": "[concat(parameters('ApimServiceName'), '/bpoint-api/TxnAuthkey_AttachPaymentMethod')]",
      "type": "Microsoft.ApiManagement/service/apis/operations",
      "apiVersion": "2021-01-01-preview",
      "dependsOn": [
        "[resourceId('Microsoft.ApiManagement/service/apis', parameters('ApimServiceName'), 'bpoint-api')]",
        "[resourceId('Microsoft.ApiManagement/service/apis/schemas', parameters('ApimServiceName'), 'bpoint-api', '61b2e1d0ec635c1020b10294')]"
      ]
    },
    {
      "properties": {
        "displayName": "TxnAuthkey"
      },
      "name": "[concat(parameters('ApimServiceName'), '/bpoint-api/TxnAuthkey_AttachPaymentMethod/TxnAuthkey')]",
      "type": "Microsoft.ApiManagement/service/apis/operations/tags",
      "apiVersion": "2021-01-01-preview",
      "dependsOn": [
        "[resourceId('Microsoft.ApiManagement/service/apis/operations', parameters('ApimServiceName'), 'bpoint-api', 'TxnAuthkey_AttachPaymentMethod')]"
      ]
    },
    {
      "properties": {
        "templateParameters": [
          {
            "name": "authkey",
            "type": "string",
            "required": true,
            "values": []
          }
        ],
        "description": "Contact information to be printed on the cardholders' account statements.\r\nStatement Descriptors are for Payment Facilitators only.\r\nThe Statement Descriptors will only be used if you have this feature.\r\nPlease contact the bank if you are a Payment Facilitator and wish to use this feature.\r\nNote, the cardholders' bank may not display all the information on the cardholders' statement.",
        "request": {
          "queryParameters": [],
          "headers": [],
          "representations": [
            {
              "contentType": "application/json",
              "sample": "{\r\n  \"city\": \"string\",\r\n  \"companyName\": \"string\",\r\n  \"countryCode\": \"string\",\r\n  \"postcode\": \"string\",\r\n  \"state\": \"string\",\r\n  \"addressLine1\": \"string\",\r\n  \"addressLine2\": \"string\",\r\n  \"merchantName\": \"string\",\r\n  \"phoneNumber\": \"string\"\r\n}",
              "schemaId": "61b2e1d0ec635c1020b10294",
              "typeName": "StatementDescriptor"
            },
            {
              "contentType": "text/json",
              "sample": "{\r\n  \"city\": \"string\",\r\n  \"companyName\": \"string\",\r\n  \"countryCode\": \"string\",\r\n  \"postcode\": \"string\",\r\n  \"state\": \"string\",\r\n  \"addressLine1\": \"string\",\r\n  \"addressLine2\": \"string\",\r\n  \"merchantName\": \"string\",\r\n  \"phoneNumber\": \"string\"\r\n}",
              "schemaId": "61b2e1d0ec635c1020b10294",
              "typeName": "StatementDescriptor"
            },
            {
              "contentType": "application/x-www-form-urlencoded"
            }
          ]
        },
        "responses": [
          {
            "statusCode": 201,
            "description": "Successful",
            "headers": [],
            "representations": []
          },
          {
            "statusCode": 400,
            "description": "Request was invalid",
            "headers": [],
            "representations": []
          },
          {
            "statusCode": 401,
            "description": "Invalid credentials, or user does not have required permissions",
            "headers": [],
            "representations": []
          },
          {
            "statusCode": 500,
            "description": "Unknown error occurred",
            "headers": [],
            "representations": []
          }
        ],
        "displayName": "Attach statement descriptor",
        "method": "PUT",
        "urlTemplate": "/txns/authkeys/{authkey}/statement-descriptor"
      },
      "name": "[concat(parameters('ApimServiceName'), '/bpoint-api/TxnAuthkey_AttachStatementDescriptor')]",
      "type": "Microsoft.ApiManagement/service/apis/operations",
      "apiVersion": "2021-01-01-preview",
      "dependsOn": [
        "[resourceId('Microsoft.ApiManagement/service/apis', parameters('ApimServiceName'), 'bpoint-api')]",
        "[resourceId('Microsoft.ApiManagement/service/apis/schemas', parameters('ApimServiceName'), 'bpoint-api', '61b2e1d0ec635c1020b10294')]"
      ]
    },
    {
      "properties": {
        "displayName": "TxnAuthkey"
      },
      "name": "[concat(parameters('ApimServiceName'), '/bpoint-api/TxnAuthkey_AttachStatementDescriptor/TxnAuthkey')]",
      "type": "Microsoft.ApiManagement/service/apis/operations/tags",
      "apiVersion": "2021-01-01-preview",
      "dependsOn": [
        "[resourceId('Microsoft.ApiManagement/service/apis/operations', parameters('ApimServiceName'), 'bpoint-api', 'TxnAuthkey_AttachStatementDescriptor')]"
      ]
    },
    {
      "properties": {
        "templateParameters": [
          {
            "name": "authkey",
            "type": "string",
            "required": true,
            "values": []
          }
        ],
        "description": "Attach token details",
        "request": {
          "queryParameters": [],
          "headers": [],
          "representations": [
            {
              "contentType": "application/json",
              "sample": "{\r\n  \"crn1\": \"string\",\r\n  \"crn2\": \"string\",\r\n  \"crn3\": \"string\",\r\n  \"emailAddress\": \"string\"\r\n}",
              "schemaId": "61b2e1d0ec635c1020b10294",
              "typeName": "TokenDetailsRequest"
            },
            {
              "contentType": "text/json",
              "sample": "{\r\n  \"crn1\": \"string\",\r\n  \"crn2\": \"string\",\r\n  \"crn3\": \"string\",\r\n  \"emailAddress\": \"string\"\r\n}",
              "schemaId": "61b2e1d0ec635c1020b10294",
              "typeName": "TokenDetailsRequest"
            },
            {
              "contentType": "application/x-www-form-urlencoded"
            }
          ]
        },
        "responses": [
          {
            "statusCode": 201,
            "description": "Successful",
            "headers": [],
            "representations": []
          },
          {
            "statusCode": 400,
            "description": "Request was invalid",
            "headers": [],
            "representations": []
          },
          {
            "statusCode": 401,
            "description": "Invalid credentials, or user does not have required permissions",
            "headers": [],
            "representations": []
          },
          {
            "statusCode": 500,
            "description": "Unknown error occurred",
            "headers": [],
            "representations": []
          }
        ],
        "displayName": "Attach token details",
        "method": "PUT",
        "urlTemplate": "/tokens/authkeys/{authkey}/token-details"
      },
      "name": "[concat(parameters('ApimServiceName'), '/bpoint-api/TokenAuthkey_AttachTokenDetails')]",
      "type": "Microsoft.ApiManagement/service/apis/operations",
      "apiVersion": "2021-01-01-preview",
      "dependsOn": [
        "[resourceId('Microsoft.ApiManagement/service/apis', parameters('ApimServiceName'), 'bpoint-api')]",
        "[resourceId('Microsoft.ApiManagement/service/apis/schemas', parameters('ApimServiceName'), 'bpoint-api', '61b2e1d0ec635c1020b10294')]"
      ]
    },
    {
      "properties": {
        "value": "<!--\n    IMPORTANT:\n    - Policy elements can appear only within the <inbound>, <outbound>, <backend> section elements.\n    - To apply a policy to the incoming request (before it is forwarded to the backend service), place a corresponding policy element within the <inbound> section element.\n    - To apply a policy to the outgoing response (before it is sent back to the caller), place a corresponding policy element within the <outbound> section element.\n    - To add a policy, place the cursor at the desired insertion point and select a policy from the sidebar.\n    - To remove a policy, delete the corresponding policy statement from the policy document.\n    - Position the <base> element within a section element to inherit all policies from the corresponding section element in the enclosing scope.\n    - Remove the <base> element to prevent inheriting policies from the corresponding section element in the enclosing scope.\n    - Policies are applied in the order of their appearance, from the top down.\n    - Comments within policy elements are not supported and may disappear. Place your comments between policy elements or at a higher level scope.\n-->\r\n<policies>\r\n\t<inbound>\r\n\t\t<base />\r\n\t</inbound>\r\n\t<backend>\r\n\t\t<base />\r\n\t</backend>\r\n\t<outbound>\r\n\t\t<base />\r\n\t</outbound>\r\n\t<on-error>\r\n\t\t<base />\r\n\t</on-error>\r\n</policies>",
        "format": "rawxml"
      },
      "name": "[concat(parameters('ApimServiceName'), '/bpoint-api/TokenAuthkey_AttachTokenDetails/policy')]",
      "type": "Microsoft.ApiManagement/service/apis/operations/policies",
      "apiVersion": "2021-01-01-preview",
      "dependsOn": [
        "[resourceId('Microsoft.ApiManagement/service/apis/operations', parameters('ApimServiceName'), 'bpoint-api', 'TokenAuthkey_AttachTokenDetails')]"
      ]
    },
    {
      "properties": {
        "displayName": "TokenAuthkey"
      },
      "name": "[concat(parameters('ApimServiceName'), '/bpoint-api/TokenAuthkey_AttachTokenDetails/TokenAuthkey')]",
      "type": "Microsoft.ApiManagement/service/apis/operations/tags",
      "apiVersion": "2021-01-01-preview",
      "dependsOn": [
        "[resourceId('Microsoft.ApiManagement/service/apis/operations', parameters('ApimServiceName'), 'bpoint-api', 'TokenAuthkey_AttachTokenDetails')]"
      ]
    },
    {
      "properties": {
        "templateParameters": [
          {
            "name": "authkey",
            "type": "string",
            "required": true,
            "values": []
          }
        ],
        "description": "Attach txn details",
        "request": {
          "queryParameters": [],
          "headers": [],
          "representations": [
            {
              "contentType": "application/json",
              "sample": "{\r\n  \"action\": \"Payment\",\r\n  \"type\": \"Internet\",\r\n  \"subType\": \"Single\",\r\n  \"amount\": 100,\r\n  \"billerCode\": \"string\",\r\n  \"crn1\": \"string\",\r\n  \"crn2\": \"string\",\r\n  \"crn3\": \"string\",\r\n  \"merchantReference\": \"string\",\r\n  \"currency\": \"AUD\",\r\n  \"bypass3ds\": false,\r\n  \"tokenisationMode\": \"Default\",\r\n  \"emailAddress\": \"example@email.com\",\r\n  \"storeCard\": true,\r\n  \"testMode\": true\r\n}",
              "schemaId": "61b2e1d0ec635c1020b10294",
              "typeName": "TxnDetailsRequest"
            },
            {
              "contentType": "text/json",
              "sample": "{\r\n  \"action\": \"Payment\",\r\n  \"type\": \"Internet\",\r\n  \"subType\": \"Single\",\r\n  \"amount\": 100,\r\n  \"billerCode\": \"string\",\r\n  \"crn1\": \"string\",\r\n  \"crn2\": \"string\",\r\n  \"crn3\": \"string\",\r\n  \"merchantReference\": \"string\",\r\n  \"currency\": \"AUD\",\r\n  \"bypass3ds\": false,\r\n  \"tokenisationMode\": \"Default\",\r\n  \"emailAddress\": \"example@email.com\",\r\n  \"storeCard\": true,\r\n  \"testMode\": true\r\n}",
              "schemaId": "61b2e1d0ec635c1020b10294",
              "typeName": "TxnDetailsRequest"
            },
            {
              "contentType": "application/x-www-form-urlencoded"
            }
          ]
        },
        "responses": [
          {
            "statusCode": 201,
            "description": "Successful",
            "headers": [],
            "representations": []
          },
          {
            "statusCode": 400,
            "description": "Request was invalid",
            "headers": [],
            "representations": []
          },
          {
            "statusCode": 401,
            "description": "Invalid credentials, or user does not have required permissions",
            "headers": [],
            "representations": []
          },
          {
            "statusCode": 500,
            "description": "Unknown error occurred",
            "headers": [],
            "representations": []
          }
        ],
        "displayName": "Attach txn details",
        "method": "PUT",
        "urlTemplate": "/txns/authkeys/{authkey}/txn-details"
      },
      "name": "[concat(parameters('ApimServiceName'), '/bpoint-api/TxnAuthkey_AttachTxnDetails')]",
      "type": "Microsoft.ApiManagement/service/apis/operations",
      "apiVersion": "2021-01-01-preview",
      "dependsOn": [
        "[resourceId('Microsoft.ApiManagement/service/apis', parameters('ApimServiceName'), 'bpoint-api')]",
        "[resourceId('Microsoft.ApiManagement/service/apis/schemas', parameters('ApimServiceName'), 'bpoint-api', '61b2e1d0ec635c1020b10294')]"
      ]
    },
    {
      "properties": {
        "value": "<!--\n    IMPORTANT:\n    - Policy elements can appear only within the <inbound>, <outbound>, <backend> section elements.\n    - To apply a policy to the incoming request (before it is forwarded to the backend service), place a corresponding policy element within the <inbound> section element.\n    - To apply a policy to the outgoing response (before it is sent back to the caller), place a corresponding policy element within the <outbound> section element.\n    - To add a policy, place the cursor at the desired insertion point and select a policy from the sidebar.\n    - To remove a policy, delete the corresponding policy statement from the policy document.\n    - Position the <base> element within a section element to inherit all policies from the corresponding section element in the enclosing scope.\n    - Remove the <base> element to prevent inheriting policies from the corresponding section element in the enclosing scope.\n    - Policies are applied in the order of their appearance, from the top down.\n    - Comments within policy elements are not supported and may disappear. Place your comments between policy elements or at a higher level scope.\n-->\r\n<policies>\r\n\t<inbound>\r\n\t\t<base />\r\n\t\t<set-body>@{\n            JObject jsonBody = context.Request.Body.As<JObject>();\n\n            jsonBody.Add(\"billerCode\",{{bpoint-billercode}});\n\n            return jsonBody.ToString(Newtonsoft.Json.Formatting.None);\n        }</set-body>\r\n\t</inbound>\r\n\t<backend>\r\n\t\t<base />\r\n\t</backend>\r\n\t<outbound>\r\n\t\t<base />\r\n\t</outbound>\r\n\t<on-error>\r\n\t\t<base />\r\n\t</on-error>\r\n</policies>",
        "format": "rawxml"
      },
      "name": "[concat(parameters('ApimServiceName'), '/bpoint-api/TxnAuthkey_AttachTxnDetails/policy')]",
      "type": "Microsoft.ApiManagement/service/apis/operations/policies",
      "apiVersion": "2021-01-01-preview",
      "dependsOn": [
        "[resourceId('Microsoft.ApiManagement/service/apis/operations', parameters('ApimServiceName'), 'bpoint-api', 'TxnAuthkey_AttachTxnDetails')]"
      ]
    },
    {
      "properties": {
        "displayName": "TxnAuthkey"
      },
      "name": "[concat(parameters('ApimServiceName'), '/bpoint-api/TxnAuthkey_AttachTxnDetails/TxnAuthkey')]",
      "type": "Microsoft.ApiManagement/service/apis/operations/tags",
      "apiVersion": "2021-01-01-preview",
      "dependsOn": [
        "[resourceId('Microsoft.ApiManagement/service/apis/operations', parameters('ApimServiceName'), 'bpoint-api', 'TxnAuthkey_AttachTxnDetails')]"
      ]
    },
    {
      "properties": {
        "templateParameters": [],
        "description": "When 'token' is not supplied, authkey will create a new token.\r\nWhen 'token' is supplied, authkey will update the existing token.",
        "request": {
          "queryParameters": [],
          "headers": [],
          "representations": [
            {
              "contentType": "application/x-www-form-urlencoded"
            },
            {
              "contentType": "application/json",
              "sample": "{}",
              "schemaId": "61b2e1d0ec635c1020b10294",
              "typeName": "default_Authkey"
            }
          ]
        },
        "responses": [
          {
            "statusCode": 201,
            "description": "Successful",
            "headers": [],
            "representations": [
              {
                "contentType": "application/json",
                "sample": "{\r\n  \"authkey\": \"string\"\r\n}",
                "schemaId": "61b2e1d0ec635c1020b10294",
                "typeName": "CreateAuthkeyResponse"
              },
              {
                "contentType": "text/json",
                "sample": "{\r\n  \"authkey\": \"string\"\r\n}",
                "schemaId": "61b2e1d0ec635c1020b10294",
                "typeName": "CreateAuthkeyResponse"
              }
            ]
          },
          {
            "statusCode": 400,
            "description": "Request was invalid",
            "headers": [],
            "representations": [
              {
                "contentType": "application/json",
                "sample": "{\r\n  \"code\": \"Fatal\",\r\n  \"message\": \"string\",\r\n  \"details\": [\r\n    {\r\n      \"code\": \"Mandatory\",\r\n      \"message\": \"string\",\r\n      \"field\": \"string\"\r\n    }\r\n  ]\r\n}",
                "schemaId": "61b2e1d0ec635c1020b10294",
                "typeName": "Error"
              },
              {
                "contentType": "text/json",
                "sample": "{\r\n  \"code\": \"Fatal\",\r\n  \"message\": \"string\",\r\n  \"details\": [\r\n    {\r\n      \"code\": \"Mandatory\",\r\n      \"message\": \"string\",\r\n      \"field\": \"string\"\r\n    }\r\n  ]\r\n}",
                "schemaId": "61b2e1d0ec635c1020b10294",
                "typeName": "Error"
              }
            ]
          },
          {
            "statusCode": 401,
            "description": "Invalid credentials, or user does not have required permissions",
            "headers": [],
            "representations": [
              {
                "contentType": "application/json",
                "sample": "{\r\n  \"code\": \"Fatal\",\r\n  \"message\": \"string\",\r\n  \"details\": [\r\n    {\r\n      \"code\": \"Mandatory\",\r\n      \"message\": \"string\",\r\n      \"field\": \"string\"\r\n    }\r\n  ]\r\n}",
                "schemaId": "61b2e1d0ec635c1020b10294",
                "typeName": "Error"
              },
              {
                "contentType": "text/json",
                "sample": "{\r\n  \"code\": \"Fatal\",\r\n  \"message\": \"string\",\r\n  \"details\": [\r\n    {\r\n      \"code\": \"Mandatory\",\r\n      \"message\": \"string\",\r\n      \"field\": \"string\"\r\n    }\r\n  ]\r\n}",
                "schemaId": "61b2e1d0ec635c1020b10294",
                "typeName": "Error"
              }
            ]
          },
          {
            "statusCode": 500,
            "description": "Unknown error occurred",
            "headers": [],
            "representations": [
              {
                "contentType": "application/json",
                "sample": "{\r\n  \"code\": \"Fatal\",\r\n  \"message\": \"string\",\r\n  \"details\": [\r\n    {\r\n      \"code\": \"Mandatory\",\r\n      \"message\": \"string\",\r\n      \"field\": \"string\"\r\n    }\r\n  ]\r\n}",
                "schemaId": "61b2e1d0ec635c1020b10294",
                "typeName": "Error"
              },
              {
                "contentType": "text/json",
                "sample": "{\r\n  \"code\": \"Fatal\",\r\n  \"message\": \"string\",\r\n  \"details\": [\r\n    {\r\n      \"code\": \"Mandatory\",\r\n      \"message\": \"string\",\r\n      \"field\": \"string\"\r\n    }\r\n  ]\r\n}",
                "schemaId": "61b2e1d0ec635c1020b10294",
                "typeName": "Error"
              }
            ]
          }
        ],
        "displayName": "Create a token authkey",
        "method": "POST",
        "urlTemplate": "/tokens/authkeys"
      },
      "name": "[concat(parameters('ApimServiceName'), '/bpoint-api/TokenAuthkey_CreateAuthkey')]",
      "type": "Microsoft.ApiManagement/service/apis/operations",
      "apiVersion": "2021-01-01-preview",
      "dependsOn": [
        "[resourceId('Microsoft.ApiManagement/service/apis', parameters('ApimServiceName'), 'bpoint-api')]",
        "[resourceId('Microsoft.ApiManagement/service/apis/schemas', parameters('ApimServiceName'), 'bpoint-api', '61b2e1d0ec635c1020b10294')]"
      ]
    },
    {
      "properties": {
        "value": "<!--\n    IMPORTANT:\n    - Policy elements can appear only within the <inbound>, <outbound>, <backend> section elements.\n    - To apply a policy to the incoming request (before it is forwarded to the backend service), place a corresponding policy element within the <inbound> section element.\n    - To apply a policy to the outgoing response (before it is sent back to the caller), place a corresponding policy element within the <outbound> section element.\n    - To add a policy, place the cursor at the desired insertion point and select a policy from the sidebar.\n    - To remove a policy, delete the corresponding policy statement from the policy document.\n    - Position the <base> element within a section element to inherit all policies from the corresponding section element in the enclosing scope.\n    - Remove the <base> element to prevent inheriting policies from the corresponding section element in the enclosing scope.\n    - Policies are applied in the order of their appearance, from the top down.\n    - Comments within policy elements are not supported and may disappear. Place your comments between policy elements or at a higher level scope.\n-->\r\n<policies>\r\n\t<inbound>\r\n\t\t<base />\r\n\t</inbound>\r\n\t<backend>\r\n\t\t<base />\r\n\t</backend>\r\n\t<outbound>\r\n\t\t<base />\r\n\t</outbound>\r\n\t<on-error>\r\n\t\t<base />\r\n\t</on-error>\r\n</policies>",
        "format": "rawxml"
      },
      "name": "[concat(parameters('ApimServiceName'), '/bpoint-api/TokenAuthkey_CreateAuthkey/policy')]",
      "type": "Microsoft.ApiManagement/service/apis/operations/policies",
      "apiVersion": "2021-01-01-preview",
      "dependsOn": [
        "[resourceId('Microsoft.ApiManagement/service/apis/operations', parameters('ApimServiceName'), 'bpoint-api', 'TokenAuthkey_CreateAuthkey')]"
      ]
    },
    {
      "properties": {
        "displayName": "TokenAuthkey"
      },
      "name": "[concat(parameters('ApimServiceName'), '/bpoint-api/TokenAuthkey_CreateAuthkey/TokenAuthkey')]",
      "type": "Microsoft.ApiManagement/service/apis/operations/tags",
      "apiVersion": "2021-01-01-preview",
      "dependsOn": [
        "[resourceId('Microsoft.ApiManagement/service/apis/operations', parameters('ApimServiceName'), 'bpoint-api', 'TokenAuthkey_CreateAuthkey')]"
      ]
    },
    {
      "properties": {
        "templateParameters": [],
        "description": "Create a transaction authkey",
        "request": {
          "queryParameters": [],
          "headers": [],
          "representations": []
        },
        "responses": [
          {
            "statusCode": 201,
            "description": "Successful",
            "headers": [],
            "representations": [
              {
                "contentType": "application/json",
                "sample": "{\r\n  \"authkey\": \"string\"\r\n}",
                "schemaId": "61b2e1d0ec635c1020b10294",
                "typeName": "CreateAuthkeyResponse"
              },
              {
                "contentType": "text/json",
                "sample": "{\r\n  \"authkey\": \"string\"\r\n}",
                "schemaId": "61b2e1d0ec635c1020b10294",
                "typeName": "CreateAuthkeyResponse"
              }
            ]
          },
          {
            "statusCode": 400,
            "description": "Request was invalid",
            "headers": [],
            "representations": [
              {
                "contentType": "application/json",
                "sample": "{\r\n  \"code\": \"Fatal\",\r\n  \"message\": \"string\",\r\n  \"details\": [\r\n    {\r\n      \"code\": \"Mandatory\",\r\n      \"message\": \"string\",\r\n      \"field\": \"string\"\r\n    }\r\n  ]\r\n}",
                "schemaId": "61b2e1d0ec635c1020b10294",
                "typeName": "Error"
              },
              {
                "contentType": "text/json",
                "sample": "{\r\n  \"code\": \"Fatal\",\r\n  \"message\": \"string\",\r\n  \"details\": [\r\n    {\r\n      \"code\": \"Mandatory\",\r\n      \"message\": \"string\",\r\n      \"field\": \"string\"\r\n    }\r\n  ]\r\n}",
                "schemaId": "61b2e1d0ec635c1020b10294",
                "typeName": "Error"
              }
            ]
          },
          {
            "statusCode": 401,
            "description": "Invalid credentials, or user does not have required permissions",
            "headers": [],
            "representations": [
              {
                "contentType": "application/json",
                "sample": "{\r\n  \"code\": \"Fatal\",\r\n  \"message\": \"string\",\r\n  \"details\": [\r\n    {\r\n      \"code\": \"Mandatory\",\r\n      \"message\": \"string\",\r\n      \"field\": \"string\"\r\n    }\r\n  ]\r\n}",
                "schemaId": "61b2e1d0ec635c1020b10294",
                "typeName": "Error"
              },
              {
                "contentType": "text/json",
                "sample": "{\r\n  \"code\": \"Fatal\",\r\n  \"message\": \"string\",\r\n  \"details\": [\r\n    {\r\n      \"code\": \"Mandatory\",\r\n      \"message\": \"string\",\r\n      \"field\": \"string\"\r\n    }\r\n  ]\r\n}",
                "schemaId": "61b2e1d0ec635c1020b10294",
                "typeName": "Error"
              }
            ]
          },
          {
            "statusCode": 500,
            "description": "Unknown error occurred",
            "headers": [],
            "representations": [
              {
                "contentType": "application/json",
                "sample": "{\r\n  \"code\": \"Fatal\",\r\n  \"message\": \"string\",\r\n  \"details\": [\r\n    {\r\n      \"code\": \"Mandatory\",\r\n      \"message\": \"string\",\r\n      \"field\": \"string\"\r\n    }\r\n  ]\r\n}",
                "schemaId": "61b2e1d0ec635c1020b10294",
                "typeName": "Error"
              },
              {
                "contentType": "text/json",
                "sample": "{\r\n  \"code\": \"Fatal\",\r\n  \"message\": \"string\",\r\n  \"details\": [\r\n    {\r\n      \"code\": \"Mandatory\",\r\n      \"message\": \"string\",\r\n      \"field\": \"string\"\r\n    }\r\n  ]\r\n}",
                "schemaId": "61b2e1d0ec635c1020b10294",
                "typeName": "Error"
              }
            ]
          }
        ],
        "displayName": "Create a transaction authkey",
        "method": "POST",
        "urlTemplate": "/txns/authkeys"
      },
      "name": "[concat(parameters('ApimServiceName'), '/bpoint-api/TxnAuthkey_CreateAuthkey')]",
      "type": "Microsoft.ApiManagement/service/apis/operations",
      "apiVersion": "2021-01-01-preview",
      "dependsOn": [
        "[resourceId('Microsoft.ApiManagement/service/apis', parameters('ApimServiceName'), 'bpoint-api')]",
        "[resourceId('Microsoft.ApiManagement/service/apis/schemas', parameters('ApimServiceName'), 'bpoint-api', '61b2e1d0ec635c1020b10294')]"
      ]
    },
    {
      "properties": {
        "displayName": "TxnAuthkey"
      },
      "name": "[concat(parameters('ApimServiceName'), '/bpoint-api/TxnAuthkey_CreateAuthkey/TxnAuthkey')]",
      "type": "Microsoft.ApiManagement/service/apis/operations/tags",
      "apiVersion": "2021-01-01-preview",
      "dependsOn": [
        "[resourceId('Microsoft.ApiManagement/service/apis/operations', parameters('ApimServiceName'), 'bpoint-api', 'TxnAuthkey_CreateAuthkey')]"
      ]
    },
    {
      "properties": {
        "templateParameters": [
          {
            "name": "authkey",
            "type": "string",
            "required": true,
            "values": []
          }
        ],
        "description": "Get authentication result",
        "request": {
          "queryParameters": [],
          "headers": [],
          "representations": []
        },
        "responses": [
          {
            "statusCode": 200,
            "description": "OK",
            "headers": [],
            "representations": [
              {
                "contentType": "application/json",
                "sample": "{\r\n  \"status\": \"InProgress\"\r\n}",
                "schemaId": "61b2e1d0ec635c1020b10294",
                "typeName": "Authentication"
              },
              {
                "contentType": "text/json",
                "sample": "{\r\n  \"status\": \"InProgress\"\r\n}",
                "schemaId": "61b2e1d0ec635c1020b10294",
                "typeName": "Authentication"
              }
            ]
          },
          {
            "statusCode": 400,
            "description": "Request was invalid",
            "headers": [],
            "representations": [
              {
                "contentType": "application/json",
                "sample": "{\r\n  \"code\": \"Fatal\",\r\n  \"message\": \"string\",\r\n  \"details\": [\r\n    {\r\n      \"code\": \"Mandatory\",\r\n      \"message\": \"string\",\r\n      \"field\": \"string\"\r\n    }\r\n  ]\r\n}",
                "schemaId": "61b2e1d0ec635c1020b10294",
                "typeName": "Error"
              },
              {
                "contentType": "text/json",
                "sample": "{\r\n  \"code\": \"Fatal\",\r\n  \"message\": \"string\",\r\n  \"details\": [\r\n    {\r\n      \"code\": \"Mandatory\",\r\n      \"message\": \"string\",\r\n      \"field\": \"string\"\r\n    }\r\n  ]\r\n}",
                "schemaId": "61b2e1d0ec635c1020b10294",
                "typeName": "Error"
              }
            ]
          },
          {
            "statusCode": 401,
            "description": "Invalid credentials, or user does not have required permissions",
            "headers": [],
            "representations": [
              {
                "contentType": "application/json",
                "sample": "{\r\n  \"code\": \"Fatal\",\r\n  \"message\": \"string\",\r\n  \"details\": [\r\n    {\r\n      \"code\": \"Mandatory\",\r\n      \"message\": \"string\",\r\n      \"field\": \"string\"\r\n    }\r\n  ]\r\n}",
                "schemaId": "61b2e1d0ec635c1020b10294",
                "typeName": "Error"
              },
              {
                "contentType": "text/json",
                "sample": "{\r\n  \"code\": \"Fatal\",\r\n  \"message\": \"string\",\r\n  \"details\": [\r\n    {\r\n      \"code\": \"Mandatory\",\r\n      \"message\": \"string\",\r\n      \"field\": \"string\"\r\n    }\r\n  ]\r\n}",
                "schemaId": "61b2e1d0ec635c1020b10294",
                "typeName": "Error"
              }
            ]
          },
          {
            "statusCode": 500,
            "description": "Unknown error occurred",
            "headers": [],
            "representations": [
              {
                "contentType": "application/json",
                "sample": "{\r\n  \"code\": \"Fatal\",\r\n  \"message\": \"string\",\r\n  \"details\": [\r\n    {\r\n      \"code\": \"Mandatory\",\r\n      \"message\": \"string\",\r\n      \"field\": \"string\"\r\n    }\r\n  ]\r\n}",
                "schemaId": "61b2e1d0ec635c1020b10294",
                "typeName": "Error"
              },
              {
                "contentType": "text/json",
                "sample": "{\r\n  \"code\": \"Fatal\",\r\n  \"message\": \"string\",\r\n  \"details\": [\r\n    {\r\n      \"code\": \"Mandatory\",\r\n      \"message\": \"string\",\r\n      \"field\": \"string\"\r\n    }\r\n  ]\r\n}",
                "schemaId": "61b2e1d0ec635c1020b10294",
                "typeName": "Error"
              }
            ]
          }
        ],
        "displayName": "Get authentication result",
        "method": "GET",
        "urlTemplate": "/txns/authkeys/{authkey}/authentication"
      },
      "name": "[concat(parameters('ApimServiceName'), '/bpoint-api/TxnAuthkey_GetAuthentication')]",
      "type": "Microsoft.ApiManagement/service/apis/operations",
      "apiVersion": "2021-01-01-preview",
      "dependsOn": [
        "[resourceId('Microsoft.ApiManagement/service/apis', parameters('ApimServiceName'), 'bpoint-api')]",
        "[resourceId('Microsoft.ApiManagement/service/apis/schemas', parameters('ApimServiceName'), 'bpoint-api', '61b2e1d0ec635c1020b10294')]"
      ]
    },
    {
      "properties": {
        "displayName": "TxnAuthkey"
      },
      "name": "[concat(parameters('ApimServiceName'), '/bpoint-api/TxnAuthkey_GetAuthentication/TxnAuthkey')]",
      "type": "Microsoft.ApiManagement/service/apis/operations/tags",
      "apiVersion": "2021-01-01-preview",
      "dependsOn": [
        "[resourceId('Microsoft.ApiManagement/service/apis/operations', parameters('ApimServiceName'), 'bpoint-api', 'TxnAuthkey_GetAuthentication')]"
      ]
    },
    {
      "properties": {
        "templateParameters": [
          {
            "name": "billerCode",
            "type": "string",
            "required": true,
            "values": []
          }
        ],
        "description": "Get biller payment rules",
        "request": {
          "queryParameters": [],
          "headers": [],
          "representations": []
        },
        "responses": [
          {
            "statusCode": 200,
            "description": "OK",
            "headers": [],
            "representations": [
              {
                "contentType": "application/json",
                "sample": "{\r\n  \"amountLimits\": {\r\n    \"minimum\": 0,\r\n    \"maximum\": 0\r\n  },\r\n  \"acceptedCards\": [\r\n    \"Unspecified\"\r\n  ],\r\n  \"surchargeRules\": [\r\n    {\r\n      \"scheme\": \"Amex\",\r\n      \"type\": \"Debit\",\r\n      \"localisation\": \"Local\",\r\n      \"fixedAmount\": 0,\r\n      \"percent\": 0.0,\r\n      \"limits\": {\r\n        \"minimum\": 0,\r\n        \"maximum\": 0\r\n      }\r\n    }\r\n  ],\r\n  \"acceptedPaymentMethodProviders\": [\r\n    \"Unspecified\"\r\n  ]\r\n}",
                "schemaId": "61b2e1d0ec635c1020b10294",
                "typeName": "PaymentRules"
              },
              {
                "contentType": "text/json",
                "sample": "{\r\n  \"amountLimits\": {\r\n    \"minimum\": 0,\r\n    \"maximum\": 0\r\n  },\r\n  \"acceptedCards\": [\r\n    \"Unspecified\"\r\n  ],\r\n  \"surchargeRules\": [\r\n    {\r\n      \"scheme\": \"Amex\",\r\n      \"type\": \"Debit\",\r\n      \"localisation\": \"Local\",\r\n      \"fixedAmount\": 0,\r\n      \"percent\": 0.0,\r\n      \"limits\": {\r\n        \"minimum\": 0,\r\n        \"maximum\": 0\r\n      }\r\n    }\r\n  ],\r\n  \"acceptedPaymentMethodProviders\": [\r\n    \"Unspecified\"\r\n  ]\r\n}",
                "schemaId": "61b2e1d0ec635c1020b10294",
                "typeName": "PaymentRules"
              }
            ]
          },
          {
            "statusCode": 400,
            "description": "Request was invalid",
            "headers": [],
            "representations": [
              {
                "contentType": "application/json",
                "sample": "{\r\n  \"code\": \"Fatal\",\r\n  \"message\": \"string\",\r\n  \"details\": [\r\n    {\r\n      \"code\": \"Mandatory\",\r\n      \"message\": \"string\",\r\n      \"field\": \"string\"\r\n    }\r\n  ]\r\n}",
                "schemaId": "61b2e1d0ec635c1020b10294",
                "typeName": "Error"
              },
              {
                "contentType": "text/json",
                "sample": "{\r\n  \"code\": \"Fatal\",\r\n  \"message\": \"string\",\r\n  \"details\": [\r\n    {\r\n      \"code\": \"Mandatory\",\r\n      \"message\": \"string\",\r\n      \"field\": \"string\"\r\n    }\r\n  ]\r\n}",
                "schemaId": "61b2e1d0ec635c1020b10294",
                "typeName": "Error"
              }
            ]
          },
          {
            "statusCode": 401,
            "description": "Invalid credentials, or user does not have required permissions",
            "headers": [],
            "representations": [
              {
                "contentType": "application/json",
                "sample": "{\r\n  \"code\": \"Fatal\",\r\n  \"message\": \"string\",\r\n  \"details\": [\r\n    {\r\n      \"code\": \"Mandatory\",\r\n      \"message\": \"string\",\r\n      \"field\": \"string\"\r\n    }\r\n  ]\r\n}",
                "schemaId": "61b2e1d0ec635c1020b10294",
                "typeName": "Error"
              },
              {
                "contentType": "text/json",
                "sample": "{\r\n  \"code\": \"Fatal\",\r\n  \"message\": \"string\",\r\n  \"details\": [\r\n    {\r\n      \"code\": \"Mandatory\",\r\n      \"message\": \"string\",\r\n      \"field\": \"string\"\r\n    }\r\n  ]\r\n}",
                "schemaId": "61b2e1d0ec635c1020b10294",
                "typeName": "Error"
              }
            ]
          },
          {
            "statusCode": 500,
            "description": "Unknown error occurred",
            "headers": [],
            "representations": [
              {
                "contentType": "application/json",
                "sample": "{\r\n  \"code\": \"Fatal\",\r\n  \"message\": \"string\",\r\n  \"details\": [\r\n    {\r\n      \"code\": \"Mandatory\",\r\n      \"message\": \"string\",\r\n      \"field\": \"string\"\r\n    }\r\n  ]\r\n}",
                "schemaId": "61b2e1d0ec635c1020b10294",
                "typeName": "Error"
              },
              {
                "contentType": "text/json",
                "sample": "{\r\n  \"code\": \"Fatal\",\r\n  \"message\": \"string\",\r\n  \"details\": [\r\n    {\r\n      \"code\": \"Mandatory\",\r\n      \"message\": \"string\",\r\n      \"field\": \"string\"\r\n    }\r\n  ]\r\n}",
                "schemaId": "61b2e1d0ec635c1020b10294",
                "typeName": "Error"
              }
            ]
          }
        ],
        "displayName": "Get biller payment rules",
        "method": "GET",
        "urlTemplate": "/billers/{billerCode}/payment-rules"
      },
      "name": "[concat(parameters('ApimServiceName'), '/bpoint-api/Biller_GetPaymentRules')]",
      "type": "Microsoft.ApiManagement/service/apis/operations",
      "apiVersion": "2021-01-01-preview",
      "dependsOn": [
        "[resourceId('Microsoft.ApiManagement/service/apis', parameters('ApimServiceName'), 'bpoint-api')]",
        "[resourceId('Microsoft.ApiManagement/service/apis/schemas', parameters('ApimServiceName'), 'bpoint-api', '61b2e1d0ec635c1020b10294')]"
      ]
    },
    {
      "properties": {
        "displayName": "Biller"
      },
      "name": "[concat(parameters('ApimServiceName'), '/bpoint-api/Biller_GetPaymentRules/Biller')]",
      "type": "Microsoft.ApiManagement/service/apis/operations/tags",
      "apiVersion": "2021-01-01-preview",
      "dependsOn": [
        "[resourceId('Microsoft.ApiManagement/service/apis/operations', parameters('ApimServiceName'), 'bpoint-api', 'Biller_GetPaymentRules')]"
      ]
    },
    {
      "properties": {
        "templateParameters": [
          {
            "name": "authkey",
            "type": "string",
            "required": true,
            "values": []
          }
        ],
        "description": "Get payment method",
        "request": {
          "queryParameters": [],
          "headers": [],
          "representations": []
        },
        "responses": [
          {
            "statusCode": 200,
            "description": "OK",
            "headers": [],
            "representations": [
              {
                "contentType": "application/json",
                "sample": "{\r\n  \"isToken\": true,\r\n  \"card\": {\r\n    \"number\": \"string\",\r\n    \"expiry\": {\r\n      \"month\": \"string\",\r\n      \"year\": \"string\"\r\n    },\r\n    \"name\": \"string\",\r\n    \"scheme\": \"Amex\",\r\n    \"localisation\": \"Local\",\r\n    \"type\": \"Debit\"\r\n  },\r\n  \"bank\": {\r\n    \"bsb\": \"string\",\r\n    \"account\": \"string\",\r\n    \"name\": \"string\"\r\n  },\r\n  \"accepted\": true,\r\n  \"surcharge\": 0,\r\n  \"provider\": \"Klarna\"\r\n}",
                "schemaId": "61b2e1d0ec635c1020b10294",
                "typeName": "ClientPaymentMethodResponse"
              },
              {
                "contentType": "text/json",
                "sample": "{\r\n  \"isToken\": true,\r\n  \"card\": {\r\n    \"number\": \"string\",\r\n    \"expiry\": {\r\n      \"month\": \"string\",\r\n      \"year\": \"string\"\r\n    },\r\n    \"name\": \"string\",\r\n    \"scheme\": \"Amex\",\r\n    \"localisation\": \"Local\",\r\n    \"type\": \"Debit\"\r\n  },\r\n  \"bank\": {\r\n    \"bsb\": \"string\",\r\n    \"account\": \"string\",\r\n    \"name\": \"string\"\r\n  },\r\n  \"accepted\": true,\r\n  \"surcharge\": 0,\r\n  \"provider\": \"Klarna\"\r\n}",
                "schemaId": "61b2e1d0ec635c1020b10294",
                "typeName": "ClientPaymentMethodResponse"
              }
            ]
          },
          {
            "statusCode": 400,
            "description": "Request was invalid",
            "headers": [],
            "representations": [
              {
                "contentType": "application/json",
                "sample": "{\r\n  \"code\": \"Fatal\",\r\n  \"message\": \"string\",\r\n  \"details\": [\r\n    {\r\n      \"code\": \"Mandatory\",\r\n      \"message\": \"string\",\r\n      \"field\": \"string\"\r\n    }\r\n  ]\r\n}",
                "schemaId": "61b2e1d0ec635c1020b10294",
                "typeName": "Error"
              },
              {
                "contentType": "text/json",
                "sample": "{\r\n  \"code\": \"Fatal\",\r\n  \"message\": \"string\",\r\n  \"details\": [\r\n    {\r\n      \"code\": \"Mandatory\",\r\n      \"message\": \"string\",\r\n      \"field\": \"string\"\r\n    }\r\n  ]\r\n}",
                "schemaId": "61b2e1d0ec635c1020b10294",
                "typeName": "Error"
              }
            ]
          },
          {
            "statusCode": 500,
            "description": "Unknown error occurred",
            "headers": [],
            "representations": [
              {
                "contentType": "application/json",
                "sample": "{\r\n  \"code\": \"Fatal\",\r\n  \"message\": \"string\",\r\n  \"details\": [\r\n    {\r\n      \"code\": \"Mandatory\",\r\n      \"message\": \"string\",\r\n      \"field\": \"string\"\r\n    }\r\n  ]\r\n}",
                "schemaId": "61b2e1d0ec635c1020b10294",
                "typeName": "Error"
              },
              {
                "contentType": "text/json",
                "sample": "{\r\n  \"code\": \"Fatal\",\r\n  \"message\": \"string\",\r\n  \"details\": [\r\n    {\r\n      \"code\": \"Mandatory\",\r\n      \"message\": \"string\",\r\n      \"field\": \"string\"\r\n    }\r\n  ]\r\n}",
                "schemaId": "61b2e1d0ec635c1020b10294",
                "typeName": "Error"
              }
            ]
          }
        ],
        "displayName": "Get payment method",
        "method": "GET",
        "urlTemplate": "/tokens/authkeys/{authkey}/client/payment-method"
      },
      "name": "[concat(parameters('ApimServiceName'), '/bpoint-api/TokenAuthkeyClient_GetPaymentMethod')]",
      "type": "Microsoft.ApiManagement/service/apis/operations",
      "apiVersion": "2021-01-01-preview",
      "dependsOn": [
        "[resourceId('Microsoft.ApiManagement/service/apis', parameters('ApimServiceName'), 'bpoint-api')]",
        "[resourceId('Microsoft.ApiManagement/service/apis/schemas', parameters('ApimServiceName'), 'bpoint-api', '61b2e1d0ec635c1020b10294')]"
      ]
    },
    {
      "properties": {
        "value": "<!--\n    IMPORTANT:\n    - Policy elements can appear only within the <inbound>, <outbound>, <backend> section elements.\n    - To apply a policy to the incoming request (before it is forwarded to the backend service), place a corresponding policy element within the <inbound> section element.\n    - To apply a policy to the outgoing response (before it is sent back to the caller), place a corresponding policy element within the <outbound> section element.\n    - To add a policy, place the cursor at the desired insertion point and select a policy from the sidebar.\n    - To remove a policy, delete the corresponding policy statement from the policy document.\n    - Position the <base> element within a section element to inherit all policies from the corresponding section element in the enclosing scope.\n    - Remove the <base> element to prevent inheriting policies from the corresponding section element in the enclosing scope.\n    - Policies are applied in the order of their appearance, from the top down.\n    - Comments within policy elements are not supported and may disappear. Place your comments between policy elements or at a higher level scope.\n-->\r\n<policies>\r\n\t<inbound>\r\n\t\t<base />\r\n\t</inbound>\r\n\t<backend>\r\n\t\t<base />\r\n\t</backend>\r\n\t<outbound>\r\n\t\t<base />\r\n\t</outbound>\r\n\t<on-error>\r\n\t\t<base />\r\n\t</on-error>\r\n</policies>",
        "format": "rawxml"
      },
      "name": "[concat(parameters('ApimServiceName'), '/bpoint-api/TokenAuthkeyClient_GetPaymentMethod/policy')]",
      "type": "Microsoft.ApiManagement/service/apis/operations/policies",
      "apiVersion": "2021-01-01-preview",
      "dependsOn": [
        "[resourceId('Microsoft.ApiManagement/service/apis/operations', parameters('ApimServiceName'), 'bpoint-api', 'TokenAuthkeyClient_GetPaymentMethod')]"
      ]
    },
    {
      "properties": {
        "displayName": "TokenAuthkeyClient"
      },
      "name": "[concat(parameters('ApimServiceName'), '/bpoint-api/TokenAuthkeyClient_GetPaymentMethod/TokenAuthkeyClient')]",
      "type": "Microsoft.ApiManagement/service/apis/operations/tags",
      "apiVersion": "2021-01-01-preview",
      "dependsOn": [
        "[resourceId('Microsoft.ApiManagement/service/apis/operations', parameters('ApimServiceName'), 'bpoint-api', 'TokenAuthkeyClient_GetPaymentMethod')]"
      ]
    },
    {
      "properties": {
        "templateParameters": [
          {
            "name": "authkey",
            "type": "string",
            "required": true,
            "values": []
          }
        ],
        "description": "Get payment method",
        "request": {
          "queryParameters": [],
          "headers": [],
          "representations": []
        },
        "responses": [
          {
            "statusCode": 200,
            "description": "OK",
            "headers": [],
            "representations": [
              {
                "contentType": "application/json",
                "sample": "{\r\n  \"card\": {\r\n    \"number\": \"string\",\r\n    \"expiry\": {\r\n      \"month\": \"string\",\r\n      \"year\": \"string\"\r\n    },\r\n    \"name\": \"string\",\r\n    \"scheme\": \"Amex\",\r\n    \"localisation\": \"Local\",\r\n    \"type\": \"Debit\"\r\n  },\r\n  \"bank\": {\r\n    \"bsb\": \"string\",\r\n    \"account\": \"string\",\r\n    \"name\": \"string\"\r\n  }\r\n}",
                "schemaId": "61b2e1d0ec635c1020b10294",
                "typeName": "TokenPaymentMethod"
              },
              {
                "contentType": "text/json",
                "sample": "{\r\n  \"card\": {\r\n    \"number\": \"string\",\r\n    \"expiry\": {\r\n      \"month\": \"string\",\r\n      \"year\": \"string\"\r\n    },\r\n    \"name\": \"string\",\r\n    \"scheme\": \"Amex\",\r\n    \"localisation\": \"Local\",\r\n    \"type\": \"Debit\"\r\n  },\r\n  \"bank\": {\r\n    \"bsb\": \"string\",\r\n    \"account\": \"string\",\r\n    \"name\": \"string\"\r\n  }\r\n}",
                "schemaId": "61b2e1d0ec635c1020b10294",
                "typeName": "TokenPaymentMethod"
              }
            ]
          },
          {
            "statusCode": 400,
            "description": "Request was invalid",
            "headers": [],
            "representations": [
              {
                "contentType": "application/json",
                "sample": "{\r\n  \"code\": \"Fatal\",\r\n  \"message\": \"string\",\r\n  \"details\": [\r\n    {\r\n      \"code\": \"Mandatory\",\r\n      \"message\": \"string\",\r\n      \"field\": \"string\"\r\n    }\r\n  ]\r\n}",
                "schemaId": "61b2e1d0ec635c1020b10294",
                "typeName": "Error"
              },
              {
                "contentType": "text/json",
                "sample": "{\r\n  \"code\": \"Fatal\",\r\n  \"message\": \"string\",\r\n  \"details\": [\r\n    {\r\n      \"code\": \"Mandatory\",\r\n      \"message\": \"string\",\r\n      \"field\": \"string\"\r\n    }\r\n  ]\r\n}",
                "schemaId": "61b2e1d0ec635c1020b10294",
                "typeName": "Error"
              }
            ]
          },
          {
            "statusCode": 401,
            "description": "Invalid credentials, or user does not have required permissions",
            "headers": [],
            "representations": [
              {
                "contentType": "application/json",
                "sample": "{\r\n  \"code\": \"Fatal\",\r\n  \"message\": \"string\",\r\n  \"details\": [\r\n    {\r\n      \"code\": \"Mandatory\",\r\n      \"message\": \"string\",\r\n      \"field\": \"string\"\r\n    }\r\n  ]\r\n}",
                "schemaId": "61b2e1d0ec635c1020b10294",
                "typeName": "Error"
              },
              {
                "contentType": "text/json",
                "sample": "{\r\n  \"code\": \"Fatal\",\r\n  \"message\": \"string\",\r\n  \"details\": [\r\n    {\r\n      \"code\": \"Mandatory\",\r\n      \"message\": \"string\",\r\n      \"field\": \"string\"\r\n    }\r\n  ]\r\n}",
                "schemaId": "61b2e1d0ec635c1020b10294",
                "typeName": "Error"
              }
            ]
          },
          {
            "statusCode": 500,
            "description": "Unknown error occurred",
            "headers": [],
            "representations": [
              {
                "contentType": "application/json",
                "sample": "{\r\n  \"code\": \"Fatal\",\r\n  \"message\": \"string\",\r\n  \"details\": [\r\n    {\r\n      \"code\": \"Mandatory\",\r\n      \"message\": \"string\",\r\n      \"field\": \"string\"\r\n    }\r\n  ]\r\n}",
                "schemaId": "61b2e1d0ec635c1020b10294",
                "typeName": "Error"
              },
              {
                "contentType": "text/json",
                "sample": "{\r\n  \"code\": \"Fatal\",\r\n  \"message\": \"string\",\r\n  \"details\": [\r\n    {\r\n      \"code\": \"Mandatory\",\r\n      \"message\": \"string\",\r\n      \"field\": \"string\"\r\n    }\r\n  ]\r\n}",
                "schemaId": "61b2e1d0ec635c1020b10294",
                "typeName": "Error"
              }
            ]
          }
        ],
        "displayName": "Get payment method",
        "method": "GET",
        "urlTemplate": "/tokens/authkeys/{authkey}/payment-method"
      },
      "name": "[concat(parameters('ApimServiceName'), '/bpoint-api/TokenAuthkey_GetPaymentMethod')]",
      "type": "Microsoft.ApiManagement/service/apis/operations",
      "apiVersion": "2021-01-01-preview",
      "dependsOn": [
        "[resourceId('Microsoft.ApiManagement/service/apis', parameters('ApimServiceName'), 'bpoint-api')]",
        "[resourceId('Microsoft.ApiManagement/service/apis/schemas', parameters('ApimServiceName'), 'bpoint-api', '61b2e1d0ec635c1020b10294')]"
      ]
    },
    {
      "properties": {
        "value": "<!--\n    IMPORTANT:\n    - Policy elements can appear only within the <inbound>, <outbound>, <backend> section elements.\n    - To apply a policy to the incoming request (before it is forwarded to the backend service), place a corresponding policy element within the <inbound> section element.\n    - To apply a policy to the outgoing response (before it is sent back to the caller), place a corresponding policy element within the <outbound> section element.\n    - To add a policy, place the cursor at the desired insertion point and select a policy from the sidebar.\n    - To remove a policy, delete the corresponding policy statement from the policy document.\n    - Position the <base> element within a section element to inherit all policies from the corresponding section element in the enclosing scope.\n    - Remove the <base> element to prevent inheriting policies from the corresponding section element in the enclosing scope.\n    - Policies are applied in the order of their appearance, from the top down.\n    - Comments within policy elements are not supported and may disappear. Place your comments between policy elements or at a higher level scope.\n-->\r\n<policies>\r\n\t<inbound>\r\n\t\t<base />\r\n\t</inbound>\r\n\t<backend>\r\n\t\t<base />\r\n\t</backend>\r\n\t<outbound>\r\n\t\t<base />\r\n\t</outbound>\r\n\t<on-error>\r\n\t\t<base />\r\n\t</on-error>\r\n</policies>",
        "format": "rawxml"
      },
      "name": "[concat(parameters('ApimServiceName'), '/bpoint-api/TokenAuthkey_GetPaymentMethod/policy')]",
      "type": "Microsoft.ApiManagement/service/apis/operations/policies",
      "apiVersion": "2021-01-01-preview",
      "dependsOn": [
        "[resourceId('Microsoft.ApiManagement/service/apis/operations', parameters('ApimServiceName'), 'bpoint-api', 'TokenAuthkey_GetPaymentMethod')]"
      ]
    },
    {
      "properties": {
        "displayName": "TokenAuthkey"
      },
      "name": "[concat(parameters('ApimServiceName'), '/bpoint-api/TokenAuthkey_GetPaymentMethod/TokenAuthkey')]",
      "type": "Microsoft.ApiManagement/service/apis/operations/tags",
      "apiVersion": "2021-01-01-preview",
      "dependsOn": [
        "[resourceId('Microsoft.ApiManagement/service/apis/operations', parameters('ApimServiceName'), 'bpoint-api', 'TokenAuthkey_GetPaymentMethod')]"
      ]
    },
    {
      "properties": {
        "templateParameters": [
          {
            "name": "authkey",
            "type": "string",
            "required": true,
            "values": []
          }
        ],
        "description": "Get payment method",
        "request": {
          "queryParameters": [],
          "headers": [],
          "representations": []
        },
        "responses": [
          {
            "statusCode": 200,
            "description": "OK",
            "headers": [],
            "representations": [
              {
                "contentType": "application/json",
                "sample": "{\r\n  \"isToken\": true,\r\n  \"card\": {\r\n    \"number\": \"string\",\r\n    \"expiry\": {\r\n      \"month\": \"string\",\r\n      \"year\": \"string\"\r\n    },\r\n    \"name\": \"string\",\r\n    \"scheme\": \"Amex\",\r\n    \"localisation\": \"Local\",\r\n    \"type\": \"Debit\"\r\n  },\r\n  \"bank\": {\r\n    \"bsb\": \"string\",\r\n    \"account\": \"string\",\r\n    \"name\": \"string\"\r\n  },\r\n  \"accepted\": true,\r\n  \"surcharge\": 0,\r\n  \"provider\": \"Klarna\"\r\n}",
                "schemaId": "61b2e1d0ec635c1020b10294",
                "typeName": "ClientPaymentMethodResponse"
              },
              {
                "contentType": "text/json",
                "sample": "{\r\n  \"isToken\": true,\r\n  \"card\": {\r\n    \"number\": \"string\",\r\n    \"expiry\": {\r\n      \"month\": \"string\",\r\n      \"year\": \"string\"\r\n    },\r\n    \"name\": \"string\",\r\n    \"scheme\": \"Amex\",\r\n    \"localisation\": \"Local\",\r\n    \"type\": \"Debit\"\r\n  },\r\n  \"bank\": {\r\n    \"bsb\": \"string\",\r\n    \"account\": \"string\",\r\n    \"name\": \"string\"\r\n  },\r\n  \"accepted\": true,\r\n  \"surcharge\": 0,\r\n  \"provider\": \"Klarna\"\r\n}",
                "schemaId": "61b2e1d0ec635c1020b10294",
                "typeName": "ClientPaymentMethodResponse"
              }
            ]
          },
          {
            "statusCode": 400,
            "description": "Request was invalid",
            "headers": [],
            "representations": [
              {
                "contentType": "application/json",
                "sample": "{\r\n  \"code\": \"Fatal\",\r\n  \"message\": \"string\",\r\n  \"details\": [\r\n    {\r\n      \"code\": \"Mandatory\",\r\n      \"message\": \"string\",\r\n      \"field\": \"string\"\r\n    }\r\n  ]\r\n}",
                "schemaId": "61b2e1d0ec635c1020b10294",
                "typeName": "Error"
              },
              {
                "contentType": "text/json",
                "sample": "{\r\n  \"code\": \"Fatal\",\r\n  \"message\": \"string\",\r\n  \"details\": [\r\n    {\r\n      \"code\": \"Mandatory\",\r\n      \"message\": \"string\",\r\n      \"field\": \"string\"\r\n    }\r\n  ]\r\n}",
                "schemaId": "61b2e1d0ec635c1020b10294",
                "typeName": "Error"
              }
            ]
          },
          {
            "statusCode": 500,
            "description": "Unknown error occurred",
            "headers": [],
            "representations": [
              {
                "contentType": "application/json",
                "sample": "{\r\n  \"code\": \"Fatal\",\r\n  \"message\": \"string\",\r\n  \"details\": [\r\n    {\r\n      \"code\": \"Mandatory\",\r\n      \"message\": \"string\",\r\n      \"field\": \"string\"\r\n    }\r\n  ]\r\n}",
                "schemaId": "61b2e1d0ec635c1020b10294",
                "typeName": "Error"
              },
              {
                "contentType": "text/json",
                "sample": "{\r\n  \"code\": \"Fatal\",\r\n  \"message\": \"string\",\r\n  \"details\": [\r\n    {\r\n      \"code\": \"Mandatory\",\r\n      \"message\": \"string\",\r\n      \"field\": \"string\"\r\n    }\r\n  ]\r\n}",
                "schemaId": "61b2e1d0ec635c1020b10294",
                "typeName": "Error"
              }
            ]
          }
        ],
        "displayName": "Get payment method",
        "method": "GET",
        "urlTemplate": "/txns/authkeys/{authkey}/client/payment-method"
      },
      "name": "[concat(parameters('ApimServiceName'), '/bpoint-api/TxnAuthkeyClient_GetPaymentMethod')]",
      "type": "Microsoft.ApiManagement/service/apis/operations",
      "apiVersion": "2021-01-01-preview",
      "dependsOn": [
        "[resourceId('Microsoft.ApiManagement/service/apis', parameters('ApimServiceName'), 'bpoint-api')]",
        "[resourceId('Microsoft.ApiManagement/service/apis/schemas', parameters('ApimServiceName'), 'bpoint-api', '61b2e1d0ec635c1020b10294')]"
      ]
    },
    {
      "properties": {
        "displayName": "TxnAuthkeyClient"
      },
      "name": "[concat(parameters('ApimServiceName'), '/bpoint-api/TxnAuthkeyClient_GetPaymentMethod/TxnAuthkeyClient')]",
      "type": "Microsoft.ApiManagement/service/apis/operations/tags",
      "apiVersion": "2021-01-01-preview",
      "dependsOn": [
        "[resourceId('Microsoft.ApiManagement/service/apis/operations', parameters('ApimServiceName'), 'bpoint-api', 'TxnAuthkeyClient_GetPaymentMethod')]"
      ]
    },
    {
      "properties": {
        "templateParameters": [
          {
            "name": "authkey",
            "type": "string",
            "required": true,
            "values": []
          }
        ],
        "description": "Get payment method",
        "request": {
          "queryParameters": [],
          "headers": [],
          "representations": []
        },
        "responses": [
          {
            "statusCode": 200,
            "description": "OK",
            "headers": [],
            "representations": [
              {
                "contentType": "application/json",
                "sample": "{\r\n  \"accepted\": true,\r\n  \"surcharge\": 0,\r\n  \"token\": \"string\",\r\n  \"card\": {\r\n    \"number\": \"string\",\r\n    \"expiry\": {\r\n      \"month\": \"string\",\r\n      \"year\": \"string\"\r\n    },\r\n    \"name\": \"string\",\r\n    \"scheme\": \"Amex\",\r\n    \"localisation\": \"Local\",\r\n    \"type\": \"Debit\"\r\n  },\r\n  \"bank\": {\r\n    \"bsb\": \"string\",\r\n    \"account\": \"string\",\r\n    \"name\": \"string\"\r\n  },\r\n  \"provider\": \"Klarna\"\r\n}",
                "schemaId": "61b2e1d0ec635c1020b10294",
                "typeName": "PaymentMethodResponse"
              },
              {
                "contentType": "text/json",
                "sample": "{\r\n  \"accepted\": true,\r\n  \"surcharge\": 0,\r\n  \"token\": \"string\",\r\n  \"card\": {\r\n    \"number\": \"string\",\r\n    \"expiry\": {\r\n      \"month\": \"string\",\r\n      \"year\": \"string\"\r\n    },\r\n    \"name\": \"string\",\r\n    \"scheme\": \"Amex\",\r\n    \"localisation\": \"Local\",\r\n    \"type\": \"Debit\"\r\n  },\r\n  \"bank\": {\r\n    \"bsb\": \"string\",\r\n    \"account\": \"string\",\r\n    \"name\": \"string\"\r\n  },\r\n  \"provider\": \"Klarna\"\r\n}",
                "schemaId": "61b2e1d0ec635c1020b10294",
                "typeName": "PaymentMethodResponse"
              }
            ]
          },
          {
            "statusCode": 400,
            "description": "Request was invalid",
            "headers": [],
            "representations": [
              {
                "contentType": "application/json",
                "sample": "{\r\n  \"code\": \"Fatal\",\r\n  \"message\": \"string\",\r\n  \"details\": [\r\n    {\r\n      \"code\": \"Mandatory\",\r\n      \"message\": \"string\",\r\n      \"field\": \"string\"\r\n    }\r\n  ]\r\n}",
                "schemaId": "61b2e1d0ec635c1020b10294",
                "typeName": "Error"
              },
              {
                "contentType": "text/json",
                "sample": "{\r\n  \"code\": \"Fatal\",\r\n  \"message\": \"string\",\r\n  \"details\": [\r\n    {\r\n      \"code\": \"Mandatory\",\r\n      \"message\": \"string\",\r\n      \"field\": \"string\"\r\n    }\r\n  ]\r\n}",
                "schemaId": "61b2e1d0ec635c1020b10294",
                "typeName": "Error"
              }
            ]
          },
          {
            "statusCode": 401,
            "description": "Invalid credentials, or user does not have required permissions",
            "headers": [],
            "representations": [
              {
                "contentType": "application/json",
                "sample": "{\r\n  \"code\": \"Fatal\",\r\n  \"message\": \"string\",\r\n  \"details\": [\r\n    {\r\n      \"code\": \"Mandatory\",\r\n      \"message\": \"string\",\r\n      \"field\": \"string\"\r\n    }\r\n  ]\r\n}",
                "schemaId": "61b2e1d0ec635c1020b10294",
                "typeName": "Error"
              },
              {
                "contentType": "text/json",
                "sample": "{\r\n  \"code\": \"Fatal\",\r\n  \"message\": \"string\",\r\n  \"details\": [\r\n    {\r\n      \"code\": \"Mandatory\",\r\n      \"message\": \"string\",\r\n      \"field\": \"string\"\r\n    }\r\n  ]\r\n}",
                "schemaId": "61b2e1d0ec635c1020b10294",
                "typeName": "Error"
              }
            ]
          },
          {
            "statusCode": 500,
            "description": "Unknown error occurred",
            "headers": [],
            "representations": [
              {
                "contentType": "application/json",
                "sample": "{\r\n  \"code\": \"Fatal\",\r\n  \"message\": \"string\",\r\n  \"details\": [\r\n    {\r\n      \"code\": \"Mandatory\",\r\n      \"message\": \"string\",\r\n      \"field\": \"string\"\r\n    }\r\n  ]\r\n}",
                "schemaId": "61b2e1d0ec635c1020b10294",
                "typeName": "Error"
              },
              {
                "contentType": "text/json",
                "sample": "{\r\n  \"code\": \"Fatal\",\r\n  \"message\": \"string\",\r\n  \"details\": [\r\n    {\r\n      \"code\": \"Mandatory\",\r\n      \"message\": \"string\",\r\n      \"field\": \"string\"\r\n    }\r\n  ]\r\n}",
                "schemaId": "61b2e1d0ec635c1020b10294",
                "typeName": "Error"
              }
            ]
          }
        ],
        "displayName": "Get payment method",
        "method": "GET",
        "urlTemplate": "/txns/authkeys/{authkey}/payment-method"
      },
      "name": "[concat(parameters('ApimServiceName'), '/bpoint-api/TxnAuthkey_GetPaymentMethod')]",
      "type": "Microsoft.ApiManagement/service/apis/operations",
      "apiVersion": "2021-01-01-preview",
      "dependsOn": [
        "[resourceId('Microsoft.ApiManagement/service/apis', parameters('ApimServiceName'), 'bpoint-api')]",
        "[resourceId('Microsoft.ApiManagement/service/apis/schemas', parameters('ApimServiceName'), 'bpoint-api', '61b2e1d0ec635c1020b10294')]"
      ]
    },
    {
      "properties": {
        "displayName": "TxnAuthkey"
      },
      "name": "[concat(parameters('ApimServiceName'), '/bpoint-api/TxnAuthkey_GetPaymentMethod/TxnAuthkey')]",
      "type": "Microsoft.ApiManagement/service/apis/operations/tags",
      "apiVersion": "2021-01-01-preview",
      "dependsOn": [
        "[resourceId('Microsoft.ApiManagement/service/apis/operations', parameters('ApimServiceName'), 'bpoint-api', 'TxnAuthkey_GetPaymentMethod')]"
      ]
    },
    {
      "properties": {
        "templateParameters": [
          {
            "name": "token",
            "type": "string",
            "required": true,
            "values": []
          }
        ],
        "description": "Get token",
        "request": {
          "queryParameters": [],
          "headers": [],
          "representations": []
        },
        "responses": [
          {
            "statusCode": 200,
            "description": "OK",
            "headers": [],
            "representations": [
              {
                "contentType": "application/json",
                "sample": "{\r\n  \"token\": \"string\",\r\n  \"merchantNumber\": \"string\",\r\n  \"crn1\": \"string\",\r\n  \"crn2\": \"string\",\r\n  \"crn3\": \"string\",\r\n  \"paymentMethod\": {\r\n    \"card\": {\r\n      \"number\": \"string\",\r\n      \"expiry\": {\r\n        \"month\": \"string\",\r\n        \"year\": \"string\"\r\n      },\r\n      \"name\": \"string\",\r\n      \"scheme\": \"Amex\",\r\n      \"localisation\": \"Local\",\r\n      \"type\": \"Debit\"\r\n    },\r\n    \"bank\": {\r\n      \"bsb\": \"string\",\r\n      \"account\": \"string\",\r\n      \"name\": \"string\"\r\n    }\r\n  },\r\n  \"emailAddress\": \"string\",\r\n  \"createdDateTime\": \"string\",\r\n  \"updatedDateTime\": \"string\"\r\n}",
                "schemaId": "61b2e1d0ec635c1020b10294",
                "typeName": "Token"
              },
              {
                "contentType": "text/json",
                "sample": "{\r\n  \"token\": \"string\",\r\n  \"merchantNumber\": \"string\",\r\n  \"crn1\": \"string\",\r\n  \"crn2\": \"string\",\r\n  \"crn3\": \"string\",\r\n  \"paymentMethod\": {\r\n    \"card\": {\r\n      \"number\": \"string\",\r\n      \"expiry\": {\r\n        \"month\": \"string\",\r\n        \"year\": \"string\"\r\n      },\r\n      \"name\": \"string\",\r\n      \"scheme\": \"Amex\",\r\n      \"localisation\": \"Local\",\r\n      \"type\": \"Debit\"\r\n    },\r\n    \"bank\": {\r\n      \"bsb\": \"string\",\r\n      \"account\": \"string\",\r\n      \"name\": \"string\"\r\n    }\r\n  },\r\n  \"emailAddress\": \"string\",\r\n  \"createdDateTime\": \"string\",\r\n  \"updatedDateTime\": \"string\"\r\n}",
                "schemaId": "61b2e1d0ec635c1020b10294",
                "typeName": "Token"
              }
            ]
          },
          {
            "statusCode": 400,
            "description": "Request was invalid",
            "headers": [],
            "representations": [
              {
                "contentType": "application/json",
                "sample": "{\r\n  \"code\": \"Fatal\",\r\n  \"message\": \"string\",\r\n  \"details\": [\r\n    {\r\n      \"code\": \"Mandatory\",\r\n      \"message\": \"string\",\r\n      \"field\": \"string\"\r\n    }\r\n  ]\r\n}",
                "schemaId": "61b2e1d0ec635c1020b10294",
                "typeName": "Error"
              },
              {
                "contentType": "text/json",
                "sample": "{\r\n  \"code\": \"Fatal\",\r\n  \"message\": \"string\",\r\n  \"details\": [\r\n    {\r\n      \"code\": \"Mandatory\",\r\n      \"message\": \"string\",\r\n      \"field\": \"string\"\r\n    }\r\n  ]\r\n}",
                "schemaId": "61b2e1d0ec635c1020b10294",
                "typeName": "Error"
              }
            ]
          },
          {
            "statusCode": 401,
            "description": "Invalid credentials, or user does not have required permissions",
            "headers": [],
            "representations": [
              {
                "contentType": "application/json",
                "sample": "{\r\n  \"code\": \"Fatal\",\r\n  \"message\": \"string\",\r\n  \"details\": [\r\n    {\r\n      \"code\": \"Mandatory\",\r\n      \"message\": \"string\",\r\n      \"field\": \"string\"\r\n    }\r\n  ]\r\n}",
                "schemaId": "61b2e1d0ec635c1020b10294",
                "typeName": "Error"
              },
              {
                "contentType": "text/json",
                "sample": "{\r\n  \"code\": \"Fatal\",\r\n  \"message\": \"string\",\r\n  \"details\": [\r\n    {\r\n      \"code\": \"Mandatory\",\r\n      \"message\": \"string\",\r\n      \"field\": \"string\"\r\n    }\r\n  ]\r\n}",
                "schemaId": "61b2e1d0ec635c1020b10294",
                "typeName": "Error"
              }
            ]
          },
          {
            "statusCode": 500,
            "description": "Unknown error occurred",
            "headers": [],
            "representations": [
              {
                "contentType": "application/json",
                "sample": "{\r\n  \"code\": \"Fatal\",\r\n  \"message\": \"string\",\r\n  \"details\": [\r\n    {\r\n      \"code\": \"Mandatory\",\r\n      \"message\": \"string\",\r\n      \"field\": \"string\"\r\n    }\r\n  ]\r\n}",
                "schemaId": "61b2e1d0ec635c1020b10294",
                "typeName": "Error"
              },
              {
                "contentType": "text/json",
                "sample": "{\r\n  \"code\": \"Fatal\",\r\n  \"message\": \"string\",\r\n  \"details\": [\r\n    {\r\n      \"code\": \"Mandatory\",\r\n      \"message\": \"string\",\r\n      \"field\": \"string\"\r\n    }\r\n  ]\r\n}",
                "schemaId": "61b2e1d0ec635c1020b10294",
                "typeName": "Error"
              }
            ]
          }
        ],
        "displayName": "Get token",
        "method": "GET",
        "urlTemplate": "/tokens/{token}"
      },
      "name": "[concat(parameters('ApimServiceName'), '/bpoint-api/Token_GetToken')]",
      "type": "Microsoft.ApiManagement/service/apis/operations",
      "apiVersion": "2021-01-01-preview",
      "dependsOn": [
        "[resourceId('Microsoft.ApiManagement/service/apis', parameters('ApimServiceName'), 'bpoint-api')]",
        "[resourceId('Microsoft.ApiManagement/service/apis/schemas', parameters('ApimServiceName'), 'bpoint-api', '61b2e1d0ec635c1020b10294')]"
      ]
    },
    {
      "properties": {
        "value": "<!--\n    IMPORTANT:\n    - Policy elements can appear only within the <inbound>, <outbound>, <backend> section elements.\n    - To apply a policy to the incoming request (before it is forwarded to the backend service), place a corresponding policy element within the <inbound> section element.\n    - To apply a policy to the outgoing response (before it is sent back to the caller), place a corresponding policy element within the <outbound> section element.\n    - To add a policy, place the cursor at the desired insertion point and select a policy from the sidebar.\n    - To remove a policy, delete the corresponding policy statement from the policy document.\n    - Position the <base> element within a section element to inherit all policies from the corresponding section element in the enclosing scope.\n    - Remove the <base> element to prevent inheriting policies from the corresponding section element in the enclosing scope.\n    - Policies are applied in the order of their appearance, from the top down.\n    - Comments within policy elements are not supported and may disappear. Place your comments between policy elements or at a higher level scope.\n-->\r\n<policies>\r\n\t<inbound>\r\n\t\t<base />\r\n\t</inbound>\r\n\t<backend>\r\n\t\t<base />\r\n\t</backend>\r\n\t<outbound>\r\n\t\t<base />\r\n\t</outbound>\r\n\t<on-error>\r\n\t\t<base />\r\n\t</on-error>\r\n</policies>",
        "format": "rawxml"
      },
      "name": "[concat(parameters('ApimServiceName'), '/bpoint-api/Token_GetToken/policy')]",
      "type": "Microsoft.ApiManagement/service/apis/operations/policies",
      "apiVersion": "2021-01-01-preview",
      "dependsOn": [
        "[resourceId('Microsoft.ApiManagement/service/apis/operations', parameters('ApimServiceName'), 'bpoint-api', 'Token_GetToken')]"
      ]
    },
    {
      "properties": {
        "displayName": "Token"
      },
      "name": "[concat(parameters('ApimServiceName'), '/bpoint-api/Token_GetToken/Token')]",
      "type": "Microsoft.ApiManagement/service/apis/operations/tags",
      "apiVersion": "2021-01-01-preview",
      "dependsOn": [
        "[resourceId('Microsoft.ApiManagement/service/apis/operations', parameters('ApimServiceName'), 'bpoint-api', 'Token_GetToken')]"
      ]
    },
    {
      "properties": {
        "templateParameters": [
          {
            "name": "txnNumber",
            "type": "string",
            "required": true,
            "values": []
          }
        ],
        "description": "Get transaction",
        "request": {
          "queryParameters": [],
          "headers": [],
          "representations": []
        },
        "responses": [
          {
            "statusCode": 200,
            "description": "OK",
            "headers": [],
            "representations": [
              {
                "contentType": "application/json",
                "sample": "{\r\n  \"action\": \"Payment\",\r\n  \"type\": \"Internet\",\r\n  \"subType\": \"Single\",\r\n  \"source\": \"string\",\r\n  \"billerCode\": \"string\",\r\n  \"merchantNumber\": \"string\",\r\n  \"crn1\": \"string\",\r\n  \"crn2\": \"string\",\r\n  \"crn3\": \"string\",\r\n  \"merchantReference\": \"string\",\r\n  \"currency\": \"AUD\",\r\n  \"amount\": 110,\r\n  \"amountOriginal\": 100,\r\n  \"amountSurcharge\": 10,\r\n  \"paymentMethod\": {\r\n    \"token\": \"string\",\r\n    \"card\": {\r\n      \"number\": \"string\",\r\n      \"expiry\": {\r\n        \"month\": \"string\",\r\n        \"year\": \"string\"\r\n      },\r\n      \"name\": \"string\",\r\n      \"scheme\": \"Amex\",\r\n      \"localisation\": \"Local\",\r\n      \"type\": \"Debit\"\r\n    },\r\n    \"bank\": {\r\n      \"bsb\": \"string\",\r\n      \"account\": \"string\",\r\n      \"name\": \"string\"\r\n    },\r\n    \"provider\": \"Klarna\"\r\n  },\r\n  \"processedDateTime\": \"string\",\r\n  \"settlementDate\": \"string\",\r\n  \"emailAddress\": \"example@email.com\",\r\n  \"originalTxnNumber\": \"string\",\r\n  \"responseCode\": \"string\",\r\n  \"bankResponseCode\": \"string\",\r\n  \"responseText\": \"string\",\r\n  \"txnNumber\": \"string\",\r\n  \"receiptNumber\": \"string\",\r\n  \"authoriseId\": \"string\",\r\n  \"rrn\": \"string\",\r\n  \"storeCard\": true,\r\n  \"cvnResult\": {\r\n    \"code\": \"string\"\r\n  },\r\n  \"isThreeDs\": true,\r\n  \"isCvnPresent\": true,\r\n  \"isTestTxn\": true,\r\n  \"fraudScreeningResult\": {\r\n    \"rejected\": true,\r\n    \"responseCode\": \"string\",\r\n    \"responseMessage\": \"string\",\r\n    \"provider\": {\r\n      \"id\": \"string\",\r\n      \"response\": [\r\n        {\r\n          \"key\": \"string\",\r\n          \"value\": \"string\"\r\n        }\r\n      ],\r\n      \"errors\": [\r\n        {\r\n          \"field\": \"string\",\r\n          \"message\": \"string\"\r\n        }\r\n      ]\r\n    }\r\n  },\r\n  \"statementDescriptor\": {\r\n    \"city\": \"string\",\r\n    \"companyName\": \"string\",\r\n    \"countryCode\": \"string\",\r\n    \"postcode\": \"string\",\r\n    \"state\": \"string\",\r\n    \"addressLine1\": \"string\",\r\n    \"addressLine2\": \"string\",\r\n    \"merchantName\": \"string\",\r\n    \"phoneNumber\": \"string\"\r\n  },\r\n  \"threeDsResult\": {\r\n    \"fields\": [\r\n      {\r\n        \"key\": \"string\",\r\n        \"value\": \"string\"\r\n      }\r\n    ]\r\n  }\r\n}",
                "schemaId": "61b2e1d0ec635c1020b10294",
                "typeName": "Txn"
              },
              {
                "contentType": "text/json",
                "sample": "{\r\n  \"action\": \"Payment\",\r\n  \"type\": \"Internet\",\r\n  \"subType\": \"Single\",\r\n  \"source\": \"string\",\r\n  \"billerCode\": \"string\",\r\n  \"merchantNumber\": \"string\",\r\n  \"crn1\": \"string\",\r\n  \"crn2\": \"string\",\r\n  \"crn3\": \"string\",\r\n  \"merchantReference\": \"string\",\r\n  \"currency\": \"AUD\",\r\n  \"amount\": 110,\r\n  \"amountOriginal\": 100,\r\n  \"amountSurcharge\": 10,\r\n  \"paymentMethod\": {\r\n    \"token\": \"string\",\r\n    \"card\": {\r\n      \"number\": \"string\",\r\n      \"expiry\": {\r\n        \"month\": \"string\",\r\n        \"year\": \"string\"\r\n      },\r\n      \"name\": \"string\",\r\n      \"scheme\": \"Amex\",\r\n      \"localisation\": \"Local\",\r\n      \"type\": \"Debit\"\r\n    },\r\n    \"bank\": {\r\n      \"bsb\": \"string\",\r\n      \"account\": \"string\",\r\n      \"name\": \"string\"\r\n    },\r\n    \"provider\": \"Klarna\"\r\n  },\r\n  \"processedDateTime\": \"string\",\r\n  \"settlementDate\": \"string\",\r\n  \"emailAddress\": \"example@email.com\",\r\n  \"originalTxnNumber\": \"string\",\r\n  \"responseCode\": \"string\",\r\n  \"bankResponseCode\": \"string\",\r\n  \"responseText\": \"string\",\r\n  \"txnNumber\": \"string\",\r\n  \"receiptNumber\": \"string\",\r\n  \"authoriseId\": \"string\",\r\n  \"rrn\": \"string\",\r\n  \"storeCard\": true,\r\n  \"cvnResult\": {\r\n    \"code\": \"string\"\r\n  },\r\n  \"isThreeDs\": true,\r\n  \"isCvnPresent\": true,\r\n  \"isTestTxn\": true,\r\n  \"fraudScreeningResult\": {\r\n    \"rejected\": true,\r\n    \"responseCode\": \"string\",\r\n    \"responseMessage\": \"string\",\r\n    \"provider\": {\r\n      \"id\": \"string\",\r\n      \"response\": [\r\n        {\r\n          \"key\": \"string\",\r\n          \"value\": \"string\"\r\n        }\r\n      ],\r\n      \"errors\": [\r\n        {\r\n          \"field\": \"string\",\r\n          \"message\": \"string\"\r\n        }\r\n      ]\r\n    }\r\n  },\r\n  \"statementDescriptor\": {\r\n    \"city\": \"string\",\r\n    \"companyName\": \"string\",\r\n    \"countryCode\": \"string\",\r\n    \"postcode\": \"string\",\r\n    \"state\": \"string\",\r\n    \"addressLine1\": \"string\",\r\n    \"addressLine2\": \"string\",\r\n    \"merchantName\": \"string\",\r\n    \"phoneNumber\": \"string\"\r\n  },\r\n  \"threeDsResult\": {\r\n    \"fields\": [\r\n      {\r\n        \"key\": \"string\",\r\n        \"value\": \"string\"\r\n      }\r\n    ]\r\n  }\r\n}",
                "schemaId": "61b2e1d0ec635c1020b10294",
                "typeName": "Txn"
              }
            ]
          },
          {
            "statusCode": 400,
            "description": "Request was invalid",
            "headers": [],
            "representations": [
              {
                "contentType": "application/json",
                "sample": "{\r\n  \"code\": \"Fatal\",\r\n  \"message\": \"string\",\r\n  \"details\": [\r\n    {\r\n      \"code\": \"Mandatory\",\r\n      \"message\": \"string\",\r\n      \"field\": \"string\"\r\n    }\r\n  ]\r\n}",
                "schemaId": "61b2e1d0ec635c1020b10294",
                "typeName": "Error"
              },
              {
                "contentType": "text/json",
                "sample": "{\r\n  \"code\": \"Fatal\",\r\n  \"message\": \"string\",\r\n  \"details\": [\r\n    {\r\n      \"code\": \"Mandatory\",\r\n      \"message\": \"string\",\r\n      \"field\": \"string\"\r\n    }\r\n  ]\r\n}",
                "schemaId": "61b2e1d0ec635c1020b10294",
                "typeName": "Error"
              }
            ]
          },
          {
            "statusCode": 401,
            "description": "Invalid credentials, or user does not have required permissions",
            "headers": [],
            "representations": [
              {
                "contentType": "application/json",
                "sample": "{\r\n  \"code\": \"Fatal\",\r\n  \"message\": \"string\",\r\n  \"details\": [\r\n    {\r\n      \"code\": \"Mandatory\",\r\n      \"message\": \"string\",\r\n      \"field\": \"string\"\r\n    }\r\n  ]\r\n}",
                "schemaId": "61b2e1d0ec635c1020b10294",
                "typeName": "Error"
              },
              {
                "contentType": "text/json",
                "sample": "{\r\n  \"code\": \"Fatal\",\r\n  \"message\": \"string\",\r\n  \"details\": [\r\n    {\r\n      \"code\": \"Mandatory\",\r\n      \"message\": \"string\",\r\n      \"field\": \"string\"\r\n    }\r\n  ]\r\n}",
                "schemaId": "61b2e1d0ec635c1020b10294",
                "typeName": "Error"
              }
            ]
          },
          {
            "statusCode": 500,
            "description": "Unknown error occurred",
            "headers": [],
            "representations": [
              {
                "contentType": "application/json",
                "sample": "{\r\n  \"code\": \"Fatal\",\r\n  \"message\": \"string\",\r\n  \"details\": [\r\n    {\r\n      \"code\": \"Mandatory\",\r\n      \"message\": \"string\",\r\n      \"field\": \"string\"\r\n    }\r\n  ]\r\n}",
                "schemaId": "61b2e1d0ec635c1020b10294",
                "typeName": "Error"
              },
              {
                "contentType": "text/json",
                "sample": "{\r\n  \"code\": \"Fatal\",\r\n  \"message\": \"string\",\r\n  \"details\": [\r\n    {\r\n      \"code\": \"Mandatory\",\r\n      \"message\": \"string\",\r\n      \"field\": \"string\"\r\n    }\r\n  ]\r\n}",
                "schemaId": "61b2e1d0ec635c1020b10294",
                "typeName": "Error"
              }
            ]
          }
        ],
        "displayName": "Get transaction",
        "method": "GET",
        "urlTemplate": "/txns/{txnNumber}"
      },
      "name": "[concat(parameters('ApimServiceName'), '/bpoint-api/Txn_GetTxn')]",
      "type": "Microsoft.ApiManagement/service/apis/operations",
      "apiVersion": "2021-01-01-preview",
      "dependsOn": [
        "[resourceId('Microsoft.ApiManagement/service/apis', parameters('ApimServiceName'), 'bpoint-api')]",
        "[resourceId('Microsoft.ApiManagement/service/apis/schemas', parameters('ApimServiceName'), 'bpoint-api', '61b2e1d0ec635c1020b10294')]"
      ]
    },
    {
      "properties": {
        "displayName": "Txn"
      },
      "name": "[concat(parameters('ApimServiceName'), '/bpoint-api/Txn_GetTxn/Txn')]",
      "type": "Microsoft.ApiManagement/service/apis/operations/tags",
      "apiVersion": "2021-01-01-preview",
      "dependsOn": [
        "[resourceId('Microsoft.ApiManagement/service/apis/operations', parameters('ApimServiceName'), 'bpoint-api', 'Txn_GetTxn')]"
      ]
    },
    {
      "properties": {
        "templateParameters": [
          {
            "name": "authkey",
            "type": "string",
            "required": true,
            "values": []
          }
        ],
        "description": "Initiate payment method provider",
        "request": {
          "queryParameters": [],
          "headers": [],
          "representations": [
            {
              "contentType": "application/json",
              "sample": "{\r\n  \"surcharge\": {\r\n    \"calculate\": true,\r\n    \"amount\": 0\r\n  }\r\n}",
              "schemaId": "61b2e1d0ec635c1020b10294",
              "typeName": "TxnInitiateProviderRequest"
            },
            {
              "contentType": "text/json",
              "sample": "{\r\n  \"surcharge\": {\r\n    \"calculate\": true,\r\n    \"amount\": 0\r\n  }\r\n}",
              "schemaId": "61b2e1d0ec635c1020b10294",
              "typeName": "TxnInitiateProviderRequest"
            },
            {
              "contentType": "application/x-www-form-urlencoded"
            }
          ]
        },
        "responses": [
          {
            "statusCode": 201,
            "description": "Successful",
            "headers": [],
            "representations": []
          },
          {
            "statusCode": 400,
            "description": "Request was invalid",
            "headers": [],
            "representations": []
          },
          {
            "statusCode": 401,
            "description": "Invalid credentials, or user does not have required permissions",
            "headers": [],
            "representations": []
          },
          {
            "statusCode": 500,
            "description": "Unknown error occurred",
            "headers": [],
            "representations": []
          }
        ],
        "displayName": "Initiate payment method provider",
        "method": "POST",
        "urlTemplate": "/txns/authkeys/{authkey}/initiate-provider"
      },
      "name": "[concat(parameters('ApimServiceName'), '/bpoint-api/TxnAuthkey_InitiateProvider')]",
      "type": "Microsoft.ApiManagement/service/apis/operations",
      "apiVersion": "2021-01-01-preview",
      "dependsOn": [
        "[resourceId('Microsoft.ApiManagement/service/apis', parameters('ApimServiceName'), 'bpoint-api')]",
        "[resourceId('Microsoft.ApiManagement/service/apis/schemas', parameters('ApimServiceName'), 'bpoint-api', '61b2e1d0ec635c1020b10294')]"
      ]
    },
    {
      "properties": {
        "displayName": "TxnAuthkey"
      },
      "name": "[concat(parameters('ApimServiceName'), '/bpoint-api/TxnAuthkey_InitiateProvider/TxnAuthkey')]",
      "type": "Microsoft.ApiManagement/service/apis/operations/tags",
      "apiVersion": "2021-01-01-preview",
      "dependsOn": [
        "[resourceId('Microsoft.ApiManagement/service/apis/operations', parameters('ApimServiceName'), 'bpoint-api', 'TxnAuthkey_InitiateProvider')]"
      ]
    },
    {
      "properties": {
        "templateParameters": [
          {
            "name": "dvtoken",
            "description": "dvtoken record to delete",
            "type": "string",
            "required": true,
            "values": []
          }
        ],
        "description": "<p>Deletes an existing dvtoken.\nReference document <a href='https://www.bpoint.com.au/developers/v3/#!#twopartydeletetoken'>https://www.bpoint.com.au/developers/v3/#!#twopartydeletetoken</a></p>",
        "request": {
          "queryParameters": [],
          "headers": [],
          "representations": []
        },
        "responses": [],
        "displayName": "Party Delete DVTokenDelete ",
        "method": "DELETE",
        "urlTemplate": "/dvtokens/{dvtoken}"
      },
      "name": "[concat(parameters('ApimServiceName'), '/bpoint-api/party-delete-dvtokendelete')]",
      "type": "Microsoft.ApiManagement/service/apis/operations",
      "apiVersion": "2021-01-01-preview",
      "dependsOn": [
        "[resourceId('Microsoft.ApiManagement/service/apis', parameters('ApimServiceName'), 'bpoint-api')]"
      ]
    },
    {
      "properties": {
        "value": "<!--\n    IMPORTANT:\n    - Policy elements can appear only within the <inbound>, <outbound>, <backend> section elements.\n    - To apply a policy to the incoming request (before it is forwarded to the backend service), place a corresponding policy element within the <inbound> section element.\n    - To apply a policy to the outgoing response (before it is sent back to the caller), place a corresponding policy element within the <outbound> section element.\n    - To add a policy, place the cursor at the desired insertion point and select a policy from the sidebar.\n    - To remove a policy, delete the corresponding policy statement from the policy document.\n    - Position the <base> element within a section element to inherit all policies from the corresponding section element in the enclosing scope.\n    - Remove the <base> element to prevent inheriting policies from the corresponding section element in the enclosing scope.\n    - Policies are applied in the order of their appearance, from the top down.\n    - Comments within policy elements are not supported and may disappear. Place your comments between policy elements or at a higher level scope.\n-->\r\n<policies>\r\n\t<inbound>\r\n\t\t<base />\r\n\t\t<set-backend-service base-url=\"{{bpoint-backend-host}}/webapi/v3\" />\r\n\t</inbound>\r\n\t<backend>\r\n\t\t<base />\r\n\t</backend>\r\n\t<outbound>\r\n\t\t<base />\r\n\t</outbound>\r\n\t<on-error>\r\n\t\t<base />\r\n\t</on-error>\r\n</policies>",
        "format": "rawxml"
      },
      "name": "[concat(parameters('ApimServiceName'), '/bpoint-api/party-delete-dvtokendelete/policy')]",
      "type": "Microsoft.ApiManagement/service/apis/operations/policies",
      "apiVersion": "2021-01-01-preview",
      "dependsOn": [
        "[resourceId('Microsoft.ApiManagement/service/apis/operations', parameters('ApimServiceName'), 'bpoint-api', 'party-delete-dvtokendelete')]"
      ]
    },
    {
      "properties": {
        "templateParameters": [
          {
            "name": "authkey",
            "type": "string",
            "required": true,
            "values": []
          }
        ],
        "description": "Token will be created/updated (depending on whether the authkey was created with a token number).\r\nAuthkey will be deleted after this operation",
        "request": {
          "queryParameters": [],
          "headers": [],
          "representations": [
            {
              "contentType": "application/json",
              "sample": "{\r\n  \"webhook\": {\r\n    \"url\": \"string\",\r\n    \"version\": \"string\"\r\n  }\r\n}",
              "schemaId": "61b2e1d0ec635c1020b10294",
              "typeName": "ProcessTokenRequest"
            },
            {
              "contentType": "text/json",
              "sample": "{\r\n  \"webhook\": {\r\n    \"url\": \"string\",\r\n    \"version\": \"string\"\r\n  }\r\n}",
              "schemaId": "61b2e1d0ec635c1020b10294",
              "typeName": "ProcessTokenRequest"
            },
            {
              "contentType": "application/x-www-form-urlencoded"
            }
          ]
        },
        "responses": [
          {
            "statusCode": 200,
            "description": "OK",
            "headers": [],
            "representations": [
              {
                "contentType": "application/json",
                "sample": "{\r\n  \"token\": {\r\n    \"token\": \"string\",\r\n    \"merchantNumber\": \"string\",\r\n    \"crn1\": \"string\",\r\n    \"crn2\": \"string\",\r\n    \"crn3\": \"string\",\r\n    \"paymentMethod\": {\r\n      \"card\": {\r\n        \"number\": \"string\",\r\n        \"expiry\": {\r\n          \"month\": \"string\",\r\n          \"year\": \"string\"\r\n        },\r\n        \"name\": \"string\",\r\n        \"scheme\": \"Amex\",\r\n        \"localisation\": \"Local\",\r\n        \"type\": \"Debit\"\r\n      },\r\n      \"bank\": {\r\n        \"bsb\": \"string\",\r\n        \"account\": \"string\",\r\n        \"name\": \"string\"\r\n      }\r\n    },\r\n    \"emailAddress\": \"string\",\r\n    \"createdDateTime\": \"string\",\r\n    \"updatedDateTime\": \"string\"\r\n  }\r\n}",
                "schemaId": "61b2e1d0ec635c1020b10294",
                "typeName": "ProcessTokenResponse"
              },
              {
                "contentType": "text/json",
                "sample": "{\r\n  \"token\": {\r\n    \"token\": \"string\",\r\n    \"merchantNumber\": \"string\",\r\n    \"crn1\": \"string\",\r\n    \"crn2\": \"string\",\r\n    \"crn3\": \"string\",\r\n    \"paymentMethod\": {\r\n      \"card\": {\r\n        \"number\": \"string\",\r\n        \"expiry\": {\r\n          \"month\": \"string\",\r\n          \"year\": \"string\"\r\n        },\r\n        \"name\": \"string\",\r\n        \"scheme\": \"Amex\",\r\n        \"localisation\": \"Local\",\r\n        \"type\": \"Debit\"\r\n      },\r\n      \"bank\": {\r\n        \"bsb\": \"string\",\r\n        \"account\": \"string\",\r\n        \"name\": \"string\"\r\n      }\r\n    },\r\n    \"emailAddress\": \"string\",\r\n    \"createdDateTime\": \"string\",\r\n    \"updatedDateTime\": \"string\"\r\n  }\r\n}",
                "schemaId": "61b2e1d0ec635c1020b10294",
                "typeName": "ProcessTokenResponse"
              }
            ]
          },
          {
            "statusCode": 400,
            "description": "Request was invalid",
            "headers": [],
            "representations": [
              {
                "contentType": "application/json",
                "sample": "{\r\n  \"code\": \"Fatal\",\r\n  \"message\": \"string\",\r\n  \"details\": [\r\n    {\r\n      \"code\": \"Mandatory\",\r\n      \"message\": \"string\",\r\n      \"field\": \"string\"\r\n    }\r\n  ]\r\n}",
                "schemaId": "61b2e1d0ec635c1020b10294",
                "typeName": "Error"
              },
              {
                "contentType": "text/json",
                "sample": "{\r\n  \"code\": \"Fatal\",\r\n  \"message\": \"string\",\r\n  \"details\": [\r\n    {\r\n      \"code\": \"Mandatory\",\r\n      \"message\": \"string\",\r\n      \"field\": \"string\"\r\n    }\r\n  ]\r\n}",
                "schemaId": "61b2e1d0ec635c1020b10294",
                "typeName": "Error"
              }
            ]
          },
          {
            "statusCode": 401,
            "description": "Invalid credentials, or user does not have required permissions",
            "headers": [],
            "representations": [
              {
                "contentType": "application/json",
                "sample": "{\r\n  \"code\": \"Fatal\",\r\n  \"message\": \"string\",\r\n  \"details\": [\r\n    {\r\n      \"code\": \"Mandatory\",\r\n      \"message\": \"string\",\r\n      \"field\": \"string\"\r\n    }\r\n  ]\r\n}",
                "schemaId": "61b2e1d0ec635c1020b10294",
                "typeName": "Error"
              },
              {
                "contentType": "text/json",
                "sample": "{\r\n  \"code\": \"Fatal\",\r\n  \"message\": \"string\",\r\n  \"details\": [\r\n    {\r\n      \"code\": \"Mandatory\",\r\n      \"message\": \"string\",\r\n      \"field\": \"string\"\r\n    }\r\n  ]\r\n}",
                "schemaId": "61b2e1d0ec635c1020b10294",
                "typeName": "Error"
              }
            ]
          },
          {
            "statusCode": 500,
            "description": "Unknown error occurred",
            "headers": [],
            "representations": [
              {
                "contentType": "application/json",
                "sample": "{\r\n  \"code\": \"Fatal\",\r\n  \"message\": \"string\",\r\n  \"details\": [\r\n    {\r\n      \"code\": \"Mandatory\",\r\n      \"message\": \"string\",\r\n      \"field\": \"string\"\r\n    }\r\n  ]\r\n}",
                "schemaId": "61b2e1d0ec635c1020b10294",
                "typeName": "Error"
              },
              {
                "contentType": "text/json",
                "sample": "{\r\n  \"code\": \"Fatal\",\r\n  \"message\": \"string\",\r\n  \"details\": [\r\n    {\r\n      \"code\": \"Mandatory\",\r\n      \"message\": \"string\",\r\n      \"field\": \"string\"\r\n    }\r\n  ]\r\n}",
                "schemaId": "61b2e1d0ec635c1020b10294",
                "typeName": "Error"
              }
            ]
          }
        ],
        "displayName": "Process token",
        "method": "POST",
        "urlTemplate": "/tokens/authkeys/{authkey}/process"
      },
      "name": "[concat(parameters('ApimServiceName'), '/bpoint-api/TokenAuthkey_Process')]",
      "type": "Microsoft.ApiManagement/service/apis/operations",
      "apiVersion": "2021-01-01-preview",
      "dependsOn": [
        "[resourceId('Microsoft.ApiManagement/service/apis', parameters('ApimServiceName'), 'bpoint-api')]",
        "[resourceId('Microsoft.ApiManagement/service/apis/schemas', parameters('ApimServiceName'), 'bpoint-api', '61b2e1d0ec635c1020b10294')]"
      ]
    },
    {
      "properties": {
        "value": "<!--\n    IMPORTANT:\n    - Policy elements can appear only within the <inbound>, <outbound>, <backend> section elements.\n    - To apply a policy to the incoming request (before it is forwarded to the backend service), place a corresponding policy element within the <inbound> section element.\n    - To apply a policy to the outgoing response (before it is sent back to the caller), place a corresponding policy element within the <outbound> section element.\n    - To add a policy, place the cursor at the desired insertion point and select a policy from the sidebar.\n    - To remove a policy, delete the corresponding policy statement from the policy document.\n    - Position the <base> element within a section element to inherit all policies from the corresponding section element in the enclosing scope.\n    - Remove the <base> element to prevent inheriting policies from the corresponding section element in the enclosing scope.\n    - Policies are applied in the order of their appearance, from the top down.\n    - Comments within policy elements are not supported and may disappear. Place your comments between policy elements or at a higher level scope.\n-->\r\n<policies>\r\n\t<inbound>\r\n\t\t<base />\r\n\t</inbound>\r\n\t<backend>\r\n\t\t<base />\r\n\t</backend>\r\n\t<outbound>\r\n\t\t<base />\r\n\t</outbound>\r\n\t<on-error>\r\n\t\t<base />\r\n\t</on-error>\r\n</policies>",
        "format": "rawxml"
      },
      "name": "[concat(parameters('ApimServiceName'), '/bpoint-api/TokenAuthkey_Process/policy')]",
      "type": "Microsoft.ApiManagement/service/apis/operations/policies",
      "apiVersion": "2021-01-01-preview",
      "dependsOn": [
        "[resourceId('Microsoft.ApiManagement/service/apis/operations', parameters('ApimServiceName'), 'bpoint-api', 'TokenAuthkey_Process')]"
      ]
    },
    {
      "properties": {
        "displayName": "TokenAuthkey"
      },
      "name": "[concat(parameters('ApimServiceName'), '/bpoint-api/TokenAuthkey_Process/TokenAuthkey')]",
      "type": "Microsoft.ApiManagement/service/apis/operations/tags",
      "apiVersion": "2021-01-01-preview",
      "dependsOn": [
        "[resourceId('Microsoft.ApiManagement/service/apis/operations', parameters('ApimServiceName'), 'bpoint-api', 'TokenAuthkey_Process')]"
      ]
    },
    {
      "properties": {
        "templateParameters": [
          {
            "name": "authkey",
            "type": "string",
            "required": true,
            "values": []
          }
        ],
        "description": "Authkey will be deleted after this operation",
        "request": {
          "queryParameters": [],
          "headers": [],
          "representations": [
            {
              "contentType": "application/json",
              "sample": "{\r\n  \"webhook\": {\r\n    \"url\": \"string\",\r\n    \"version\": \"string\"\r\n  },\r\n  \"surcharge\": {\r\n    \"calculate\": true,\r\n    \"amount\": 0\r\n  },\r\n  \"updateToken\": true\r\n}",
              "schemaId": "61b2e1d0ec635c1020b10294",
              "typeName": "TxnProcessRequest"
            },
            {
              "contentType": "text/json",
              "sample": "{\r\n  \"webhook\": {\r\n    \"url\": \"string\",\r\n    \"version\": \"string\"\r\n  },\r\n  \"surcharge\": {\r\n    \"calculate\": true,\r\n    \"amount\": 0\r\n  },\r\n  \"updateToken\": true\r\n}",
              "schemaId": "61b2e1d0ec635c1020b10294",
              "typeName": "TxnProcessRequest"
            },
            {
              "contentType": "application/x-www-form-urlencoded"
            }
          ]
        },
        "responses": [
          {
            "statusCode": 200,
            "description": "OK",
            "headers": [],
            "representations": [
              {
                "contentType": "application/json",
                "sample": "{\r\n  \"txn\": {\r\n    \"action\": \"Payment\",\r\n    \"type\": \"Internet\",\r\n    \"subType\": \"Single\",\r\n    \"source\": \"string\",\r\n    \"billerCode\": \"string\",\r\n    \"merchantNumber\": \"string\",\r\n    \"crn1\": \"string\",\r\n    \"crn2\": \"string\",\r\n    \"crn3\": \"string\",\r\n    \"merchantReference\": \"string\",\r\n    \"currency\": \"AUD\",\r\n    \"amount\": 110,\r\n    \"amountOriginal\": 100,\r\n    \"amountSurcharge\": 10,\r\n    \"paymentMethod\": {\r\n      \"token\": \"string\",\r\n      \"card\": {\r\n        \"number\": \"string\",\r\n        \"expiry\": {\r\n          \"month\": \"string\",\r\n          \"year\": \"string\"\r\n        },\r\n        \"name\": \"string\",\r\n        \"scheme\": \"Amex\",\r\n        \"localisation\": \"Local\",\r\n        \"type\": \"Debit\"\r\n      },\r\n      \"bank\": {\r\n        \"bsb\": \"string\",\r\n        \"account\": \"string\",\r\n        \"name\": \"string\"\r\n      },\r\n      \"provider\": \"Klarna\"\r\n    },\r\n    \"processedDateTime\": \"string\",\r\n    \"settlementDate\": \"string\",\r\n    \"emailAddress\": \"example@email.com\",\r\n    \"originalTxnNumber\": \"string\",\r\n    \"responseCode\": \"string\",\r\n    \"bankResponseCode\": \"string\",\r\n    \"responseText\": \"string\",\r\n    \"txnNumber\": \"string\",\r\n    \"receiptNumber\": \"string\",\r\n    \"authoriseId\": \"string\",\r\n    \"rrn\": \"string\",\r\n    \"storeCard\": true,\r\n    \"cvnResult\": {\r\n      \"code\": \"string\"\r\n    },\r\n    \"isThreeDs\": true,\r\n    \"isCvnPresent\": true,\r\n    \"isTestTxn\": true,\r\n    \"fraudScreeningResult\": {\r\n      \"rejected\": true,\r\n      \"responseCode\": \"string\",\r\n      \"responseMessage\": \"string\",\r\n      \"provider\": {\r\n        \"id\": \"string\",\r\n        \"response\": [\r\n          {\r\n            \"key\": \"string\",\r\n            \"value\": \"string\"\r\n          }\r\n        ],\r\n        \"errors\": [\r\n          {\r\n            \"field\": \"string\",\r\n            \"message\": \"string\"\r\n          }\r\n        ]\r\n      }\r\n    },\r\n    \"statementDescriptor\": {\r\n      \"city\": \"string\",\r\n      \"companyName\": \"string\",\r\n      \"countryCode\": \"string\",\r\n      \"postcode\": \"string\",\r\n      \"state\": \"string\",\r\n      \"addressLine1\": \"string\",\r\n      \"addressLine2\": \"string\",\r\n      \"merchantName\": \"string\",\r\n      \"phoneNumber\": \"string\"\r\n    },\r\n    \"threeDsResult\": {\r\n      \"fields\": [\r\n        {\r\n          \"key\": \"string\",\r\n          \"value\": \"string\"\r\n        }\r\n      ]\r\n    }\r\n  }\r\n}",
                "schemaId": "61b2e1d0ec635c1020b10294",
                "typeName": "ProcessTxnResponse"
              },
              {
                "contentType": "text/json",
                "sample": "{\r\n  \"txn\": {\r\n    \"action\": \"Payment\",\r\n    \"type\": \"Internet\",\r\n    \"subType\": \"Single\",\r\n    \"source\": \"string\",\r\n    \"billerCode\": \"string\",\r\n    \"merchantNumber\": \"string\",\r\n    \"crn1\": \"string\",\r\n    \"crn2\": \"string\",\r\n    \"crn3\": \"string\",\r\n    \"merchantReference\": \"string\",\r\n    \"currency\": \"AUD\",\r\n    \"amount\": 110,\r\n    \"amountOriginal\": 100,\r\n    \"amountSurcharge\": 10,\r\n    \"paymentMethod\": {\r\n      \"token\": \"string\",\r\n      \"card\": {\r\n        \"number\": \"string\",\r\n        \"expiry\": {\r\n          \"month\": \"string\",\r\n          \"year\": \"string\"\r\n        },\r\n        \"name\": \"string\",\r\n        \"scheme\": \"Amex\",\r\n        \"localisation\": \"Local\",\r\n        \"type\": \"Debit\"\r\n      },\r\n      \"bank\": {\r\n        \"bsb\": \"string\",\r\n        \"account\": \"string\",\r\n        \"name\": \"string\"\r\n      },\r\n      \"provider\": \"Klarna\"\r\n    },\r\n    \"processedDateTime\": \"string\",\r\n    \"settlementDate\": \"string\",\r\n    \"emailAddress\": \"example@email.com\",\r\n    \"originalTxnNumber\": \"string\",\r\n    \"responseCode\": \"string\",\r\n    \"bankResponseCode\": \"string\",\r\n    \"responseText\": \"string\",\r\n    \"txnNumber\": \"string\",\r\n    \"receiptNumber\": \"string\",\r\n    \"authoriseId\": \"string\",\r\n    \"rrn\": \"string\",\r\n    \"storeCard\": true,\r\n    \"cvnResult\": {\r\n      \"code\": \"string\"\r\n    },\r\n    \"isThreeDs\": true,\r\n    \"isCvnPresent\": true,\r\n    \"isTestTxn\": true,\r\n    \"fraudScreeningResult\": {\r\n      \"rejected\": true,\r\n      \"responseCode\": \"string\",\r\n      \"responseMessage\": \"string\",\r\n      \"provider\": {\r\n        \"id\": \"string\",\r\n        \"response\": [\r\n          {\r\n            \"key\": \"string\",\r\n            \"value\": \"string\"\r\n          }\r\n        ],\r\n        \"errors\": [\r\n          {\r\n            \"field\": \"string\",\r\n            \"message\": \"string\"\r\n          }\r\n        ]\r\n      }\r\n    },\r\n    \"statementDescriptor\": {\r\n      \"city\": \"string\",\r\n      \"companyName\": \"string\",\r\n      \"countryCode\": \"string\",\r\n      \"postcode\": \"string\",\r\n      \"state\": \"string\",\r\n      \"addressLine1\": \"string\",\r\n      \"addressLine2\": \"string\",\r\n      \"merchantName\": \"string\",\r\n      \"phoneNumber\": \"string\"\r\n    },\r\n    \"threeDsResult\": {\r\n      \"fields\": [\r\n        {\r\n          \"key\": \"string\",\r\n          \"value\": \"string\"\r\n        }\r\n      ]\r\n    }\r\n  }\r\n}",
                "schemaId": "61b2e1d0ec635c1020b10294",
                "typeName": "ProcessTxnResponse"
              }
            ]
          },
          {
            "statusCode": 400,
            "description": "Request was invalid",
            "headers": [],
            "representations": [
              {
                "contentType": "application/json",
                "sample": "{\r\n  \"code\": \"Fatal\",\r\n  \"message\": \"string\",\r\n  \"details\": [\r\n    {\r\n      \"code\": \"Mandatory\",\r\n      \"message\": \"string\",\r\n      \"field\": \"string\"\r\n    }\r\n  ]\r\n}",
                "schemaId": "61b2e1d0ec635c1020b10294",
                "typeName": "Error"
              },
              {
                "contentType": "text/json",
                "sample": "{\r\n  \"code\": \"Fatal\",\r\n  \"message\": \"string\",\r\n  \"details\": [\r\n    {\r\n      \"code\": \"Mandatory\",\r\n      \"message\": \"string\",\r\n      \"field\": \"string\"\r\n    }\r\n  ]\r\n}",
                "schemaId": "61b2e1d0ec635c1020b10294",
                "typeName": "Error"
              }
            ]
          },
          {
            "statusCode": 401,
            "description": "Invalid credentials, or user does not have required permissions",
            "headers": [],
            "representations": [
              {
                "contentType": "application/json",
                "sample": "{\r\n  \"code\": \"Fatal\",\r\n  \"message\": \"string\",\r\n  \"details\": [\r\n    {\r\n      \"code\": \"Mandatory\",\r\n      \"message\": \"string\",\r\n      \"field\": \"string\"\r\n    }\r\n  ]\r\n}",
                "schemaId": "61b2e1d0ec635c1020b10294",
                "typeName": "Error"
              },
              {
                "contentType": "text/json",
                "sample": "{\r\n  \"code\": \"Fatal\",\r\n  \"message\": \"string\",\r\n  \"details\": [\r\n    {\r\n      \"code\": \"Mandatory\",\r\n      \"message\": \"string\",\r\n      \"field\": \"string\"\r\n    }\r\n  ]\r\n}",
                "schemaId": "61b2e1d0ec635c1020b10294",
                "typeName": "Error"
              }
            ]
          },
          {
            "statusCode": 500,
            "description": "Unknown error occurred",
            "headers": [],
            "representations": [
              {
                "contentType": "application/json",
                "sample": "{\r\n  \"code\": \"Fatal\",\r\n  \"message\": \"string\",\r\n  \"details\": [\r\n    {\r\n      \"code\": \"Mandatory\",\r\n      \"message\": \"string\",\r\n      \"field\": \"string\"\r\n    }\r\n  ]\r\n}",
                "schemaId": "61b2e1d0ec635c1020b10294",
                "typeName": "Error"
              },
              {
                "contentType": "text/json",
                "sample": "{\r\n  \"code\": \"Fatal\",\r\n  \"message\": \"string\",\r\n  \"details\": [\r\n    {\r\n      \"code\": \"Mandatory\",\r\n      \"message\": \"string\",\r\n      \"field\": \"string\"\r\n    }\r\n  ]\r\n}",
                "schemaId": "61b2e1d0ec635c1020b10294",
                "typeName": "Error"
              }
            ]
          }
        ],
        "displayName": "Process transaction",
        "method": "POST",
        "urlTemplate": "/txns/authkeys/{authkey}/process"
      },
      "name": "[concat(parameters('ApimServiceName'), '/bpoint-api/TxnAuthkey_Process')]",
      "type": "Microsoft.ApiManagement/service/apis/operations",
      "apiVersion": "2021-01-01-preview",
      "dependsOn": [
        "[resourceId('Microsoft.ApiManagement/service/apis', parameters('ApimServiceName'), 'bpoint-api')]",
        "[resourceId('Microsoft.ApiManagement/service/apis/schemas', parameters('ApimServiceName'), 'bpoint-api', '61b2e1d0ec635c1020b10294')]"
      ]
    },
    {
      "properties": {
        "displayName": "TxnAuthkey"
      },
      "name": "[concat(parameters('ApimServiceName'), '/bpoint-api/TxnAuthkey_Process/TxnAuthkey')]",
      "type": "Microsoft.ApiManagement/service/apis/operations/tags",
      "apiVersion": "2021-01-01-preview",
      "dependsOn": [
        "[resourceId('Microsoft.ApiManagement/service/apis/operations', parameters('ApimServiceName'), 'bpoint-api', 'TxnAuthkey_Process')]"
      ]
    },
    {
      "properties": {
        "templateParameters": [
          {
            "name": "authkey",
            "type": "string",
            "required": true,
            "values": []
          }
        ],
        "description": "Retrieves the Klarna session",
        "request": {
          "queryParameters": [],
          "headers": [],
          "representations": []
        },
        "responses": [
          {
            "statusCode": 200,
            "description": "OK",
            "headers": [],
            "representations": [
              {
                "contentType": "application/json",
                "sample": "{\r\n  \"clientToken\": \"string\",\r\n  \"paymentMethodCategories\": [\r\n    {\r\n      \"identifier\": \"string\",\r\n      \"name\": \"string\",\r\n      \"logoUrl\": \"string\"\r\n    }\r\n  ]\r\n}",
                "schemaId": "61b2e1d0ec635c1020b10294",
                "typeName": "KlarnaSession"
              },
              {
                "contentType": "text/json",
                "sample": "{\r\n  \"clientToken\": \"string\",\r\n  \"paymentMethodCategories\": [\r\n    {\r\n      \"identifier\": \"string\",\r\n      \"name\": \"string\",\r\n      \"logoUrl\": \"string\"\r\n    }\r\n  ]\r\n}",
                "schemaId": "61b2e1d0ec635c1020b10294",
                "typeName": "KlarnaSession"
              }
            ]
          },
          {
            "statusCode": 400,
            "description": "Request was invalid",
            "headers": [],
            "representations": [
              {
                "contentType": "application/json",
                "sample": "{\r\n  \"code\": \"Fatal\",\r\n  \"message\": \"string\",\r\n  \"details\": [\r\n    {\r\n      \"code\": \"Mandatory\",\r\n      \"message\": \"string\",\r\n      \"field\": \"string\"\r\n    }\r\n  ]\r\n}",
                "schemaId": "61b2e1d0ec635c1020b10294",
                "typeName": "Error"
              },
              {
                "contentType": "text/json",
                "sample": "{\r\n  \"code\": \"Fatal\",\r\n  \"message\": \"string\",\r\n  \"details\": [\r\n    {\r\n      \"code\": \"Mandatory\",\r\n      \"message\": \"string\",\r\n      \"field\": \"string\"\r\n    }\r\n  ]\r\n}",
                "schemaId": "61b2e1d0ec635c1020b10294",
                "typeName": "Error"
              }
            ]
          },
          {
            "statusCode": 500,
            "description": "Unknown error occurred",
            "headers": [],
            "representations": [
              {
                "contentType": "application/json",
                "sample": "{\r\n  \"code\": \"Fatal\",\r\n  \"message\": \"string\",\r\n  \"details\": [\r\n    {\r\n      \"code\": \"Mandatory\",\r\n      \"message\": \"string\",\r\n      \"field\": \"string\"\r\n    }\r\n  ]\r\n}",
                "schemaId": "61b2e1d0ec635c1020b10294",
                "typeName": "Error"
              },
              {
                "contentType": "text/json",
                "sample": "{\r\n  \"code\": \"Fatal\",\r\n  \"message\": \"string\",\r\n  \"details\": [\r\n    {\r\n      \"code\": \"Mandatory\",\r\n      \"message\": \"string\",\r\n      \"field\": \"string\"\r\n    }\r\n  ]\r\n}",
                "schemaId": "61b2e1d0ec635c1020b10294",
                "typeName": "Error"
              }
            ]
          }
        ],
        "displayName": "Retrieves the Klarna session",
        "method": "GET",
        "urlTemplate": "/txns/authkeys/{authkey}/client/klarna"
      },
      "name": "[concat(parameters('ApimServiceName'), '/bpoint-api/TxnAuthkeyClient_GetKlarnaSession')]",
      "type": "Microsoft.ApiManagement/service/apis/operations",
      "apiVersion": "2021-01-01-preview",
      "dependsOn": [
        "[resourceId('Microsoft.ApiManagement/service/apis', parameters('ApimServiceName'), 'bpoint-api')]",
        "[resourceId('Microsoft.ApiManagement/service/apis/schemas', parameters('ApimServiceName'), 'bpoint-api', '61b2e1d0ec635c1020b10294')]"
      ]
    },
    {
      "properties": {
        "displayName": "TxnAuthkeyClient"
      },
      "name": "[concat(parameters('ApimServiceName'), '/bpoint-api/TxnAuthkeyClient_GetKlarnaSession/TxnAuthkeyClient')]",
      "type": "Microsoft.ApiManagement/service/apis/operations/tags",
      "apiVersion": "2021-01-01-preview",
      "dependsOn": [
        "[resourceId('Microsoft.ApiManagement/service/apis/operations', parameters('ApimServiceName'), 'bpoint-api', 'TxnAuthkeyClient_GetKlarnaSession')]"
      ]
    },
    {
      "properties": {
        "templateParameters": [
          {
            "name": "authkey",
            "type": "string",
            "required": true,
            "values": []
          }
        ],
        "description": "Setup authentication iframe",
        "request": {
          "queryParameters": [],
          "headers": [],
          "representations": []
        },
        "responses": [
          {
            "statusCode": 200,
            "description": "OK",
            "headers": [],
            "representations": [
              {
                "contentType": "application/json",
                "sample": "{\r\n  \"iframe\": {\r\n    \"url\": \"string\",\r\n    \"origin\": \"string\"\r\n  },\r\n  \"authentication\": {\r\n    \"status\": \"InProgress\"\r\n  }\r\n}",
                "schemaId": "61b2e1d0ec635c1020b10294",
                "typeName": "SetupAuthenticationIframeResponse"
              },
              {
                "contentType": "text/json",
                "sample": "{\r\n  \"iframe\": {\r\n    \"url\": \"string\",\r\n    \"origin\": \"string\"\r\n  },\r\n  \"authentication\": {\r\n    \"status\": \"InProgress\"\r\n  }\r\n}",
                "schemaId": "61b2e1d0ec635c1020b10294",
                "typeName": "SetupAuthenticationIframeResponse"
              }
            ]
          },
          {
            "statusCode": 400,
            "description": "Request was invalid",
            "headers": [],
            "representations": [
              {
                "contentType": "application/json",
                "sample": "{\r\n  \"code\": \"Fatal\",\r\n  \"message\": \"string\",\r\n  \"details\": [\r\n    {\r\n      \"code\": \"Mandatory\",\r\n      \"message\": \"string\",\r\n      \"field\": \"string\"\r\n    }\r\n  ]\r\n}",
                "schemaId": "61b2e1d0ec635c1020b10294",
                "typeName": "Error"
              },
              {
                "contentType": "text/json",
                "sample": "{\r\n  \"code\": \"Fatal\",\r\n  \"message\": \"string\",\r\n  \"details\": [\r\n    {\r\n      \"code\": \"Mandatory\",\r\n      \"message\": \"string\",\r\n      \"field\": \"string\"\r\n    }\r\n  ]\r\n}",
                "schemaId": "61b2e1d0ec635c1020b10294",
                "typeName": "Error"
              }
            ]
          },
          {
            "statusCode": 401,
            "description": "Invalid credentials, or user does not have required permissions",
            "headers": [],
            "representations": [
              {
                "contentType": "application/json",
                "sample": "{\r\n  \"code\": \"Fatal\",\r\n  \"message\": \"string\",\r\n  \"details\": [\r\n    {\r\n      \"code\": \"Mandatory\",\r\n      \"message\": \"string\",\r\n      \"field\": \"string\"\r\n    }\r\n  ]\r\n}",
                "schemaId": "61b2e1d0ec635c1020b10294",
                "typeName": "Error"
              },
              {
                "contentType": "text/json",
                "sample": "{\r\n  \"code\": \"Fatal\",\r\n  \"message\": \"string\",\r\n  \"details\": [\r\n    {\r\n      \"code\": \"Mandatory\",\r\n      \"message\": \"string\",\r\n      \"field\": \"string\"\r\n    }\r\n  ]\r\n}",
                "schemaId": "61b2e1d0ec635c1020b10294",
                "typeName": "Error"
              }
            ]
          },
          {
            "statusCode": 500,
            "description": "Unknown error occurred",
            "headers": [],
            "representations": [
              {
                "contentType": "application/json",
                "sample": "{\r\n  \"code\": \"Fatal\",\r\n  \"message\": \"string\",\r\n  \"details\": [\r\n    {\r\n      \"code\": \"Mandatory\",\r\n      \"message\": \"string\",\r\n      \"field\": \"string\"\r\n    }\r\n  ]\r\n}",
                "schemaId": "61b2e1d0ec635c1020b10294",
                "typeName": "Error"
              },
              {
                "contentType": "text/json",
                "sample": "{\r\n  \"code\": \"Fatal\",\r\n  \"message\": \"string\",\r\n  \"details\": [\r\n    {\r\n      \"code\": \"Mandatory\",\r\n      \"message\": \"string\",\r\n      \"field\": \"string\"\r\n    }\r\n  ]\r\n}",
                "schemaId": "61b2e1d0ec635c1020b10294",
                "typeName": "Error"
              }
            ]
          }
        ],
        "displayName": "Setup authentication iframe",
        "method": "POST",
        "urlTemplate": "/txns/authkeys/{authkey}/authentication-iframe"
      },
      "name": "[concat(parameters('ApimServiceName'), '/bpoint-api/TxnAuthkey_SetupAuthenticationIframe')]",
      "type": "Microsoft.ApiManagement/service/apis/operations",
      "apiVersion": "2021-01-01-preview",
      "dependsOn": [
        "[resourceId('Microsoft.ApiManagement/service/apis', parameters('ApimServiceName'), 'bpoint-api')]",
        "[resourceId('Microsoft.ApiManagement/service/apis/schemas', parameters('ApimServiceName'), 'bpoint-api', '61b2e1d0ec635c1020b10294')]"
      ]
    },
    {
      "properties": {
        "displayName": "TxnAuthkey"
      },
      "name": "[concat(parameters('ApimServiceName'), '/bpoint-api/TxnAuthkey_SetupAuthenticationIframe/TxnAuthkey')]",
      "type": "Microsoft.ApiManagement/service/apis/operations/tags",
      "apiVersion": "2021-01-01-preview",
      "dependsOn": [
        "[resourceId('Microsoft.ApiManagement/service/apis/operations', parameters('ApimServiceName'), 'bpoint-api', 'TxnAuthkey_SetupAuthenticationIframe')]"
      ]
    },
    {
      "properties": {
        "templateParameters": [
          {
            "name": "authkey",
            "type": "string",
            "required": true,
            "values": []
          }
        ],
        "description": "Use when updating a token to only update supplied fields.",
        "request": {
          "queryParameters": [],
          "headers": [],
          "representations": [
            {
              "contentType": "application/json",
              "sample": "{\r\n  \"crn1\": \"string\",\r\n  \"crn2\": \"string\",\r\n  \"crn3\": \"string\",\r\n  \"emailAddress\": \"string\"\r\n}",
              "schemaId": "61b2e1d0ec635c1020b10294",
              "typeName": "TokenDetailsRequest"
            },
            {
              "contentType": "text/json",
              "sample": "{\r\n  \"crn1\": \"string\",\r\n  \"crn2\": \"string\",\r\n  \"crn3\": \"string\",\r\n  \"emailAddress\": \"string\"\r\n}",
              "schemaId": "61b2e1d0ec635c1020b10294",
              "typeName": "TokenDetailsRequest"
            },
            {
              "contentType": "application/x-www-form-urlencoded"
            }
          ]
        },
        "responses": [
          {
            "statusCode": 201,
            "description": "Successful",
            "headers": [],
            "representations": []
          },
          {
            "statusCode": 400,
            "description": "Request was invalid",
            "headers": [],
            "representations": []
          },
          {
            "statusCode": 401,
            "description": "Invalid credentials, or user does not have required permissions",
            "headers": [],
            "representations": []
          },
          {
            "statusCode": 500,
            "description": "Unknown error occurred",
            "headers": [],
            "representations": []
          }
        ],
        "displayName": "Update token details",
        "method": "PATCH",
        "urlTemplate": "/tokens/authkeys/{authkey}/token-details"
      },
      "name": "[concat(parameters('ApimServiceName'), '/bpoint-api/TokenAuthkey_UpdateTokenDetails')]",
      "type": "Microsoft.ApiManagement/service/apis/operations",
      "apiVersion": "2021-01-01-preview",
      "dependsOn": [
        "[resourceId('Microsoft.ApiManagement/service/apis', parameters('ApimServiceName'), 'bpoint-api')]",
        "[resourceId('Microsoft.ApiManagement/service/apis/schemas', parameters('ApimServiceName'), 'bpoint-api', '61b2e1d0ec635c1020b10294')]"
      ]
    },
    {
      "properties": {
        "value": "<!--\n    IMPORTANT:\n    - Policy elements can appear only within the <inbound>, <outbound>, <backend> section elements.\n    - To apply a policy to the incoming request (before it is forwarded to the backend service), place a corresponding policy element within the <inbound> section element.\n    - To apply a policy to the outgoing response (before it is sent back to the caller), place a corresponding policy element within the <outbound> section element.\n    - To add a policy, place the cursor at the desired insertion point and select a policy from the sidebar.\n    - To remove a policy, delete the corresponding policy statement from the policy document.\n    - Position the <base> element within a section element to inherit all policies from the corresponding section element in the enclosing scope.\n    - Remove the <base> element to prevent inheriting policies from the corresponding section element in the enclosing scope.\n    - Policies are applied in the order of their appearance, from the top down.\n    - Comments within policy elements are not supported and may disappear. Place your comments between policy elements or at a higher level scope.\n-->\r\n<policies>\r\n\t<inbound>\r\n\t\t<base />\r\n\t</inbound>\r\n\t<backend>\r\n\t\t<base />\r\n\t</backend>\r\n\t<outbound>\r\n\t\t<base />\r\n\t</outbound>\r\n\t<on-error>\r\n\t\t<base />\r\n\t</on-error>\r\n</policies>",
        "format": "rawxml"
      },
      "name": "[concat(parameters('ApimServiceName'), '/bpoint-api/TokenAuthkey_UpdateTokenDetails/policy')]",
      "type": "Microsoft.ApiManagement/service/apis/operations/policies",
      "apiVersion": "2021-01-01-preview",
      "dependsOn": [
        "[resourceId('Microsoft.ApiManagement/service/apis/operations', parameters('ApimServiceName'), 'bpoint-api', 'TokenAuthkey_UpdateTokenDetails')]"
      ]
    },
    {
      "properties": {
        "displayName": "TokenAuthkey"
      },
      "name": "[concat(parameters('ApimServiceName'), '/bpoint-api/TokenAuthkey_UpdateTokenDetails/TokenAuthkey')]",
      "type": "Microsoft.ApiManagement/service/apis/operations/tags",
      "apiVersion": "2021-01-01-preview",
      "dependsOn": [
        "[resourceId('Microsoft.ApiManagement/service/apis/operations', parameters('ApimServiceName'), 'bpoint-api', 'TokenAuthkey_UpdateTokenDetails')]"
      ]
    },
    {
      "properties": {
        "value": "<!--\n    IMPORTANT:\n    - Policy elements can appear only within the <inbound>, <outbound>, <backend> section elements.\n    - To apply a policy to the incoming request (before it is forwarded to the backend service), place a corresponding policy element within the <inbound> section element.\n    - To apply a policy to the outgoing response (before it is sent back to the caller), place a corresponding policy element within the <outbound> section element.\n    - To add a policy, place the cursor at the desired insertion point and select a policy from the sidebar.\n    - To remove a policy, delete the corresponding policy statement from the policy document.\n    - Position the <base> element within a section element to inherit all policies from the corresponding section element in the enclosing scope.\n    - Remove the <base> element to prevent inheriting policies from the corresponding section element in the enclosing scope.\n    - Policies are applied in the order of their appearance, from the top down.\n    - Comments within policy elements are not supported and may disappear. Place your comments between policy elements or at a higher level scope.\n-->\r\n<policies>\r\n\t<inbound>\r\n\t\t<base />\r\n\t\t<authentication-basic username=\"{{bpoint-username}}|{{bpoint-merchantnumber}}\" password=\"{{bpoint-password}}\" />\r\n\t\t<choose>\r\n\t\t\t<when condition=\"{{enable-3rd-party-http-proxy}}\">\r\n\t\t\t\t<proxy url=\"{{3rd-party-http-proxy-url}}\" username=\"{{3rd-party-http-proxy-username}}\" password=\"{{3rd-party-http-proxy-password}}\" />\r\n\t\t\t</when>\r\n\t\t</choose>\r\n\t</inbound>\r\n\t<backend>\r\n\t\t<base />\r\n\t</backend>\r\n\t<outbound>\r\n\t\t<base />\r\n\t</outbound>\r\n\t<on-error>\r\n\t\t<base />\r\n\t</on-error>\r\n</policies>",
        "format": "rawxml"
      },
      "name": "[concat(parameters('ApimServiceName'), '/bpoint-api/policy')]",
      "type": "Microsoft.ApiManagement/service/apis/policies",
      "apiVersion": "2021-01-01-preview",
      "dependsOn": [
        "[resourceId('Microsoft.ApiManagement/service/apis', parameters('ApimServiceName'), 'bpoint-api')]"
      ]
    },
    {
      "properties": {
        "displayName": "BPoint"
      },
      "name": "[concat(parameters('ApimServiceName'), '/bpoint-api/bpoint')]",
      "type": "Microsoft.ApiManagement/service/apis/tags",
      "apiVersion": "2021-01-01-preview",
      "dependsOn": [
        "[resourceId('Microsoft.ApiManagement/service/apis', parameters('ApimServiceName'), 'bpoint-api')]"
      ]
    },
    {
      "properties": {
        "displayName": "Payment Gateway"
      },
      "name": "[concat(parameters('ApimServiceName'), '/bpoint-api/payment-gateway')]",
      "type": "Microsoft.ApiManagement/service/apis/tags",
      "apiVersion": "2021-01-01-preview",
      "dependsOn": [
        "[resourceId('Microsoft.ApiManagement/service/apis', parameters('ApimServiceName'), 'bpoint-api')]"
      ]
    },
    {
      "name": "[concat(parameters('ApimServiceName'), '/3rd-party-apis/bpoint-api')]",
      "type": "Microsoft.ApiManagement/service/products/apis",
      "apiVersion": "2021-01-01-preview",
      "dependsOn": [
        "[resourceId('Microsoft.ApiManagement/service/apis', parameters('ApimServiceName'), 'bpoint-api')]"
      ]
    },
    {
      "name": "[concat(parameters('ApimServiceName'), '/self-service-apis/bpoint-api')]",
      "type": "Microsoft.ApiManagement/service/products/apis",
      "apiVersion": "2021-01-01-preview",
      "dependsOn": [
        "[resourceId('Microsoft.ApiManagement/service/apis', parameters('ApimServiceName'), 'bpoint-api')]"
      ]
    },
    {
      "properties": {
        "alwaysLog": "allErrors",
        "loggerId": "/subscriptions/7fdba8aa-bd1e-4895-aff7-b64589d0a27e/resourceGroups/rg-corenonprod01-integration-00/providers/Microsoft.ApiManagement/service/apim-corenonprod01-integration-00/loggers/appInsightsPrimaryDeploy",
        "httpCorrelationProtocol": "Legacy",
        "verbosity": "information",
        "logClientIp": true,
        "sampling": {
          "samplingType": "fixed",
          "percentage": 100.0
        },
        "frontend": {
          "request": {
            "headers": [
              "TransactionContextID",
              "ApplicationID",
              "UserID",
              "Version",
              "apim-correlation-id",
              "Ocp-Apim-Subscription-Key"
            ],
            "body": {
              "bytes": 8192
            }
          },
          "response": {
            "headers": [
              "apim-correlation-id"
            ],
            "body": {
              "bytes": 8192
            }
          }
        },
        "backend": {
          "request": {
            "headers": [],
            "body": {
              "bytes": 8192
            }
          },
          "response": {
            "headers": [],
            "body": {
              "bytes": 8192
            }
          }
        }
      },
      "name": "[concat(parameters('ApimServiceName'), '/applicationinsights')]",
      "type": "Microsoft.ApiManagement/service/diagnostics",
      "apiVersion": "2021-01-01-preview",
      "dependsOn": []
    },
    {
      "properties": {
        "loggerId": "/subscriptions/7fdba8aa-bd1e-4895-aff7-b64589d0a27e/resourceGroups/rg-corenonprod01-integration-00/providers/Microsoft.ApiManagement/service/apim-corenonprod01-integration-00/loggers/azuremonitor",
        "logClientIp": true,
        "sampling": {
          "samplingType": "fixed",
          "percentage": 100.0
        }
      },
      "name": "[concat(parameters('ApimServiceName'), '/azuremonitor')]",
      "type": "Microsoft.ApiManagement/service/diagnostics",
      "apiVersion": "2021-01-01-preview",
      "dependsOn": []
    }
  ]
}